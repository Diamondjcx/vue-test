_jsload_(
  "AMap.MoveAnimation",
  '!function(){"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}var d1,d2,r,eventemitter=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _uid=-1;var EventEmitter=function(){function EventEmitter(){if(!(this instanceof EventEmitter))throw new TypeError("Cannot call a class as a function");this.__events__={},this.__id__=++_uid}return _createClass(EventEmitter,[{key:"on",value:function(type,listener,context){for(var events=this.__events__,listeners=events[type]=events[type]||[],i=(context===this&&(context=void 0),-1),len=listeners;++i<len;){var _listeners$i=listeners[i],fn=_listeners$i.fn,_listeners$i=_listeners$i.ctx;if(fn===listener&&_listeners$i===context)return this}return listeners.push({fn:listener,ctx:context}),this}},{key:"once",value:function(type,listener,context){function onceCallback(ev){this.off(type,onceCallback),listener.call(this,ev)}return onceCallback.listener=listener,this.on(type,onceCallback,context)}},{key:"off",value:function(type,listener,context){var events=this.__events__;if(type)if(listener){var listeners=events[type];if(listeners)for(var i=listeners.length;0<=--i;){var _listeners$i2=listeners[i],fn=_listeners$i2.fn;_listeners$i2.ctx!==context||fn!==listener&&fn!==fn.listener||(listeners.splice(i,1),0)}}else delete events[type];else this.__events__={};return this}},{key:"emit",value:function(type,data){var listeners=this.__events__[type];if(listeners)for(var event=function(dest){for(var j=-1,len=arguments.length<=1?0:arguments.length-1;++j<len;){var i,src=arguments.length<=j+1?void 0:arguments[j+1];for(i in src)src.hasOwnProperty(i)&&(dest[i]=src[i])}return dest}({},data,{target:this,type:type}),i=-1,len=listeners.length;++i<len;){var _listeners$i3=listeners[i],fn=_listeners$i3.fn,_listeners$i3=_listeners$i3.ctx;fn.call(_listeners$i3||this,event)}return this}},{key:"events",get:function(){return this.__events__}},{key:"id",get:function(){return this.__id__}}]),EventEmitter}();exports.default=EventEmitter}),util=(unwrapExports(eventemitter),createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")};exports.default={remove:function(array,predicate){var result=[];if(array&&array.length&&"function"==typeof predicate){for(var index=-1,indexes=[],length=array.length;++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}!function(array,indexes){for(var length=array?indexes.length:0;0<length--;){var index=indexes[length];array.splice(index,1)}}(array,indexes)}return result},normalize:function normalize(arr){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!Array.isArray(arr))return arr;for(var _options$type=options.type,type=void 0===_options$type?"":_options$type,_options$type=options.range,_options$type=void 0===_options$type?[0,1]:_options$type,_options$min=options.min,min=void 0===_options$min?Math.min.apply(Math,arr):_options$min,_options$min=options.max,max=void 0===_options$min?Math.max.apply(Math,arr):_options$min,type=type.toLowerCase(),normalizationArr=[],diff=max-min,i=-1,len=arr.length;++i<len;){var v=arr[i],v2=void((v=max<v?max:v)<min&&(v=min)),v2="log"!==type?(v-min)/diff:Math.log10(v);normalizationArr.push(v2)}"log"===type&&(normalizationArr=normalize(normalizationArr));var options=_slicedToArray(_options$type,2),rMin=options[0],_options$min=options[1];if(0!==rMin||1!==_options$min){for(var _i=-1,_len=normalizationArr.length,_diff=_options$min-rMin,norArr=[];++_i<_len;){var _v=normalizationArr[_i];norArr.push(_diff*_v+rMin)}normalizationArr=norArr}return normalizationArr},forInMap:function(obj,callback){for(var key in obj)obj.hasOwnProperty(key)&&callback(obj[key],key,obj)}}})),animationframe=(unwrapExports(util),createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),"performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1&&(offset=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now(),window.performance.now=function(){return Date.now()-offset});var offset,requestAnimationFrame="undefined"!=typeof window&&(window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(callback){setTimeout(callback,16)},cancelAnimationFrame="undefined"!=typeof window&&(window.cancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame)||function(timer){clearTimeout(timer)};exports.requestAnimationFrame=requestAnimationFrame,exports.cancelAnimationFrame=cancelAnimationFrame})),define=(unwrapExports(animationframe),animationframe.requestAnimationFrame,animationframe.cancelAnimationFrame,createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.Ev={UPDATE:"update",START:"start",REPEAT:"repeat",REPEAT_COMPLETE:"repeatComplete",AFTER_UPDATE:"afterUpdate",COMPLETE:"complete",PAUSE:"pause",STOP:"stop",RESET:"reset"},exports.Attr={DURATION:"duration",REPEAT:"repeat",DELAY:"delay",EASING:"easing",INTERVAL:"interval",YOYO:"yoyo",START:"startAt"},exports.Easing={LINEAR:"Linear",QUADRATIC_IN:"QuadraticIn",QUADRATIC_OUT:"QuadraticOut",QUADRATIC_IN_OUT:"QuadraticInOut",CUBIC_IN:"CubicIn",CUBIC_OUT:"CubicOut",CUBIC_IN_OUT:"CubicInOut",QUARTIC_IN:"QuarticIn",QUARTIC_OUT:"QuarticOut",QUARTIC_IN_OUT:"QuarticInOut",QUINTIC_IN:"QuinticIn",QUINTIC_OUT:"QuinticOut",QUINTIC_IN_OUT:"QuinticInOut",SINUSOIDAL_IN:"SinusoidalIn",SINUSOIDAL_OUT:"SinusoidalOut",SINUSOIDAL_IN_OUT:"SinusoidalInOut",EXPONENTIAL_IN:"ExponentialIn",EXPONENTIAL_OUT:"ExponentialOut",EXPONENTIAL_IN_OUT:"ExponentialInOut",CIRCULAR_IN:"CircularIn",CIRCULAR_OUT:"CircularOut",CIRCULAR_IN_OUT:"CircularInOut",ELASTIC_IN:"ElasticIn",ELASTIC_OUT:"ElasticOut",ELASTIC_IN_OUT:"ElasticInOut",BACK_IN:"BackIn",BACK_OUT:"BackOut",BACK_IN_OUT:"BackInOut",BOUNCE_IN:"BounceIn",BOUNCE_OUT:"BounceOut",BOUNCE_IN_OUT:"BounceInOut"}})),animation=(unwrapExports(define),define.Ev,define.Attr,define.Easing,createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _eventemitter2=_interopRequireDefault(eventemitter),_util2=_interopRequireDefault(util);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var remove=_util2.default.remove,forInMap=_util2.default.forInMap,_util2=function(_EventEmitter){var subClass=Animation;if("function"!=typeof _EventEmitter&&null!==_EventEmitter)throw new TypeError("Super expression must either be null or a function, not "+typeof _EventEmitter);function Animation(options){var _this;if(this instanceof Animation)return(_this=function(self,call){if(self)return!call||"object"!=typeof call&&"function"!=typeof call?self:call;throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called")}(this,(Animation.__proto__||Object.getPrototypeOf(Animation)).call(this)))._options={},_this._savedClipMap={},_this._clips=[],_this._clipMap={},_this._options=options||{},_this;throw new TypeError("Cannot call a class as a function")}return subClass.prototype=Object.create(_EventEmitter&&_EventEmitter.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),_EventEmitter&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,_EventEmitter):subClass.__proto__=_EventEmitter),_createClass(Animation,[{key:"_startAni",value:function(){var _this2=this;this._timer=(0,animationframe.requestAnimationFrame)(function update(timestamp){_this2._timer=(0,animationframe.requestAnimationFrame)(update),_this2._update(timestamp)})}},{key:"_stopAni",value:function(){var timer=this._timer;return!(!timer||((0,animationframe.cancelAnimationFrame)(timer),this._timer=null))}},{key:"_update",value:function(timestamp){for(var clips=this._clips,i=(this.emit(define.Ev.UPDATE,{timestamp:timestamp}),0);i<clips.length;){var clip=clips[i];clip.update(timestamp)?i++:this._rmClip(clip)}this._clips=clips,this.emit(define.Ev.AFTER_UPDATE),0===clips.length&&(this._stopAni(),this.emit(define.Ev.COMPLETE))}},{key:"start",value:function(){var clips=this._clips,len=clips.length;if(!this._timer&&0!==len){this.emit(define.Ev.START);for(var i=-1;++i<len;)clips[i].start();this._startAni()}return this}},{key:"stop",value:function(){return this._stop(!1),this}},{key:"pause",value:function(){return this._stop(!0),this}},{key:"reset",value:function(){this._stop(!1,!0,!1);var savedMap=this._savedClipMap,list=[];return forInMap(savedMap,function(value){value.stop(!0),list.push(value)}),this._clips=list,this.emit(define.Ev.RESET),this}},{key:"_stop",value:function(pause,reset){var emit=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],clips=(this._stopAni(),this._clips),len=clips.length;if(len){for(var i=-1;++i<len;){var clip=clips[i];pause?clip.pause():clip.stop(reset)}emit&&this.emit(pause?define.Ev.PAUSE:define.Ev.STOP)}}},{key:"addClip",value:function(clips){for(var startClip=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=-1,len=(clips=Array.isArray(clips)?clips:[clips]).length;++i<len;){var clip=clips[i];this._hasSavedClip(clip)||(this._addClip(clip),this._addSavedClip(clip),this._timer&&startClip&&clip.start())}return this}},{key:"_addClip",value:function(clip){var _c=this._clips;-1===_c.indexOf(clip)&&(_c.push(clip),clip._animation=this)}},{key:"_addSavedClip",value:function(clip){var clipMap=this._savedClipMap,id=clip.id;clipMap[id]!==clip&&((clipMap[id]=clip)._animation=this)}},{key:"removeClip",value:function(clip){var savedMap=this._savedClipMap;return clip?(this._rmClip(clip),this._rmSavedClip(clip),clip._animation=null):(forInMap(savedMap,function(value){value._animation=null}),this._clips=[],this._savedClipMap={}),this}},{key:"_rmClip",value:function(clip){remove(this._clips,function(c){return c===clip})}},{key:"_rmSavedClip",value:function(clip){this._hasSavedClip(clip)&&delete this._savedClipMap[clip.id]}},{key:"getClips",value:function(){return this._clips}},{key:"_hasSavedClip",value:function(clip){var id=clip.id,id=this._savedClipMap[id];return id&&id===clip}},{key:"_hasClip",value:function(clip){return-1!==this._clips.indexOf(clip)}},{key:"destroy",value:function(){this.off(),this._stopAni(),this.removeClip()}}]),Animation}(_eventemitter2.default);_util2.Event=define.Ev,exports.default=_util2})),easing=(unwrapExports(animation),createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var Easing={Linear:function(k){return k},QuadraticIn:function(k){return k*k},QuadraticOut:function(k){return k*(2-k)},QuadraticInOut:function(k){return(k*=2)<1?.5*k*k:-.5*(--k*(k-2)-1)},CubicIn:function(k){return k*k*k},CubicOut:function(k){return--k*k*k+1},CubicInOut:function(k){return(k*=2)<1?.5*k*k*k:.5*((k-=2)*k*k+2)},QuarticIn:function(k){return k*k*k*k},QuarticOut:function(k){return 1- --k*k*k*k},QuarticInOut:function(k){return(k*=2)<1?.5*k*k*k*k:-.5*((k-=2)*k*k*k-2)},QuinticIn:function(k){return k*k*k*k*k},QuinticOut:function(k){return--k*k*k*k*k+1},QuinticInOut:function(k){return(k*=2)<1?.5*k*k*k*k*k:.5*((k-=2)*k*k*k*k+2)},SinusoidalIn:function(k){return 1-Math.cos(k*Math.PI/2)},SinusoidalOut:function(k){return Math.sin(k*Math.PI/2)},SinusoidalInOut:function(k){return.5*(1-Math.cos(Math.PI*k))},ExponentialIn:function(k){return 0===k?0:Math.pow(1024,k-1)},ExponentialOut:function(k){return 1===k?1:1-Math.pow(2,-10*k)},ExponentialInOut:function(k){return 0===k?0:1===k?1:(k*=2)<1?.5*Math.pow(1024,k-1):.5*(2-Math.pow(2,-10*(k-1)))},CircularIn:function(k){return 1-Math.sqrt(1-k*k)},CircularOut:function(k){return Math.sqrt(1- --k*k)},CircularInOut:function(k){return(k*=2)<1?-.5*(Math.sqrt(1-k*k)-1):.5*(Math.sqrt(1-(k-=2)*k)+1)},ElasticIn:function(k){var s,a=.1;return 0===k?0:1===k?1:(s=!a||a<1?(a=1,.1):.4*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*--k)*Math.sin((k-s)*(2*Math.PI)/.4)))},ElasticOut:function(k){var s,a=.1;return 0===k?0:1===k?1:(s=!a||a<1?(a=1,.1):.4*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/.4)+1)},ElasticInOut:function(k){var s,a=.1;return 0===k?0:1===k?1:(s=!a||a<1?(a=1,.1):.4*Math.asin(1/a)/(2*Math.PI),(k*=2)<1?a*Math.pow(2,10*--k)*Math.sin((k-s)*(2*Math.PI)/.4)*-.5:a*Math.pow(2,-10*--k)*Math.sin((k-s)*(2*Math.PI)/.4)*.5+1)},BackIn:function(k){var s=1.70158;return k*k*((1+s)*k-s)},BackOut:function(k){var s=1.70158;return--k*k*((1+s)*k+s)+1},BackInOut:function(k){var s=2.5949095;return(k*=2)<1?k*k*((1+s)*k-s)*.5:.5*((k-=2)*k*((1+s)*k+s)+2)},BounceIn:function(k){return 1-Easing.BounceOut(1-k)},BounceOut:function(k){return k<1/2.75?7.5625*k*k:k<2/2.75?7.5625*(k-=1.5/2.75)*k+.75:k<2.5/2.75?7.5625*(k-=2.25/2.75)*k+.9375:7.5625*(k-=2.625/2.75)*k+.984375},BounceInOut:function(k){return k<.5?.5*Easing.BounceIn(2*k):.5*Easing.BounceOut(2*k-1)+.5}};exports.default=Easing})),Interpolation_1=(unwrapExports(easing),createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var a,Interpolation={Linear:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=Interpolation.Utils.Linear;return k<0?fn(v[0],v[1],f):1<k?fn(v[m],v[m-1],m-f):fn(v[i],v[m<i+1?m:i+1],f-i)},Bezier:function(v,k){for(var b=0,n=v.length-1,pw=Math.pow,bn=Interpolation.Utils.Bernstein,i=0;i<=n;i++)b+=pw(1-k,n-i)*pw(k,i)*v[i]*bn(n,i);return b},CatmullRom:function(v,k){var m=v.length-1,f=m*k,i=Math.floor(f),fn=Interpolation.Utils.CatmullRom;return v[0]===v[m]?fn(v[((i=k<0?Math.floor(f=m*(1+k)):i)-1+m)%m],v[i],v[(i+1)%m],v[(i+2)%m],f-i):k<0?v[0]-(fn(v[0],v[0],v[1],v[1],-f)-v[0]):1<k?v[m]-(fn(v[m],v[m],v[m-1],v[m-1],f-m)-v[m]):fn(v[i?i-1:0],v[i],v[m<i+1?m:i+1],v[m<i+2?m:i+2],f-i)},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0},Bernstein:function(n,i){var fc=Interpolation.Utils.Factorial;return fc(n)/fc(i)/fc(n-i)},Factorial:(a=[1],function(n){var s=1;if(a[n])return a[n];for(var i=n;1<i;i--)s*=i;return a[n]=s}),CatmullRom:function(p0,p1,p2,p3,t){var p0=.5*(p2-p0),p3=.5*(p3-p1),t2=t*t;return(2*p1-2*p2+p0+p3)*(t*t2)+(-3*p1+3*p2-2*p0-p3)*t2+p0*t+p1}}};exports.default=Interpolation})),clip=(unwrapExports(Interpolation_1),createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _eventemitter2=_interopRequireDefault(eventemitter),_easing2=_interopRequireDefault(easing),_Interpolation2=_interopRequireDefault(Interpolation_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_eventemitter2=function(_EventEmitter){var subClass=Clip;if("function"!=typeof _EventEmitter&&null!==_EventEmitter)throw new TypeError("Super expression must either be null or a function, not "+typeof _EventEmitter);function Clip(options,attr){var _this;if(this instanceof Clip)return(_this=function(self,call){if(self)return!call||"object"!=typeof call&&"function"!=typeof call?self:call;throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called")}(this,(Clip.__proto__||Object.getPrototypeOf(Clip)).call(this)))._options={},_this._attr={},_this._startAt=0,_this._stopped=!0,_this._paused=!1,_this._startTime=0,_this._pauseStart=0,_this._pauseTime=0,_this._reversed=!1,_this._chainClips=[],_this._tracks=[],_this._interpolation=_Interpolation2.default.Linear,_this._options=options||{},_this._attr=attr,_this._initOption(options),_this._tracks=_this._transform(attr),_this;throw new TypeError("Cannot call a class as a function")}return subClass.prototype=Object.create(_EventEmitter&&_EventEmitter.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),_EventEmitter&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,_EventEmitter):subClass.__proto__=_EventEmitter),_createClass(Clip,null,[{key:"registerPlugin",value:function(plugin){var type=plugin.type,plugins=this._plugins;plugins&&plugins[type]||(this._plugins=plugins||{},this._plugins[type]=plugin)}}]),_createClass(Clip,[{key:"_initOption",value:function(options){var easing=options[define.Attr.EASING]||define.Easing.LINEAR,easing=(this._easing=_easing2.default[easing]||easing,this._delay=options[define.Attr.DELAY]||0,options[define.Attr.DURATION]);this._duration=void 0===easing?1e3:easing,this._repeat_0=this._repeat=options[define.Attr.REPEAT]||1,this._interval=options[define.Attr.INTERVAL]||0,this._yoyo=options[define.Attr.YOYO]||!1,this._startAt=options[define.Attr.START]||0}},{key:"_transform",value:function(attr){var key,_plugins=this.constructor._plugins,_attrList=[];for(key in attr)if(attr.hasOwnProperty(key)){var type,value=attr[key];for(type in _plugins){var plugin=_plugins[type];if(plugin.test(value,key)){(value=plugin.parse(value,key)).__type__=plugin.type;break}}_attrList.push({key:key,value:value})}return _attrList}},{key:"start",value:function(force){var now=window.performance.now(),onceRepeat=!1;if(this._paused)this._pauseTime+=now-this._pauseStart,this._paused=!1;else{if(!force&&!this._stopped)return this;this._stopped=!(onceRepeat=!0),this._startTime=now+this._delay}this.emit(define.Ev.START);force=this._repeat;return 1<force&&force===this._repeat_0&&onceRepeat&&this.emit(define.Ev.REPEAT,{remain:0}),this}},{key:"stop",value:function(reset){return this._stopped||(this._stopped=!0,this._paused=!1,this._pauseTime=0,this._pauseStart=0,this.emit(define.Ev.STOP),this.stopChain()),reset&&(this._repeat=this._repeat_0),this}},{key:"pause",value:function(){return this._stopped||this._paused||(this._paused=!0,this._pauseStart=window.performance.now(),this.emit(define.Ev.PAUSE)),this}},{key:"update",value:function(time){var progress,_getProgress2,keyframe;return!!this._stopped||!!(this._paused||time&&time<this._startTime)||(time=time-this._pauseTime,progress=(_getProgress2=this._getProgress(time)).progress,_getProgress2=_getProgress2.elapsed,keyframe=this._updateAttr(progress,_getProgress2),this.emit(define.Ev.UPDATE,{progress:progress,keyframe:keyframe,elapsed:_getProgress2}),this._afterUpdate(time,_getProgress2))}},{key:"_getProgress",value:function(time){time=(time-this._startTime)/this._duration;return time+=this._startAt,time=Math.min(time,1),{progress:this._easing(this._reversed?1-time:time),elapsed:time}}},{key:"_updateAttr",value:function(progress,elapsed){for(var tracks=this._tracks,keyframe={},i=0,len=tracks.length;i<len;){var item=tracks[i++],key=item.key,item=item.value,type=item.__type__;item=type?this.constructor._plugins[type].valueOf(item,progress,elapsed,key):this._interpolation(item,progress),keyframe[key]=item}return keyframe}},{key:"_afterUpdate",value:function(time,elapsed){if(1!==elapsed)return!0;var elapsed=this._repeat,repeat_0=this._repeat_0;if(1<elapsed)return isFinite(elapsed)&&elapsed--,this._startTime=time+this._interval,this._startAt=0,this._yoyo&&(this._reversed=!this._reversed),this._repeat=elapsed,this.emit(define.Ev.REPEAT_COMPLETE,{repeat:elapsed}),this.emit(define.Ev.REPEAT,{remain:repeat_0-elapsed}),!0;this._stopped=!0,this._pauseTime=0,this._pauseStart=0,1<(this._repeat=repeat_0)&&this.emit(define.Ev.REPEAT_COMPLETE,{repeat:0}),this.emit(define.Ev.COMPLETE);for(var i=-1,chains=this._chainClips,len=chains.length,ani=this._animation;++i<len;){var clip=chains[i];ani&&ani._addClip(clip),clip.start()}return!1}},{key:"chain",value:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this._chainClips=args,this}},{key:"stopChain",value:function(){for(var i=-1,clips=this._chainClips,len=clips.length;++i<len;)clips[i].stop();return this}},{key:"destroy",value:function(){this.off(),this._stopped=!0,this._paused=!1,this._startTime=0,this._pauseTime=0,this._pauseStart=0,this._chainClips=[];var ani=this._animation;ani&&ani.removeClip(this),this._animation=null}}]),Clip}(_eventemitter2.default);_eventemitter2.Event=define.Ev,_eventemitter2.Attr=define.Attr,_eventemitter2.Easing=define.Easing,exports.default=_eventemitter2})),core=(unwrapExports(clip),createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.Clip=exports.Animation=void 0;var _animation2=_interopRequireDefault(animation),_clip2=_interopRequireDefault(clip);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={Animation:_animation2.default,Clip:_clip2.default},exports.Animation=_animation2.default,exports.Clip=_clip2.default})),csscolorparser=(unwrapExports(core),core.Clip,core.Animation,createCommonjsModule(function(module,exports){var kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(i){return(i=Math.round(i))<0?0:255<i?255:i}function clamp_css_float(f){return f<0?0:1<f?1:f}function parse_css_int(str){return"%"===str[str.length-1]?clamp_css_byte(parseFloat(str)/100*255):clamp_css_byte(parseInt(str))}function parse_css_float(str){return"%"===str[str.length-1]?clamp_css_float(parseFloat(str)/100):clamp_css_float(parseFloat(str))}function css_hue_to_rgb(m1,m2,h){return h<0?h+=1:1<h&&--h,6*h<1?m1+(m2-m1)*h*6:2*h<1?m2:3*h<2?m1+(m2-m1)*(2/3-h)*6:m1}try{exports.parseCSSColor=function(css_str){if((css_str=css_str.replace(/ /g,"").toLowerCase())in kCSSColorTable)return kCSSColorTable[css_str].slice();if("#"===css_str[0])return 4===css_str.length?0<=(iv=parseInt(css_str.substr(1),16))&&iv<=4095?[(3840&iv)>>4|(3840&iv)>>8,240&iv|(240&iv)>>4,15&iv|(15&iv)<<4,1]:null:7===css_str.length&&0<=(iv=parseInt(css_str.substr(1),16))&&iv<=16777215?[(16711680&iv)>>16,(65280&iv)>>8,255&iv,1]:null;var iv=css_str.indexOf("("),ep=css_str.indexOf(")");if(-1!==iv&&ep+1===css_str.length){var h,l,s,fname=css_str.substr(0,iv),params=css_str.substr(iv+1,ep-(iv+1)).split(","),alpha=1;switch(fname){case"rgba":if(4!==params.length)return null;alpha=parse_css_float(params.pop());case"rgb":return 3!==params.length?null:[parse_css_int(params[0]),parse_css_int(params[1]),parse_css_int(params[2]),alpha];case"hsla":if(4!==params.length)return null;alpha=parse_css_float(params.pop());case"hsl":return 3!==params.length?null:(h=(parseFloat(params[0])%360+360)%360/360,s=parse_css_float(params[1]),[clamp_css_byte(255*css_hue_to_rgb(s=2*(l=parse_css_float(params[2]))-(l=l<=.5?l*(s+1):l+s-l*s),l,h+1/3)),clamp_css_byte(255*css_hue_to_rgb(s,l,h)),clamp_css_byte(255*css_hue_to_rgb(s,l,h-1/3)),alpha]);default:return null}}return null}}catch(e){}})),colorhelper=(csscolorparser.parseCSSColor,createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var obj,_slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_csscolorparser2=(obj=csscolorparser)&&obj.__esModule?obj:{default:obj};var parseCSSColor=_csscolorparser2.default.parseCSSColor;function _clamp_css_byte(i){return(i=Math.round(i))<0?0:255<i?255:i}function _clamp_css_float(f){return f<0?0:1<f?1:f}var ColorHelper={isColor:function(color){if("string"==typeof color)return!!(0,_csscolorparser2.default)(color);if(Array.isArray(color)){for(var i=0,len=color.length;i<len;){var c=color[i++];if("string"!=typeof c)return!1;if(!parseCSSColor(c))return!1}return!0}return!1},toColorIncrease:function(inc){return[inc[0]||0,inc[1]||0,inc[2]||0,inc[3]||0]},toNormal:function(color){if(Array.isArray(color)){for(var colorArr=[],i=0,len=color.length;i<len;){var c=color[i++];if("string"!=typeof c)return null;c=parseCSSColor(c);if(!c)return null;colorArr.push(c)}return colorArr}return"string"==typeof color?parseCSSColor(color):null},toNormalArray:function(color){if(Array.isArray(color)){for(var colorArr=[],i=0,len=color.length;i<len;){var c=color[i++];if("string"!=typeof c)return null;c=parseCSSColor(c);if(!c)return null;colorArr.push(c)}return colorArr}return"string"==typeof color?[parseCSSColor(color)]:null},linearGradient:function(steps){var progress=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,interpolation=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ColorHelper.Utils.Linear,m=steps.length-1,progress=m*progress,i=progress>>0,fn=interpolation;return function(p0,p1,t){var p0=_slicedToArray(p0,4),r0=p0[0],g0=p0[1],b0=p0[2],p0=p0[3],p1=_slicedToArray(p1,4),r1=p1[0],g1=p1[1],b1=p1[2],p1=p1[3];return[fn(r0,r1,t)>>0,fn(g0,g1,t)>>0,fn(b0,b1,t)>>0,fn(p0,p1,t)]}(steps[i],steps[m<1+i?m:1+i],progress-i)},mixColors:function(color,increase){var c=this.toNormal(color);return Array.isArray(increase)&&c?"rgba("+[(c=[_clamp_css_byte(c[0]+increase[0]||0),_clamp_css_byte(c[1]+increase[1]||0),_clamp_css_byte(c[2]+increase[2]||0),_clamp_css_float(c[3]+increase[3]||0)])[0],c[1],c[2],c[3]].join(",")+")":color},toRGBA:function(color){var alpha;return color&&3<=color.length?(alpha=void 0===color[3]?1:color[3],"rgba("+_clamp_css_byte(color[0])+","+_clamp_css_byte(color[1])+","+_clamp_css_byte(color[2])+","+_clamp_css_float(alpha)+")"):"transparent"},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0}}};exports.default=ColorHelper})),color=(unwrapExports(colorhelper),createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _clip2=_interopRequireDefault(clip),_colorhelper2=_interopRequireDefault(colorhelper);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var plugin={type:"color",test:function(value,key){return _colorhelper2.default.isColor(value)},parse:function(value,key){return _colorhelper2.default.toNormalArray(value)},valueOf:function(parsedValue,progress,elapsed,key){parsedValue=_colorhelper2.default.linearGradient(parsedValue,progress);return _colorhelper2.default.toRGBA(parsedValue)}};_clip2.default.registerPlugin(plugin),exports.default=plugin})),vector_1=(unwrapExports(color),createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var ArrayCons="undefined"==typeof Float32Array?Array:Float32Array,vector={create:function(){var x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,out=new ArrayCons(2);return out[0]=x,out[1]=y,out},copy:function(out,v){return out[0]=v[0],out[1]=v[1],out},clone:function(v){var out=new ArrayCons(2);return out[0]=v[0],out[1]=v[1],out},set:function(out,x,y){return out[0]=x,out[1]=y,out},add:function(out,v1,v2){return out[0]=v1[0]+v2[0],out[1]=v1[1]+v2[1],out},scaleAndAdd:function(out,v1,v2,scale){return out[0]=v1[0]+v2[0]*scale,out[1]=v1[1]+v2[1]*scale,out},sub:function(out,v1,v2){return out[0]=v1[0]-v2[0],out[1]=v1[1]-v2[1],out},length:function(v){return Math.sqrt(this.lengthSquare(v))},lengthSquare:function(v){return v[0]*v[0]+v[1]*v[1]},multiply:function(out,v1,v2){return out[0]=v1[0]*v2[0],out[1]=v1[1]*v2[1],out},divide:function(out,v1,v2){return out[0]=v1[0]/v2[0],out[1]=v1[1]/v2[1],out},dot:function(v1,v2){return v1[0]*v2[0]+v1[1]*v2[1]},scale:function(out,v,s){return out[0]=v[0]*s,out[1]=v[1]*s,out},normalize:function(out,v){var d=this.len(v);return 0===d?(out[0]=0,out[1]=0):(out[0]=v[0]/d,out[1]=v[1]/d),out},distance:function(v1,v2){return Math.sqrt(this.distanceSquare(v1,v2))},distanceSquare:function(v1,v2){return(v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1])},negate:function(out,v){return out[0]=-v[0],out[1]=-v[1],out},lerp:function(out,v1,v2,t){return out[0]=v1[0]+t*(v2[0]-v1[0]),out[1]=v1[1]+t*(v2[1]-v1[1]),out},applyTransform:function(out,v,m){var x=v[0],v=v[1];return out[0]=m[0]*x+m[2]*v+m[4],out[1]=m[1]*x+m[3]*v+m[5],out},min:function(out,v1,v2){return out[0]=Math.min(v1[0],v2[0]),out[1]=Math.min(v1[1],v2[1]),out},max:function(out,v1,v2){return out[0]=Math.max(v1[0],v2[0]),out[1]=Math.max(v1[1],v2[1]),out},getAngle:function(v1,v2){var angle=0;return angle=0!=v1[0]-v2[0]?Math.atan2(v1[1]-v2[1],v1[0]-v2[0]):angle}};vector.len=vector.length,vector.lenSquare=vector.lengthSquare,vector.dist=vector.distance,vector.distSquare=vector.distanceSquare,exports.default=vector})),color=(unwrapExports(vector_1),createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_clip2=_interopRequireDefault(clip),_vector2=_interopRequireDefault(vector_1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var plugin={type:"coordinate-2d",test:function(value,key){var res=!1;if(Array.isArray(value))for(var i=-1,len=value.length;++i<len;){var _ref,item=value[i];Array.isArray(item)&&(item=(_ref=[+(item=_slicedToArray(item,2))[0],+(item=item[1])])[1],res="number"==typeof(_ref=_ref[0])&&"number"==typeof item&&isFinite(_ref)&&isFinite(item))}return res},parse:function(value,key){for(var path=[],i=-1,len=value.length;++i<len;){var item=value[i],item=_slicedToArray(item,2),item=[+item[0],+item[1]];path.push([item[0],item[1]])}return function(path){for(var angle,i=0,len=path.length,length=0,_path=[],steps=[];i<len-1;){var p0=path[i],p1=path[i+1],segmentLength=_vector2.default.distance(p0,p1);length+=segmentLength,angle=_vector2.default.getAngle(p1,p0),_path.push(p0),steps.push({length:length,segmentLength:segmentLength,segment:[p0.slice(),p1.slice()],path:_path.slice(),angle:angle}),i++}return steps.sum=length,steps}(path)},valueOf:function(steps,progress,elapsed,key){for(var current=steps.sum*progress,i=-1,len=steps.length,step=steps[0];++i<len;){var s=steps[i];if(current<=s.length){step=s;break}}var progress=_slicedToArray(step.segment,2),p0=progress[0],progress=progress[1],scale=(0==i?current:current-steps[i-1].length)/step.segmentLength,out=_vector2.default.create(),position=_vector2.default.create();return _vector2.default.sub(out,progress,p0),_vector2.default.scaleAndAdd(position,p0,out,scale),position.step=step,position}};_clip2.default.registerPlugin(plugin),exports.default=plugin})),color=(unwrapExports(color),createCommonjsModule(function(module){var Animation=core.Animation,Clip=core.Clip;module.exports.default={Animation:Animation,Clip:Clip},module.exports.Animation=Animation,module.exports.Clip=Clip})),chito_1=color.Animation,chito_2=color.Clip,projections={},color=function(){function Projection(id,project,unproject,getResolution){this.project=project,this.unproject=unproject,this.getResolution=getResolution,projections[id]=this}return Projection.prototype.moveWithPixel=function(lnglat,offsetPixel,zoom){var zoom=this.getResolution(zoom),offsetX=offsetPixel[0]*zoom,offsetPixel=offsetPixel[1]*zoom,zoom=this.project(lnglat[0],lnglat[1]);return this.unproject(zoom[0]+offsetX,zoom[1]+offsetPixel)},Projection.prototype.moveWithPos=function(lnglat,offsetPos){lnglat=this.project(lnglat[0],lnglat[1]),lnglat=[lnglat[0]+offsetPos[0],lnglat[1]+offsetPos[1]];return this.unproject(lnglat[0],lnglat[1])},Projection}(),ProjectionManager={getProjection:function(id){return projections[id]}};new color("EPSG:4326",function(lng,lat){return[lng,lat]},function(x,y){return[x,y]},function(zoom){return.703125/Math.pow(2,zoom)}),d1=Math.PI/180,d2=180/Math.PI,r=6378137,new color("EPSG:3857",function(lng,lat){lat=Math.max(Math.min(85.0511287798,lat),-85.0511287798);lng*=d1,lat*=d1,lat=Math.log(Math.tan(Math.PI/4+lat/2));return[lng*r,lat*r]},function(x,y){return[x/r*d2,(2*Math.atan(Math.exp(y/r))-Math.PI/2)*d2]},function(zoom){return 156543.03392804097/Math.pow(2,zoom)});var color="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,freeSelf=color||freeSelf||Function("return this")(),Symbol$1=freeSelf.Symbol,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;var nativeObjectToString$1=Object.prototype.toString;var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{var unmasked=!(value[symToStringTag]=void 0)}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}:function(value){return nativeObjectToString$1.call(value)})(value)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isArray=Array.isArray;function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function identity(value){return value}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(isObject(value))return(value=baseGetTag(value))==funcTag||value==genTag||value==asyncTag||value==proxyTag}var objectProto=freeSelf["__core-js_shared__"],maskSrcKey=(objectProto=/[^.]+$/.exec(objectProto&&objectProto.keys&&objectProto.keys.IE_PROTO||""))?"Symbol(src)_1."+objectProto:"";var funcToString=Function.prototype.toString;function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var reIsHostCtor=/^\\[object .+?Constructor\\]$/,objectProto=Function.prototype,objectProto$2=Object.prototype,objectProto=objectProto.toString,objectProto$2=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+objectProto.call(objectProto$2).replace(/[\\\\^$.*+?()[\\]{}|]/g,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");function baseIsNative(value){var func;return isObject(value)&&(func=value,!(maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}function getNative(object,key){object=function(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(object)?object:void 0}objectProto=getNative(freeSelf,"WeakMap");var nativeNow=Date.now;var func,count,lastCalled,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),setToString=(func=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:(value=string,function(){return value}),writable:!0});var value}:identity,lastCalled=count=0,function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,0<remaining){if(800<=++count)return arguments[0]}else count=0;return func.apply(void 0,arguments)}),MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(value,length){var type=typeof value;return(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function eq(value,other){return value===other||value!=value&&other!=other}var hasOwnProperty$2=Object.prototype.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];hasOwnProperty$2.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}var nativeMax=Math.max;function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];for(var index=-1,otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),function(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}(func,this,otherArgs)}}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return"number"==typeof value&&-1<value&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}var objectProto$4=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto$4)}function baseIsArguments(value){return isObjectLike(value)&&"[object Arguments]"==baseGetTag(value)}var objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$3.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};var objectProto$2="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=objectProto$2&&"object"==typeof module&&module&&!module.nodeType&&module,freeModule=freeModule&&freeModule.exports===objectProto$2?freeSelf.Buffer:void 0,isBuffer=(freeModule?freeModule.isBuffer:void 0)||function(){return!1},typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1;var objectProto$2="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=objectProto$2&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule$1&&freeModule$1.exports===objectProto$2&&color.process,freeModule=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return types?types:freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),objectProto$2=freeModule&&freeModule.isTypedArray,isTypedArray=objectProto$2?function(func){return function(value){return func(value)}}(objectProto$2):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]},hasOwnProperty$4=Object.prototype.hasOwnProperty;function arrayLikeKeys(value,inherited){var key,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(key in value)!inherited&&!hasOwnProperty$4.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}var nativeKeys=function(func,transform){return function(arg){return func(transform(arg))}}(Object.keys,Object),hasOwnProperty$5=Object.prototype.hasOwnProperty;function keys(object){return(isArrayLike(object)?arrayLikeKeys:function(object){if(!isPrototype(object))return nativeKeys(object);var key,result=[];for(key in Object(object))hasOwnProperty$5.call(object,key)&&"constructor"!=key&&result.push(key);return result})(object)}var hasOwnProperty$6=Object.prototype.hasOwnProperty,assign=function(assigner){return setToString(overRest(func=function(object,sources){var index=-1,length=sources.length,customizer=1<length?sources[length-1]:void 0,guard=2<length?sources[2]:void 0,customizer=3<assigner.length&&"function"==typeof customizer?(length--,customizer):void 0;for(guard&&function(value,index,object){var type;if(isObject(object))return("number"==(type=typeof index)?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object},start,identity),func+"");var func,start}(function(object,source){if(isPrototype(source)||isArrayLike(source))!function(source,props,object,customizer){for(var isNew=!object,index=(object=object||{},-1),length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;(isNew?baseAssignValue:assignValue)(object,key,newValue=void 0===newValue?source[key]:newValue)}}(source,keys(source),object);else for(var key in source)hasOwnProperty$6.call(source,key)&&assignValue(object,key,source[key])}),nativeCreate=getNative(Object,"create");var hasOwnProperty$7=Object.prototype.hasOwnProperty;var hasOwnProperty$8=Object.prototype.hasOwnProperty;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(key){return key=this.has(key)&&delete this.__data__[key],this.size-=key?1:0,key},Hash.prototype.get=function(key){var result,data=this.__data__;return nativeCreate?"__lodash_hash_undefined__"===(result=data[key])?void 0:result:hasOwnProperty$7.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty$8.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this};var splice=Array.prototype.splice;function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(key){var data=this.__data__;return!((key=assocIndexOf(data,key))<0||(key==data.length-1?data.pop():splice.call(data,key,1),--this.size,0))},ListCache.prototype.get=function(key){var data=this.__data__;return(key=assocIndexOf(data,key))<0?void 0:data[key][1]},ListCache.prototype.has=function(key){return-1<assocIndexOf(this.__data__,key)},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this};var Map=getNative(freeSelf,"Map");function getMapData(map,key){var value,type,map=map.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?map["string"==typeof key?"string":"hash"]:map.map}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){return key=getMapData(this,key).delete(key),this.size-=key?1:0,key},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this};function Stack(entries){entries=this.__data__=new ListCache(entries);this.size=entries.size}Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(key){var data=this.__data__,key=data.delete(key);return this.size=data.size,key},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var propertyIsEnumerable$1=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){if(null==object)return[];object=Object(object);for(var array=nativeGetSymbols(object),predicate=function(symbol){return propertyIsEnumerable$1.call(object,symbol)},index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}:function(){return[]};function getAllKeys(object){return function(object,keysFunc,symbolsFunc){if(keysFunc=keysFunc(object),isArray(object))return keysFunc;for(var array=keysFunc,values=symbolsFunc(object),index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(object,keys,getSymbols)}var color=getNative(freeSelf,"DataView"),freeModule=getNative(freeSelf,"Promise"),objectProto$2=getNative(freeSelf,"Set"),dataViewCtorString=toSource(color),mapCtorString=toSource(Map),promiseCtorString=toSource(freeModule),setCtorString=toSource(objectProto$2),weakMapCtorString=toSource(objectProto),getTag=baseGetTag,getTag$1=getTag=color&&"[object DataView]"!=getTag(new color(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||freeModule&&"[object Promise]"!=getTag(freeModule.resolve())||objectProto$2&&"[object Set]"!=getTag(new objectProto$2)||objectProto&&"[object WeakMap]"!=getTag(new objectProto)?function(value){var result=baseGetTag(value),value="[object Object]"==result?value.constructor:void 0,value=value?toSource(value):"";if(value)switch(value){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}:getTag,Uint8Array$1=freeSelf.Uint8Array;function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)};function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&arrLength<othLength))return!1;var othLength=stack.get(array),othStacked=stack.get(other);if(othLength&&othStacked)return othLength==other&&othStacked==array;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var compared,arrValue=array[index],othValue=other[index];if(void 0!==(compared=customizer?isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack):compared)){if(compared)continue;result=!1;break}if(seen){if(!function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return 1}(other,function(othValue,othIndex){return!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))&&seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var color=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=color?color.valueOf:void 0;var hasOwnProperty$9=Object.prototype.hasOwnProperty;var COMPARE_PARTIAL_FLAG$3=1,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",objectTag$2="[object Object]",hasOwnProperty$a=Object.prototype.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag$1:getTag$1(object),othIsArr=othIsArr?arrayTag$1:getTag$1(other),objIsObj=(objTag=objTag==argsTag$2?objectTag$2:objTag)==objectTag$2,othIsObj=(othIsArr=othIsArr==argsTag$2?objectTag$2:othIsArr)==objectTag$2,othIsArr=objTag==othIsArr;if(othIsArr&&isBuffer(object)){if(!isBuffer(other))return!1;objIsObj=!(objIsArr=!0)}if(othIsArr&&!objIsObj)return stack=stack||new Stack,objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return object.byteLength==other.byteLength&&equalFunc(new Uint8Array$1(object),new Uint8Array$1(other))?!0:!1;case"[object Boolean]":case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case"[object Map]":var convert=mapToArray;case"[object Set]":convert=convert||setToArray;if(object.size!=other.size&&!(1&bitmask))return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);stacked=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),stacked;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(bitmask&COMPARE_PARTIAL_FLAG$3)){objIsArr=objIsObj&&hasOwnProperty$a.call(object,"__wrapped__"),objTag=othIsObj&&hasOwnProperty$a.call(other,"__wrapped__");if(objIsArr||objTag)return equalFunc(objIsArr?object.value():object,objTag?other.value():other,bitmask,customizer,stack=stack||new Stack)}return othIsArr&&function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$9.call(other,key)))return!1}var objStacked=stack.get(object),othStacked=stack.get(other);if(objStacked&&othStacked)return objStacked==other&&othStacked==object;for(var result=!0,skipCtor=(stack.set(object,other),stack.set(other,object),isPartial);++index<objLength;){var compared,objValue=object[key=objProps[index]],othValue=other[key];if(!(void 0===(compared=customizer?isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack):compared)?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor=skipCtor||"constructor"==key}return result&&!skipCtor&&(objStacked=object.constructor)!=(othStacked=other.constructor)&&"constructor"in object&&"constructor"in other&&!("function"==typeof objStacked&&objStacked instanceof objStacked&&"function"==typeof othStacked&&othStacked instanceof othStacked)&&(result=!1),stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack=stack||new Stack)}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}function isEqual(value,other){return baseIsEqual(value,other)}var Coordinate_closestOnSegment=function(coordinate,segment){var x,x0=coordinate[0],coordinate=coordinate[1],start=segment[0],segment=segment[1],x1=start[0],start=start[1],x2=segment[0],segment=segment[1],dx=x2-x1,dy=segment-start,x0=0==dx&&0==dy?0:(dx*(x0-x1)+dy*(coordinate-start))/(dx*dx+dy*dy||0),coordinate=x0<=0?(x=x1,start):1<=x0?(x=x2,segment):(x=x1+x0*dx,start+x0*dy);return[x,coordinate]},Coordinate_containsCoordinate=function(coordinate,vertices,containBounds){for(var x=coordinate[0],y=coordinate[1],inside=!1,numVertices=vertices.length,i=0,j=numVertices-1;i<numVertices;j=i,i+=1){var intersect=!1,xi=vertices[i][0],yi=vertices[i][1],xj=vertices[j][0],yj=vertices[j][1];if(xi===x&&yi===y||xj===x&&yj===y)return!!containBounds;if(yi<y==y<=yj){xj=(xj-xi)*(y-yi)/(yj-yi)+xi;if(x===xj)return!!containBounds;intersect=x<xj}intersect&&(inside=!inside)}return inside},Pixel=function(){function Pixel(x,y,isRound){if(void 0===isRound&&(isRound=!1),this.className="AMap.Pixel",isNaN(x)||isNaN(y))throw new Error("Invalid Object: Pixel("+x+", "+y+")");this.x=isRound?Math.round(x):Number(x),this.y=isRound?Math.round(y):Number(y)}return Pixel.prototype.getX=function(){return this.x},Pixel.prototype.round=function(){return new Pixel(Math.round(this.x),Math.round(this.y))},Pixel.prototype.getY=function(){return this.y},Pixel.prototype.toString=function(){return this.x+","+this.y},Pixel.prototype.equals=function(point){return point instanceof Pixel&&Math.max(Math.abs(this.x-point.x),Math.abs(this.y-point.y))<=1e-9},Pixel.prototype.toArray=function(){return[this.x,this.y]},Pixel.prototype.subtract=function(other,isRound){return new Pixel(this.x-other.x,this.y-other.y,isRound)},Pixel.prototype.multiplyBy=function(num,noWrap){return new Pixel(this.x*num,this.y*num,noWrap)},Pixel.prototype.direction=function(){var angle,x=this.x,y=this.y;return 0===x&&0===y?null:0===x?0<y?90:270:(angle=180*Math.atan(y/x)/Math.PI,x<0&&0<y||x<0&&y<0?180+angle:0<x&&y<0?360+angle:angle)},Pixel.prototype.toJSON=function(){return[this.x,this.y]},Pixel}(),martinez=unwrapExports(createCommonjsModule(function(module,exports){!function(exports){function DEFAULT_COMPARE(a,b){return a>b?1:a<b?-1:0}var SplayTree=function SplayTree(compare,noDuplicates){if(compare===void 0)compare=DEFAULT_COMPARE;if(noDuplicates===void 0)noDuplicates=false;this._compare=compare;this._root=null;this._size=0;this._noDuplicates=!!noDuplicates},prototypeAccessors={size:{configurable:true}};function loadRecursive(parent,keys,values,start,end){var size=end-start;if(size>0){var middle=start+Math.floor(size/2);var key=keys[middle];var data=values[middle];var node={key:key,data:data,parent:parent};node.left=loadRecursive(node,keys,values,start,middle);node.right=loadRecursive(node,keys,values,middle+1,end);return node}return null}function sort(keys,values,left,right,compare){if(left>=right)return;var pivot=keys[left+right>>1];var i=left-1;var j=right+1;while(true){do{i++}while(compare(keys[i],pivot)<0);do{j--}while(compare(keys[j],pivot)>0);if(i>=j)break;var tmp=keys[i];keys[i]=keys[j];keys[j]=tmp;tmp=values[i];values[i]=values[j];values[j]=tmp}sort(keys,values,left,j,compare);sort(keys,values,j+1,right,compare)}SplayTree.prototype.rotateLeft=function rotateLeft(x){var y=x.right;if(y){x.right=y.left;if(y.left)y.left.parent=x;y.parent=x.parent}if(!x.parent)this._root=y;else if(x===x.parent.left)x.parent.left=y;else x.parent.right=y;if(y)y.left=x;x.parent=y},SplayTree.prototype.rotateRight=function rotateRight(x){var y=x.left;if(y){x.left=y.right;if(y.right)y.right.parent=x;y.parent=x.parent}if(!x.parent)this._root=y;else if(x===x.parent.left)x.parent.left=y;else x.parent.right=y;if(y)y.right=x;x.parent=y},SplayTree.prototype._splay=function _splay(x){while(x.parent){var p=x.parent;if(!p.parent)if(p.left===x)this.rotateRight(p);else this.rotateLeft(p);else if(p.left===x&&p.parent.left===p){this.rotateRight(p.parent);this.rotateRight(p)}else if(p.right===x&&p.parent.right===p){this.rotateLeft(p.parent);this.rotateLeft(p)}else if(p.left===x&&p.parent.right===p){this.rotateRight(p);this.rotateLeft(p)}else{this.rotateLeft(p);this.rotateRight(p)}}},SplayTree.prototype.splay=function splay(x){var p,gp,ggp,l,r;while(x.parent){p=x.parent;gp=p.parent;if(gp&&gp.parent){ggp=gp.parent;if(ggp.left===gp)ggp.left=x;else ggp.right=x;x.parent=ggp}else{x.parent=null;this._root=x}l=x.left;r=x.right;if(x===p.left){if(gp)if(gp.left===p){if(p.right){gp.left=p.right;gp.left.parent=gp}else gp.left=null;p.right=gp;gp.parent=p}else{if(l){gp.right=l;l.parent=gp}else gp.right=null;x.left=gp;gp.parent=x}if(r){p.left=r;r.parent=p}else p.left=null;x.right=p;p.parent=x}else{if(gp)if(gp.right===p){if(p.left){gp.right=p.left;gp.right.parent=gp}else gp.right=null;p.left=gp;gp.parent=p}else{if(r){gp.left=r;r.parent=gp}else gp.left=null;x.right=gp;gp.parent=x}if(l){p.right=l;l.parent=p}else p.right=null;x.left=p;p.parent=x}}},SplayTree.prototype.replace=function replace(u,v){if(!u.parent)this._root=v;else if(u===u.parent.left)u.parent.left=v;else u.parent.right=v;if(v)v.parent=u.parent},SplayTree.prototype.minNode=function minNode(u){if(u===void 0)u=this._root;if(u)while(u.left)u=u.left;return u},SplayTree.prototype.maxNode=function maxNode(u){if(u===void 0)u=this._root;if(u)while(u.right)u=u.right;return u},SplayTree.prototype.insert=function insert(key,data){var z=this._root;var p=null;var comp=this._compare;var cmp;if(this._noDuplicates)while(z){p=z;cmp=comp(z.key,key);if(cmp===0)return;else if(comp(z.key,key)<0)z=z.right;else z=z.left}else while(z){p=z;if(comp(z.key,key)<0)z=z.right;else z=z.left}z={key:key,data:data,left:null,right:null,parent:p};if(!p)this._root=z;else if(comp(p.key,z.key)<0)p.right=z;else p.left=z;this.splay(z);this._size++;return z},SplayTree.prototype.find=function find(key){var z=this._root;var comp=this._compare;while(z){var cmp=comp(z.key,key);if(cmp<0)z=z.right;else if(cmp>0)z=z.left;else return z}return null},SplayTree.prototype.contains=function contains(key){var node=this._root;var comparator=this._compare;while(node){var cmp=comparator(key,node.key);if(cmp===0)return true;else if(cmp<0)node=node.left;else node=node.right}return false},SplayTree.prototype.remove=function remove(key){var z=this.find(key);if(!z)return false;this.splay(z);if(!z.left)this.replace(z,z.right);else if(!z.right)this.replace(z,z.left);else{var y=this.minNode(z.right);if(y.parent!==z){this.replace(y,y.right);y.right=z.right;y.right.parent=y}this.replace(z,y);y.left=z.left;y.left.parent=y}this._size--;return true},SplayTree.prototype.removeNode=function removeNode(z){if(!z)return false;this.splay(z);if(!z.left)this.replace(z,z.right);else if(!z.right)this.replace(z,z.left);else{var y=this.minNode(z.right);if(y.parent!==z){this.replace(y,y.right);y.right=z.right;y.right.parent=y}this.replace(z,y);y.left=z.left;y.left.parent=y}this._size--;return true},SplayTree.prototype.erase=function erase(key){var z=this.find(key);if(!z)return;this.splay(z);var s=z.left;var t=z.right;var sMax=null;if(s){s.parent=null;sMax=this.maxNode(s);this.splay(sMax);this._root=sMax}if(t){if(s)sMax.right=t;else this._root=t;t.parent=sMax}this._size--},SplayTree.prototype.pop=function pop(){var node=this._root,returnValue=null;if(node){while(node.left)node=node.left;returnValue={key:node.key,data:node.data};this.remove(node.key)}return returnValue},SplayTree.prototype.next=function next(node){var successor=node;if(successor)if(successor.right){successor=successor.right;while(successor&&successor.left)successor=successor.left}else{successor=node.parent;while(successor&&successor.right===node){node=successor;successor=successor.parent}}return successor},SplayTree.prototype.prev=function prev(node){var predecessor=node;if(predecessor)if(predecessor.left){predecessor=predecessor.left;while(predecessor&&predecessor.right)predecessor=predecessor.right}else{predecessor=node.parent;while(predecessor&&predecessor.left===node){node=predecessor;predecessor=predecessor.parent}}return predecessor},SplayTree.prototype.forEach=function forEach(callback){var current=this._root;var s=[],done=false,i=0;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();callback(current,i++);current=current.right}else done=true;return this},SplayTree.prototype.range=function range(low,high,fn,ctx){var Q=[];var compare=this._compare;var node=this._root,cmp;while(Q.length!==0||node)if(node){Q.push(node);node=node.left}else{node=Q.pop();cmp=compare(node.key,high);if(cmp>0)break;else if(compare(node.key,low)>=0)if(fn.call(ctx,node))return this;node=node.right}return this},SplayTree.prototype.keys=function keys(){var current=this._root;var s=[],r=[],done=false;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();r.push(current.key);current=current.right}else done=true;return r},SplayTree.prototype.values=function values(){var current=this._root;var s=[],r=[],done=false;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();r.push(current.data);current=current.right}else done=true;return r},SplayTree.prototype.at=function at(index){var current=this._root;var s=[],done=false,i=0;while(!done)if(current){s.push(current);current=current.left}else if(s.length>0){current=s.pop();if(i===index)return current;i++;current=current.right}else done=true;return null},SplayTree.prototype.load=function load(keys,values,presort){if(keys===void 0)keys=[];if(values===void 0)values=[];if(presort===void 0)presort=false;if(this._size!==0)throw new Error("bulk-load: tree is not empty");var size=keys.length;if(presort)sort(keys,values,0,size-1,this._compare);this._root=loadRecursive(null,keys,values,0,size);this._size=size;return this},SplayTree.prototype.min=function min(){var node=this.minNode(this._root);if(node)return node.key;else return null},SplayTree.prototype.max=function max(){var node=this.maxNode(this._root);if(node)return node.key;else return null},SplayTree.prototype.isEmpty=function isEmpty(){return this._root===null},prototypeAccessors.size.get=function(){return this._size},SplayTree.createTree=function createTree(keys,values,comparator,presort,noDuplicates){return new SplayTree(comparator,noDuplicates).load(keys,values,presort)},Object.defineProperties(SplayTree.prototype,prototypeAccessors);var NORMAL=0,NON_CONTRIBUTING=1,SAME_TRANSITION=2,DIFFERENT_TRANSITION=3,INTERSECTION=0,UNION=1,DIFFERENCE=2,XOR=3;function computeFields(event,prev,operation){if(prev===null){event.inOut=false;event.otherInOut=true}else{if(event.isSubject===prev.isSubject){event.inOut=!prev.inOut;event.otherInOut=prev.otherInOut}else{event.inOut=!prev.otherInOut;event.otherInOut=prev.isVertical()?!prev.inOut:prev.inOut}if(prev)event.prevInResult=!inResult(prev,operation)||prev.isVertical()?prev.prevInResult:prev}var isInResult=inResult(event,operation);if(isInResult)event.resultTransition=determineResultTransition(event,operation);else event.resultTransition=0}function inResult(event,operation){switch(event.type){case NORMAL:switch(operation){case INTERSECTION:return!event.otherInOut;case UNION:return event.otherInOut;case DIFFERENCE:return event.isSubject&&event.otherInOut||!event.isSubject&&!event.otherInOut;case XOR:return true}break;case SAME_TRANSITION:return operation===INTERSECTION||operation===UNION;case DIFFERENT_TRANSITION:return operation===DIFFERENCE;case NON_CONTRIBUTING:return false}return false}function determineResultTransition(event,operation){var thisIn=!event.inOut;var thatIn=!event.otherInOut;var isIn;switch(operation){case INTERSECTION:isIn=thisIn&&thatIn;break;case UNION:isIn=thisIn||thatIn;break;case XOR:isIn=thisIn^thatIn;break;case DIFFERENCE:if(event.isSubject)isIn=thisIn&&!thatIn;else isIn=thatIn&&!thisIn;break}return isIn?+1:-1}var SweepEvent=function SweepEvent(point,left,otherEvent,isSubject,edgeType){this.left=left;this.point=point;this.otherEvent=otherEvent;this.isSubject=isSubject;this.type=edgeType||NORMAL;this.inOut=false;this.otherInOut=false;this.prevInResult=null;this.resultTransition=0;this.otherPos=-1;this.outputContourId=-1;this.isExteriorRing=true},prototypeAccessors$1={inResult:{configurable:true}};function equals(p1,p2){if(p1[0]===p2[0])if(p1[1]===p2[1])return true;else return false;return false}SweepEvent.prototype.isBelow=function isBelow(p){var p0=this.point,p1=this.otherEvent.point;return this.left?(p0[0]-p[0])*(p1[1]-p[1])-(p1[0]-p[0])*(p0[1]-p[1])>0:(p1[0]-p[0])*(p0[1]-p[1])-(p0[0]-p[0])*(p1[1]-p[1])>0},SweepEvent.prototype.isAbove=function isAbove(p){return!this.isBelow(p)},SweepEvent.prototype.isVertical=function isVertical(){return this.point[0]===this.otherEvent.point[0]},prototypeAccessors$1.inResult.get=function(){return this.resultTransition!==0},SweepEvent.prototype.clone=function clone(){var copy=new SweepEvent(this.point,this.left,this.otherEvent,this.isSubject,this.type);copy.contourId=this.contourId;copy.resultTransition=this.resultTransition;copy.prevInResult=this.prevInResult;copy.isExteriorRing=this.isExteriorRing;copy.inOut=this.inOut;copy.otherInOut=this.otherInOut;return copy},Object.defineProperties(SweepEvent.prototype,prototypeAccessors$1);var epsilon=11102230246251565e-32,splitter=134217729,resulterrbound=(3+8*epsilon)*epsilon;function sum(elen,e,flen,f,h){var Q,Qnew,hh,bvirt;var enow=e[0];var fnow=f[0];var eindex=0;var findex=0;if(fnow>enow===fnow>-enow){Q=enow;enow=e[++eindex]}else{Q=fnow;fnow=f[++findex]}var hindex=0;if(eindex<elen&&findex<flen){if(fnow>enow===fnow>-enow){Qnew=enow+Q;hh=Q-(Qnew-enow);enow=e[++eindex]}else{Qnew=fnow+Q;hh=Q-(Qnew-fnow);fnow=f[++findex]}Q=Qnew;if(hh!==0)h[hindex++]=hh;while(eindex<elen&&findex<flen){if(fnow>enow===fnow>-enow){Qnew=Q+enow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(enow-bvirt);enow=e[++eindex]}else{Qnew=Q+fnow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(fnow-bvirt);fnow=f[++findex]}Q=Qnew;if(hh!==0)h[hindex++]=hh}}while(eindex<elen){Qnew=Q+enow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(enow-bvirt);enow=e[++eindex];Q=Qnew;if(hh!==0)h[hindex++]=hh}while(findex<flen){Qnew=Q+fnow;bvirt=Qnew-Q;hh=Q-(Qnew-bvirt)+(fnow-bvirt);fnow=f[++findex];Q=Qnew;if(hh!==0)h[hindex++]=hh}if(Q!==0||hindex===0)h[hindex++]=Q;return hindex}function estimate(elen,e){var Q=e[0];for(var i=1;i<elen;i++)Q+=e[i];return Q}function vec(n){return commonjsGlobal.Float64Array?new Float64Array(n):new Array(n)}var ccwerrboundA=(3+16*epsilon)*epsilon,ccwerrboundB=(2+12*epsilon)*epsilon,ccwerrboundC=(9+64*epsilon)*epsilon*epsilon,B=vec(4),C1=vec(8),C2=vec(12),D=vec(16),u=vec(4);function orient2dadapt(ax,ay,bx,by,cx,cy,detsum){var acxtail,acytail,bcxtail,bcytail;var bvirt,c,ahi,alo,bhi,blo,_i,_j,_0,s1,s0,t1,t0,u3;var acx=ax-cx;var bcx=bx-cx;var acy=ay-cy;var bcy=by-cy;s1=acx*bcy;c=splitter*acx;ahi=c-(c-acx);alo=acx-ahi;c=splitter*bcy;bhi=c-(c-bcy);blo=bcy-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acy*bcx;c=splitter*acy;ahi=c-(c-acy);alo=acy-ahi;c=splitter*bcx;bhi=c-(c-bcx);blo=bcx-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;B[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;B[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;B[2]=_j-(u3-bvirt)+(_i-bvirt);B[3]=u3;var det=estimate(4,B);var errbound=ccwerrboundB*detsum;if(det>=errbound||-det>=errbound)return det;bvirt=ax-acx;acxtail=ax-(acx+bvirt)+(bvirt-cx);bvirt=bx-bcx;bcxtail=bx-(bcx+bvirt)+(bvirt-cx);bvirt=ay-acy;acytail=ay-(acy+bvirt)+(bvirt-cy);bvirt=by-bcy;bcytail=by-(bcy+bvirt)+(bvirt-cy);if(acxtail===0&&acytail===0&&bcxtail===0&&bcytail===0)return det;errbound=ccwerrboundC*detsum+resulterrbound*Math.abs(det);det+=acx*bcytail+bcy*acxtail-(acy*bcxtail+bcx*acytail);if(det>=errbound||-det>=errbound)return det;s1=acxtail*bcy;c=splitter*acxtail;ahi=c-(c-acxtail);alo=acxtail-ahi;c=splitter*bcy;bhi=c-(c-bcy);blo=bcy-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acytail*bcx;c=splitter*acytail;ahi=c-(c-acytail);alo=acytail-ahi;c=splitter*bcx;bhi=c-(c-bcx);blo=bcx-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;u[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;u[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;u[2]=_j-(u3-bvirt)+(_i-bvirt);u[3]=u3;var C1len=sum(4,B,4,u,C1);s1=acx*bcytail;c=splitter*acx;ahi=c-(c-acx);alo=acx-ahi;c=splitter*bcytail;bhi=c-(c-bcytail);blo=bcytail-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acy*bcxtail;c=splitter*acy;ahi=c-(c-acy);alo=acy-ahi;c=splitter*bcxtail;bhi=c-(c-bcxtail);blo=bcxtail-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;u[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;u[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;u[2]=_j-(u3-bvirt)+(_i-bvirt);u[3]=u3;var C2len=sum(C1len,C1,4,u,C2);s1=acxtail*bcytail;c=splitter*acxtail;ahi=c-(c-acxtail);alo=acxtail-ahi;c=splitter*bcytail;bhi=c-(c-bcytail);blo=bcytail-bhi;s0=alo*blo-(s1-ahi*bhi-alo*bhi-ahi*blo);t1=acytail*bcxtail;c=splitter*acytail;ahi=c-(c-acytail);alo=acytail-ahi;c=splitter*bcxtail;bhi=c-(c-bcxtail);blo=bcxtail-bhi;t0=alo*blo-(t1-ahi*bhi-alo*bhi-ahi*blo);_i=s0-t0;bvirt=s0-_i;u[0]=s0-(_i+bvirt)+(bvirt-t0);_j=s1+_i;bvirt=_j-s1;_0=s1-(_j-bvirt)+(_i-bvirt);_i=_0-t1;bvirt=_0-_i;u[1]=_0-(_i+bvirt)+(bvirt-t1);u3=_j+_i;bvirt=u3-_j;u[2]=_j-(u3-bvirt)+(_i-bvirt);u[3]=u3;var Dlen=sum(C2len,C2,4,u,D);return D[Dlen-1]}function orient2d(ax,ay,bx,by,cx,cy){var detleft=(ay-cy)*(bx-cx);var detright=(ax-cx)*(by-cy);var det=detleft-detright;if(detleft===0||detright===0||detleft>0!==detright>0)return det;var detsum=Math.abs(detleft+detright);if(Math.abs(det)>=ccwerrboundA*detsum)return det;return-orient2dadapt(ax,ay,bx,by,cx,cy,detsum)}function signedArea(p0,p1,p2){var res=orient2d(p0[0],p0[1],p1[0],p1[1],p2[0],p2[1]);if(res>0)return-1;if(res<0)return 1;return 0}function compareEvents(e1,e2){var p1=e1.point;var p2=e2.point;if(p1[0]>p2[0])return 1;if(p1[0]<p2[0])return-1;if(p1[1]!==p2[1])return p1[1]>p2[1]?1:-1;return specialCases(e1,e2,p1)}function specialCases(e1,e2,p1,p2){if(e1.left!==e2.left)return e1.left?1:-1;if(signedArea(p1,e1.otherEvent.point,e2.otherEvent.point)!==0)return!e1.isBelow(e2.otherEvent.point)?1:-1;return!e1.isSubject&&e2.isSubject?1:-1}function divideSegment(se,p,queue){var r=new SweepEvent(p,false,se,se.isSubject);var l=new SweepEvent(p,true,se.otherEvent,se.isSubject);if(equals(se.point,se.otherEvent.point))console.warn("what is that, a collapsed segment?",se);r.contourId=l.contourId=se.contourId;if(compareEvents(l,se.otherEvent)>0){se.otherEvent.left=true;l.left=false}se.otherEvent.otherEvent=l;se.otherEvent=r;queue.push(l);queue.push(r);return queue}function crossProduct(a,b){return a[0]*b[1]-a[1]*b[0]}function dotProduct(a,b){return a[0]*b[0]+a[1]*b[1]}function intersection(a1,a2,b1,b2,noEndpointTouch){var va=[a2[0]-a1[0],a2[1]-a1[1]];var vb=[b2[0]-b1[0],b2[1]-b1[1]];function toPoint(p,s,d){return[p[0]+s*d[0],p[1]+s*d[1]]}var e=[b1[0]-a1[0],b1[1]-a1[1]];var kross=crossProduct(va,vb);var sqrKross=kross*kross;var sqrLenA=dotProduct(va,va);if(sqrKross>0){var s=crossProduct(e,vb)/kross;if(s<0||s>1)return null;var t=crossProduct(e,va)/kross;if(t<0||t>1)return null;if(s===0||s===1)return noEndpointTouch?null:[toPoint(a1,s,va)];if(t===0||t===1)return noEndpointTouch?null:[toPoint(b1,t,vb)];return[toPoint(a1,s,va)]}kross=crossProduct(e,va);sqrKross=kross*kross;if(sqrKross>0)return null;var sa=dotProduct(va,e)/sqrLenA;var sb=sa+dotProduct(va,vb)/sqrLenA;var smin=Math.min(sa,sb);var smax=Math.max(sa,sb);if(smin<=1&&smax>=0){if(smin===1)return noEndpointTouch?null:[toPoint(a1,smin>0?smin:0,va)];if(smax===0)return noEndpointTouch?null:[toPoint(a1,smax<1?smax:1,va)];if(noEndpointTouch&&smin===0&&smax===1)return null;return[toPoint(a1,smin>0?smin:0,va),toPoint(a1,smax<1?smax:1,va)]}return null}function possibleIntersection(se1,se2,queue){var inter=intersection(se1.point,se1.otherEvent.point,se2.point,se2.otherEvent.point);var nintersections=inter?inter.length:0;if(nintersections===0)return 0;if(nintersections===1&&(equals(se1.point,se2.point)||equals(se1.otherEvent.point,se2.otherEvent.point)))return 0;if(nintersections===2&&se1.isSubject===se2.isSubject)return 0;if(nintersections===1){if(!equals(se1.point,inter[0])&&!equals(se1.otherEvent.point,inter[0]))divideSegment(se1,inter[0],queue);if(!equals(se2.point,inter[0])&&!equals(se2.otherEvent.point,inter[0]))divideSegment(se2,inter[0],queue);return 1}var events=[];var leftCoincide=false;var rightCoincide=false;if(equals(se1.point,se2.point))leftCoincide=true;else if(compareEvents(se1,se2)===1)events.push(se2,se1);else events.push(se1,se2);if(equals(se1.otherEvent.point,se2.otherEvent.point))rightCoincide=true;else if(compareEvents(se1.otherEvent,se2.otherEvent)===1)events.push(se2.otherEvent,se1.otherEvent);else events.push(se1.otherEvent,se2.otherEvent);if(leftCoincide&&rightCoincide||leftCoincide){se2.type=NON_CONTRIBUTING;se1.type=se2.inOut===se1.inOut?SAME_TRANSITION:DIFFERENT_TRANSITION;if(leftCoincide&&!rightCoincide)divideSegment(events[1].otherEvent,events[0].point,queue);return 2}if(rightCoincide){divideSegment(events[0],events[1].point,queue);return 3}if(events[0]!==events[3].otherEvent){divideSegment(events[0],events[1].point,queue);divideSegment(events[1],events[2].point,queue);return 3}divideSegment(events[0],events[1].point,queue);divideSegment(events[3].otherEvent,events[2].point,queue);return 3}function compareSegments(le1,le2){if(le1===le2)return 0;if(signedArea(le1.point,le1.otherEvent.point,le2.point)!==0||signedArea(le1.point,le1.otherEvent.point,le2.otherEvent.point)!==0){if(equals(le1.point,le2.point))return le1.isBelow(le2.otherEvent.point)?-1:1;if(le1.point[0]===le2.point[0])return le1.point[1]<le2.point[1]?-1:1;if(compareEvents(le1,le2)===1)return le2.isAbove(le1.point)?-1:1;return le1.isBelow(le2.point)?-1:1}if(le1.isSubject===le2.isSubject){var p1=le1.point,p2=le2.point;if(p1[0]===p2[0]&&p1[1]===p2[1]){p1=le1.otherEvent.point;p2=le2.otherEvent.point;if(p1[0]===p2[0]&&p1[1]===p2[1])return 0;else return le1.contourId>le2.contourId?1:-1}}else return le1.isSubject?-1:1;return compareEvents(le1,le2)===1?1:-1}function subdivide(eventQueue,subject,clipping,sbbox,cbbox,operation){var sweepLine=new SplayTree(compareSegments);var sortedEvents=[];var rightbound=Math.min(sbbox[2],cbbox[2]);var prev,next,begin;while(eventQueue.length!==0){var event=eventQueue.pop();sortedEvents.push(event);if(operation===INTERSECTION&&event.point[0]>rightbound||operation===DIFFERENCE&&event.point[0]>sbbox[2])break;if(event.left){next=prev=sweepLine.insert(event);begin=sweepLine.minNode();if(prev!==begin)prev=sweepLine.prev(prev);else prev=null;next=sweepLine.next(next);var prevEvent=prev?prev.key:null;var prevprevEvent=void 0;computeFields(event,prevEvent,operation);if(next)if(possibleIntersection(event,next.key,eventQueue)===2){computeFields(event,prevEvent,operation);computeFields(event,next.key,operation)}if(prev)if(possibleIntersection(prev.key,event,eventQueue)===2){var prevprev=prev;if(prevprev!==begin)prevprev=sweepLine.prev(prevprev);else prevprev=null;prevprevEvent=prevprev?prevprev.key:null;computeFields(prevEvent,prevprevEvent,operation);computeFields(event,prevEvent,operation)}}else{event=event.otherEvent;next=prev=sweepLine.find(event);if(prev&&next){if(prev!==begin)prev=sweepLine.prev(prev);else prev=null;next=sweepLine.next(next);sweepLine.remove(event);if(next&&prev)possibleIntersection(prev.key,next.key,eventQueue)}}}return sortedEvents}var Contour=function Contour(){this.points=[];this.holeIds=[];this.holeOf=null;this.depth=null};function orderEvents(sortedEvents){var event,i,len,tmp;var resultEvents=[];for(i=0,len=sortedEvents.length;i<len;i++){event=sortedEvents[i];if(event.left&&event.inResult||!event.left&&event.otherEvent.inResult)resultEvents.push(event)}var sorted=false;while(!sorted){sorted=true;for(i=0,len=resultEvents.length;i<len;i++)if(i+1<len&&compareEvents(resultEvents[i],resultEvents[i+1])===1){tmp=resultEvents[i];resultEvents[i]=resultEvents[i+1];resultEvents[i+1]=tmp;sorted=false}}for(i=0,len=resultEvents.length;i<len;i++){event=resultEvents[i];event.otherPos=i}for(i=0,len=resultEvents.length;i<len;i++){event=resultEvents[i];if(!event.left){tmp=event.otherPos;event.otherPos=event.otherEvent.otherPos;event.otherEvent.otherPos=tmp}}return resultEvents}function nextPos(pos,resultEvents,processed,origPos){var newPos=pos+1,p=resultEvents[pos].point,p1;var length=resultEvents.length;if(newPos<length)p1=resultEvents[newPos].point;while(newPos<length&&p1[0]===p[0]&&p1[1]===p[1]){if(!processed[newPos])return newPos;else newPos++;p1=resultEvents[newPos].point}newPos=pos-1;while(processed[newPos]&&newPos>origPos)newPos--;return newPos}function initializeContourFromContext(event,contours,contourId){var contour=new Contour;if(event.prevInResult!=null){var prevInResult=event.prevInResult;var lowerContourId=prevInResult.outputContourId;var lowerResultTransition=prevInResult.resultTransition;if(lowerResultTransition>0){var lowerContour=contours[lowerContourId];if(lowerContour.holeOf!=null){var parentContourId=lowerContour.holeOf;contours[parentContourId].holeIds.push(contourId);contour.holeOf=parentContourId;contour.depth=contours[lowerContourId].depth}else{contours[lowerContourId].holeIds.push(contourId);contour.holeOf=lowerContourId;contour.depth=contours[lowerContourId].depth+1}}else{contour.holeOf=null;contour.depth=contours[lowerContourId].depth}}else{contour.holeOf=null;contour.depth=0}return contour}function connectEdges(sortedEvents){var i,len;var resultEvents=orderEvents(sortedEvents);var processed={};var contours=[];var loop=function(){if(processed[i])return;var contourId=contours.length;var contour=initializeContourFromContext(resultEvents[i],contours,contourId);var markAsProcessed=function(pos){processed[pos]=true;resultEvents[pos].outputContourId=contourId};var pos=i;var origPos=i;var initial=resultEvents[i].point;contour.points.push(initial);while(true){markAsProcessed(pos);pos=resultEvents[pos].otherPos;markAsProcessed(pos);contour.points.push(resultEvents[pos].point);pos=nextPos(pos,resultEvents,processed,origPos);if(pos==origPos)break}contours.push(contour)};for(i=0,len=resultEvents.length;i<len;i++)loop();return contours}Contour.prototype.isExterior=function isExterior(){return this.holeOf==null};var tinyqueue=TinyQueue,default_1=TinyQueue;function TinyQueue(data,compare){if(!(this instanceof TinyQueue))return new TinyQueue(data,compare);this.data=data||[];this.length=this.data.length;this.compare=compare||defaultCompare;if(this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}function defaultCompare(a,b){return a<b?-1:a>b?1:0}TinyQueue.prototype={push:function(item){this.data.push(item);this.length++;this._up(this.length-1)},pop:function(){if(this.length===0)return undefined;var top=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this._down(0)}this.data.pop();return top},peek:function(){return this.data[0]},_up:function(pos){var data=this.data;var compare=this.compare;var item=data[pos];while(pos>0){var parent=pos-1>>1;var current=data[parent];if(compare(item,current)>=0)break;data[pos]=current;pos=parent}data[pos]=item},_down:function(pos){var data=this.data;var compare=this.compare;var halfLength=this.length>>1;var item=data[pos];while(pos<halfLength){var left=(pos<<1)+1;var right=left+1;var best=data[left];if(right<this.length&&compare(data[right],best)<0){left=right;best=data[right]}if(compare(best,item)>=0)break;data[pos]=best;pos=left}data[pos]=item}},tinyqueue.default=default_1;var max=Math.max,min=Math.min,contourId=0;function processPolygon(contourOrHole,isSubject,depth,Q,bbox,isExteriorRing){var i,len,s1,s2,e1,e2;for(i=0,len=contourOrHole.length-1;i<len;i++){s1=contourOrHole[i];s2=contourOrHole[i+1];e1=new SweepEvent(s1,false,undefined,isSubject);e2=new SweepEvent(s2,false,e1,isSubject);e1.otherEvent=e2;if(s1[0]===s2[0]&&s1[1]===s2[1])continue;e1.contourId=e2.contourId=depth;if(!isExteriorRing){e1.isExteriorRing=false;e2.isExteriorRing=false}if(compareEvents(e1,e2)>0)e2.left=true;else e1.left=true;var x=s1[0],y=s1[1];bbox[0]=min(bbox[0],x);bbox[1]=min(bbox[1],y);bbox[2]=max(bbox[2],x);bbox[3]=max(bbox[3],y);Q.push(e1);Q.push(e2)}}function fillQueue(subject,clipping,sbbox,cbbox,operation){var eventQueue=new tinyqueue(null,compareEvents);var polygonSet,isExteriorRing,i,ii,j,jj;for(i=0,ii=subject.length;i<ii;i++){polygonSet=subject[i];for(j=0,jj=polygonSet.length;j<jj;j++){isExteriorRing=j===0;if(isExteriorRing)contourId++;processPolygon(polygonSet[j],true,contourId,eventQueue,sbbox,isExteriorRing)}}for(i=0,ii=clipping.length;i<ii;i++){polygonSet=clipping[i];for(j=0,jj=polygonSet.length;j<jj;j++){isExteriorRing=j===0;if(operation===DIFFERENCE)isExteriorRing=false;if(isExteriorRing)contourId++;processPolygon(polygonSet[j],false,contourId,eventQueue,cbbox,isExteriorRing)}}return eventQueue}var EMPTY=[];function trivialOperation(subject,clipping,operation){var result=null;if(subject.length*clipping.length===0)if(operation===INTERSECTION)result=EMPTY;else if(operation===DIFFERENCE)result=subject;else if(operation===UNION||operation===XOR)result=subject.length===0?clipping:subject;return result}function compareBBoxes(subject,clipping,sbbox,cbbox,operation){var result=null;if(sbbox[0]>cbbox[2]||cbbox[0]>sbbox[2]||sbbox[1]>cbbox[3]||cbbox[1]>sbbox[3])if(operation===INTERSECTION)result=EMPTY;else if(operation===DIFFERENCE)result=subject;else if(operation===UNION||operation===XOR)result=subject.concat(clipping);return result}function boolean(subject,clipping,operation){if(typeof subject[0][0][0]==="number")subject=[subject];if(typeof clipping[0][0][0]==="number")clipping=[clipping];var trivial=trivialOperation(subject,clipping,operation);if(trivial)return trivial===EMPTY?null:trivial;var sbbox=[Infinity,Infinity,-Infinity,-Infinity];var cbbox=[Infinity,Infinity,-Infinity,-Infinity];var eventQueue=fillQueue(subject,clipping,sbbox,cbbox,operation);trivial=compareBBoxes(subject,clipping,sbbox,cbbox,operation);if(trivial)return trivial===EMPTY?null:trivial;var sortedEvents=subdivide(eventQueue,subject,clipping,sbbox,cbbox,operation);var contours=connectEdges(sortedEvents);var polygons=[];for(var i=0;i<contours.length;i++){var contour=contours[i];if(contour.isExterior()){var rings=[contour.points];for(var j=0;j<contour.holeIds.length;j++){var holeId=contour.holeIds[j];rings.push(contours[holeId].points)}polygons.push(rings)}}return polygons}function union(subject,clipping){return boolean(subject,clipping,UNION)}function diff(subject,clipping){return boolean(subject,clipping,DIFFERENCE)}function xor(subject,clipping){return boolean(subject,clipping,XOR)}function intersection$1(subject,clipping){return boolean(subject,clipping,INTERSECTION)}var operations={UNION:UNION,DIFFERENCE:DIFFERENCE,INTERSECTION:INTERSECTION,XOR:XOR};exports.diff=diff,exports.intersection=intersection$1,exports.operations=operations,exports.union=union,exports.xor=xor,Object.defineProperty(exports,"__esModule",{value:true})}(exports)})),zoomRange=[2,26],Const={deg2rad:Math.PI/180,rad2deg:180/Math.PI,earthRadius:6378137};function isClockwise(poly){for(var sum=0,len=poly.length,i=0;i<len-1;i++){var next,cur=poly[i];sum+=((next=poly[i+1])[0]-cur[0])*(next[1]+cur[1])}return poly[len-1][0]===poly[0][0]&&poly[len-1][1]===poly[0][1]||(cur=poly[len-1],sum+=((next=poly[0])[0]-cur[0])*(next[1]+cur[1])),0<sum}function extend(dest){for(var _i=1;_i<arguments.length;_i++)_i-1,0;for(var src,target,sources=Array.prototype.slice.call(arguments,1),j=0,len=sources.length;j<len;j+=1)for(var key in src=sources[j]||{})src.hasOwnProperty(key)&&("function"==typeof(target=src[key])&&dest.prototype?dest.prototype[key]=target:dest[key]=target)}var freeModule=function(){function GeometryUtilCls(opts){this.CLASS_NAME="AMap.GeometryUtil",this._opts=assign({onSegmentTolerance:5,crs:"EPSG3857",maxZoom:zoomRange[1]},opts),this.setCrs(this._opts.crs)}return GeometryUtilCls.prototype.clone=function(opts){return new GeometryUtilCls(assign({},this._opts,opts))},GeometryUtilCls.prototype.isPoint=function(a){return a&&(a instanceof LngLat$1||Util.isArray(a)&&!isNaN(a[0]))},GeometryUtilCls.prototype.normalizePoint=function(a){return a},GeometryUtilCls.prototype.normalizeLine=function(p){for(var items=[],i=0,len=p.length;i<len;i++)items.push(this.normalizePoint(p[i]));return items},GeometryUtilCls.prototype.normalizeMultiLines=function(p){for(var items=[],i=0,len=(p=Util.isArray(p)&&this.isPoint(p[0])?[p]:p).length;i<len;i++)items.push(this.normalizeLine(p[i]));return items},GeometryUtilCls.prototype.setCrs=function(pro){pro=pro&&pro.project&&pro.unproject?pro:"plane"===pro?{normalizePoint:function(a){return a&&a.x&&a.y?[a.x,a.y]:a},distance:function(a,b){var dX=a[0]-b[0],a=a[1]-b[1];return Math.sqrt(dX*dX+a*a)},project:function(a){return a},unproject:function(a){return a},ringArea:function(a){for(var e0=[0,0],e1=[0,0],area=0,first=a[0],l=a.length,i=2;i<l;i++){var p=a[i-1],c=a[i];e0[0]=first[0]-c[0],e0[1]=first[1]-c[1],e1[0]=first[0]-p[0],e1[1]=first[1]-p[1],area+=e0[0]*e1[1]-e0[1]*e1[0]}return area/2}}:function(pro){var crs=function(pro){switch(pro){case"EPSG3857":return ProjectionManager.getProjection("EPSG:3857");case"EPSG4326":return ProjectionManager.getProjection("EPSG:4326")}return ProjectionManager.getProjection("EPSG3857")}(pro);return{project:function(a){return Util.isArray(a)&&(a=new LngLat$1(a[0],a[1])),crs.project(a.lng,a.lat)},unproject:function(a){return Util.isArray(a)&&(a=new Pixel(a[0],a[1])),crs.unproject(a.x,a.y)},normalizePoint:function(a){return Util.parseLngLatData(a)},distance:function(p1,p2){if(p2=this.normalizePoint(p2),Util.isArray(p2))return this.distanceToLine(p1,p2);p1=this.normalizePoint(p1);var deg2rad=Const.deg2rad,cos=Math.cos,lat1=p1.lat*deg2rad,p1=p1.lng*deg2rad,lat2=p2.lat*deg2rad,p2=p2.lng*deg2rad,deg2rad=2*Const.earthRadius,p2=p2-p1,p1=(1-cos(lat2-lat1)+(1-cos(p2))*cos(lat1)*cos(lat2))/2;return deg2rad*Math.asin(Math.sqrt(p1))},ringArea:function(ring){ring=this.normalizeLine(ring);var metrePerDegree=Const.earthRadius*Const.deg2rad,sum=0,arr=ring,len=arr.length;if(len<3)return 0;for(var i=0;i<len-1;i+=1){var m=arr[i],n=arr[i+1],x1=m.lng*metrePerDegree*Math.cos(m.lat*Const.deg2rad),m=m.lat*metrePerDegree,x2=n.lng*metrePerDegree*Math.cos(n.lat*Const.deg2rad);sum+=x1*(n.lat*metrePerDegree)-x2*m}var ring=arr[i],p=arr[0],xn=ring.lng*metrePerDegree*Math.cos(ring.lat*Const.deg2rad),ring=ring.lat*metrePerDegree,xf=p.lng*metrePerDegree*Math.cos(p.lat*Const.deg2rad);return sum+=xn*(p.lat*metrePerDegree)-xf*ring,.5*Math.abs(sum)},sphericalCalotteArea:function(cr){var r=Const.earthRadius,cr=r-r*Math.cos(cr/r);return 2*Math.PI*r*cr}}}(pro,this._opts.maxZoom);assign(this,pro)},GeometryUtilCls.prototype.distance=function(p1,p2){throw new Error("distance Not implemented!")},GeometryUtilCls.prototype._lineToRawCoords=function(line,makeClockwise){line=this.normalizeLine(line);for(var items=[],i=0,len=(line=this.isPoint(line[0])?line:line[0]).length;i<len;i++)items.push(this.project(line[i]));return!0===makeClockwise?items=this.makesureClockwise(items):!1===makeClockwise&&(items=this.makesureClockwise(items)).reverse(),items},GeometryUtilCls.prototype._rawCoordsToLine=function(items){for(var results=[],i=0,len=items.length;i<len;i++)results.push(this.unproject(items[i]));return results},GeometryUtilCls.prototype.closestOnSegment=function(a,p1,p2){a=Coordinate_closestOnSegment(this.project(a),this._lineToRawCoords([p1,p2]));return this.unproject(a)},GeometryUtilCls.prototype.closestOnLine=function(a,line){for(var p,minDist=1/0,i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++){var closest=this.closestOnSegment(a,line[i],line[i+1]),dist=this.distance(a,closest);dist<minDist&&(minDist=dist,p=closest)}return p},GeometryUtilCls.prototype.distanceToSegment=function(a,p1,p2){return this.distanceToLine(a,[p1,p2])},GeometryUtilCls.prototype.distanceToLine=function(a,line){line=this.normalizeLine(line);for(var dist2=1/0,i=0,len=(line=this.isPoint(line[0])?line:line[0]).length;i<len-1;i++)var closest=this.closestOnSegment(a,line[i],line[i+1]),dist2=Math.min(dist2,this.distance(a,closest));return dist2},GeometryUtilCls.prototype.distanceToPolygon=function(a,polygon){return this.isPointInRing(a,polygon)?0:this.distanceToLine(a,polygon)},GeometryUtilCls.prototype.isPointOnSegment=function(p,p1,p2,tolerance){return(!tolerance&&0!==tolerance||tolerance<0)&&(tolerance=this._opts.onSegmentTolerance),this.distanceToSegment(p,p1,p2)<=tolerance},GeometryUtilCls.prototype.isPointOnLine=function(a,line,tolerance){for(var i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++)if(this.isPointOnSegment(a,line[i],line[i+1],tolerance))return!0;return!1},GeometryUtilCls.prototype.isPointOnRing=function(a,ring,tolerance){for(var i=0,len=(ring=this.normalizeLine(ring)).length;i<len;i++)if(this.isPointOnSegment(a,ring[i],ring[i===len-1?0:i+1],tolerance))return!0;return!1},GeometryUtilCls.prototype.isPointOnPolygon=function(a,rings,tolerance){for(var i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len;i++)if(this.isPointOnRing(a,rings[i],tolerance))return!0;return!1},GeometryUtilCls.prototype.makesureClockwise=function(coords){return isClockwise(coords)||(coords=[].concat(coords)).reverse(),coords},GeometryUtilCls.prototype.makesureAntiClockwise=function(coords){return isClockwise(coords)&&(coords=[].concat(coords)).reverse(),coords},GeometryUtilCls.prototype.pointInRing=function(pt,polys,ignoreBoundary){for(var insidePoly=!1,i=0;i<polys.length&&!insidePoly;i++)if(inRing(pt,polys[i][0],ignoreBoundary)){for(var inHole=!1,k=1;k<polys[i].length&&!inHole;)inRing(pt,polys[i][k],!ignoreBoundary)&&(inHole=!0),k++;inHole||(insidePoly=!0)}function inRing(pt,ring,ignoreBoundary){for(var isInside=!1,i=0,j=(ring=ring[0][0]===ring[ring.length-1][0]&&ring[0][1]===ring[ring.length-1][1]?ring.slice(0,ring.length-1):ring).length-1;i<ring.length;j=i++){var xi=ring[i][0],yi=ring[i][1],xj=ring[j][0],yj=ring[j][1];if(pt[1]*(xi-xj)+yi*(xj-pt[0])+yj*(pt[0]-xi)==0&&(xi-pt[0])*(xj-pt[0])<=0&&(yi-pt[1])*(yj-pt[1])<=0)return!ignoreBoundary;yi>pt[1]!=yj>pt[1]&&pt[0]<(xj-xi)*(pt[1]-yi)/(yj-yi)+xi&&(isInside=!isInside)}return isInside}return insidePoly},GeometryUtilCls.prototype.isPointInBbox=function(pt,bbox){for(var minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,i=0;i<bbox.length;i++)var b=bbox[i],minX=Math.min(minX,b[0]),maxX=Math.max(maxX,b[0]),minY=Math.min(minY,b[1]),maxY=Math.max(maxY,b[1]);return pt[0]>minX&&pt[0]<maxX&&pt[1]>minY&&pt[1]<maxY},GeometryUtilCls.prototype.isPointInRing=function(a,ring){ring=this.normalizeLine(ring);ring=this._lineToRawCoords(ring,!0);return Coordinate_containsCoordinate(this.project(a),ring,!1)},GeometryUtilCls.prototype.isRingInRing=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(!this.isPointInRing(r1[i],r2))return!1;return!0},GeometryUtilCls.prototype.isRingInRingByOutsea=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(this.isPointInRing(r1[i],r2))return!0;for(i=0,len=r2.length;i<len;i++)if(this.isPointInRing(r2[i],r1))return!0;return!1},GeometryUtilCls.prototype.isRingInRingByMapbox=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(!this.isPointInRing(r1[i],r2))return!1;return!0},GeometryUtilCls.prototype.isRingInRingByMapboxB=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(this.isPointInRing(r1[i],r2))return!0;return!1},GeometryUtilCls.prototype.isPixelRingInRing=function(r1,r2){for(var i=0,len=r1.length;i<len;i++)if(Coordinate_containsCoordinate(r1[i],r2,!1))return!0;return!1},GeometryUtilCls.prototype.isPointInPolygon=function(a,rings){for(var containsCoordinate,i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len&&(containsCoordinate=this.isPointInRing(a,rings[i]),containsCoordinate=0<i?!containsCoordinate:containsCoordinate);i+=1);return Boolean(containsCoordinate)},GeometryUtilCls.prototype.isPointInPolygons=function(a,polys){for(var c=0;c<polys.length;c++){for(var rings=polys[c],containsCoordinate=void 0,i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len&&(containsCoordinate=this.isPointInRing(a,rings[i]),containsCoordinate=0<i?!containsCoordinate:containsCoordinate);i+=1);if(containsCoordinate)return!0}return!1},GeometryUtilCls.prototype.doesSegmentsIntersect=function(a1,a2,b1,b2){var pairs=this._lineToRawCoords([a1,a2,b1,b2]),result=(a1=pairs[0],a2=pairs[1],b1=pairs[2],!1),pairs=((b2=pairs[3])[0]-b1[0])*(a1[1]-b1[1])-(b2[1]-b1[1])*(a1[0]-b1[0]),ub_t=(a2[0]-a1[0])*(a1[1]-b1[1])-(a2[1]-a1[1])*(a1[0]-b1[0]),b2=(b2[1]-b1[1])*(a2[0]-a1[0])-(b2[0]-b1[0])*(a2[1]-a1[1]);return result=0!=b2&&(b1=ub_t/b2,0<=(a2=pairs/b2))&&a2<=1&&0<=b1&&b1<=1?!0:result},GeometryUtilCls.prototype.doesSegmentLineIntersect=function(p1,p2,line){for(var i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++)if(this.doesSegmentsIntersect(p1,p2,line[i],line[i+1]))return!0;return!1},GeometryUtilCls.prototype.doesSegmentRingIntersect=function(p1,p2,ring){for(var i=0,len=(ring=this.normalizeLine(ring)).length;i<len;i++)if(this.doesSegmentsIntersect(p1,p2,ring[i],ring[i===len-1?0:i+1]))return!0;return!1},GeometryUtilCls.prototype.doesSegmentPolygonIntersect=function(p1,p2,rings){for(var i=0,len=(rings=this.normalizeMultiLines(rings)).length;i<len;i++)if(this.doesSegmentRingIntersect(p1,p2,rings[i]))return!0;return!1},GeometryUtilCls.prototype.doesLineLineIntersect=function(l1,l2){for(var i=0,len=(l1=this.normalizeLine(l1)).length;i<len-1;i++)if(this.doesSegmentLineIntersect(l1[i],l1[i+1],l2))return!0;return!1},GeometryUtilCls.prototype.doesLineRingIntersect=function(l1,ring){for(var i=0,len=(l1=this.normalizeLine(l1)).length;i<len-1;i++)if(this.doesSegmentRingIntersect(l1[i],l1[i+1],ring))return!0;return!1},GeometryUtilCls.prototype.doesPolygonPolygonIntersect=function(polygon1,polygon2){return!!(this.doesRingRingIntersect(polygon2,polygon1)||this.isRingInRing(polygon1,polygon2)||this.isRingInRing(polygon2,polygon1))},GeometryUtilCls.prototype.doesRingRingIntersect=function(r1,r2){for(var i=0,len=(r1=this.normalizeLine(r1)).length;i<len;i++)if(this.doesSegmentRingIntersect(r1[i],r1[i===len-1?0:i+1],r2))return!0;return!1},GeometryUtilCls.prototype.along=function(path,distance){for(var dis=0,i=0;i<path.length-1;i+=1){var s,ppdis=this.distance(path[i],path[i+1]);if(!(ppdis+dis<distance))return[path[i][0]+(s=(distance-dis)/ppdis)*(path[i+1][0]-path[i][0]),path[i][1]+s*(path[i+1][1]-path[i][1]),i];dis+=ppdis}return null},GeometryUtilCls.prototype._clip=function(subjectPolygon,clipPolygon){for(var e,inside=function(p){return(cp2[0]-cp1[0])*(p[1]-cp1[1])>(cp2[1]-cp1[1])*(p[0]-cp1[0])},intersection=function(){var dc=[cp1[0]-cp2[0],cp1[1]-cp2[1]],dp=[s[0]-e[0],s[1]-e[1]],n1=cp1[0]*cp2[1]-cp1[1]*cp2[0],n2=s[0]*e[1]-s[1]*e[0],n3=1/(dc[0]*dp[1]-dc[1]*dp[0]);return[(n1*dp[0]-n2*dc[0])*n3,(n1*dp[1]-n2*dc[1])*n3]},outputList=subjectPolygon=this.makesureAntiClockwise(subjectPolygon),cp1=(clipPolygon=this.makesureClockwise(clipPolygon))[clipPolygon.length-1],j=0,jlen=clipPolygon.length;j<jlen;j++){for(var cp2=clipPolygon[j],inputList=outputList,outputList=[],s=inputList[inputList.length-1],i=0,len=inputList.length;i<len;i++)inside(e=inputList[i])?(inside(s)||outputList.push(intersection()),outputList.push(e)):inside(s)&&outputList.push(intersection()),s=e;cp1=cp2}return outputList},GeometryUtilCls.prototype.ringRingClip=function(r1,r2){r1=this._lineToRawCoords(r1),r2=this._lineToRawCoords(r2),isEqual(r1[0],r1[r1.length-1])||r1.push(r1[0].slice()),isEqual(r2[0],r2[r2.length-1])||r2.push(r2[0].slice());r1=martinez.intersection([r1],[r2]);return r1&&r1[0]&&r1[0][0]?this._rawCoordsToLine(r1[0][0]):[]},GeometryUtilCls.prototype.ringArea=function(r){throw new Error("distance Not implemented!")},GeometryUtilCls.prototype.distanceOfLine=function(line){for(var distance=0,i=0,len=(line=this.normalizeLine(line)).length;i<len-1;i++)distance+=this.distance(line[i],line[i+1]);return distance},GeometryUtilCls.prototype.isClockwise=function(line){return isClockwise(line=this._lineToRawCoords(line))},GeometryUtilCls.prototype.typePolygon=function(polygon){return isArray(polygon)&&isArray(polygon[0])?2===polygon[0][0].length||polygon[0][0]instanceof LngLat$1?"Polygon":2<polygon[0][0].length&&(2===polygon[0][0][0].length||polygon[0][0][0]instanceof LngLat$1)?"MultiPolygon":"never":"never"},GeometryUtilCls}(),objectProto$2=new freeModule({}),objectProto=new freeModule({}),GeometryUtil=(objectProto.setCrs("plane"),{distance:objectProto$2.distance.bind(objectProto$2),ringArea:objectProto$2.ringArea.bind(objectProto$2),isClockwise:objectProto$2.isClockwise.bind(objectProto$2),typePolygon:objectProto$2.typePolygon.bind(objectProto$2),makesureClockwise:objectProto$2.makesureClockwise.bind(objectProto$2),makesureAntiClockwise:objectProto$2.makesureAntiClockwise.bind(objectProto$2),distanceOfLine:objectProto$2.distanceOfLine.bind(objectProto$2),ringRingClip:objectProto$2.ringRingClip.bind(objectProto$2),doesSegmentsIntersect:objectProto$2.doesSegmentsIntersect.bind(objectProto$2),doesSegmentLineIntersect:objectProto$2.doesSegmentLineIntersect.bind(objectProto$2),doesSegmentRingIntersect:objectProto$2.doesSegmentRingIntersect.bind(objectProto$2),doesSegmentPolygonIntersect:objectProto$2.doesSegmentPolygonIntersect.bind(objectProto$2),doesLineLineIntersect:objectProto$2.doesLineLineIntersect.bind(objectProto$2),doesLineRingIntersect:objectProto$2.doesLineRingIntersect.bind(objectProto$2),doesRingRingIntersect:objectProto$2.doesRingRingIntersect.bind(objectProto$2),pointInRing:objectProto$2.pointInRing.bind(objectProto$2),isPointInRing:objectProto$2.isPointInRing.bind(objectProto$2),isPointInBbox:objectProto$2.isPointInBbox.bind(objectProto$2),isRingInRing:objectProto$2.isRingInRing.bind(objectProto$2),isPointInPolygon:objectProto$2.isPointInPolygon.bind(objectProto$2),isPointInPolygons:objectProto$2.isPointInPolygons.bind(objectProto$2),isPointOnSegment:objectProto$2.isPointOnSegment.bind(objectProto$2),isPointOnLine:objectProto$2.isPointOnLine.bind(objectProto$2),isPointOnRing:objectProto$2.isPointOnRing.bind(objectProto$2),isPointOnPolygon:objectProto$2.isPointOnPolygon.bind(objectProto$2),closestOnSegment:objectProto$2.closestOnSegment.bind(objectProto$2),closestOnLine:objectProto$2.closestOnLine.bind(objectProto$2),distanceToSegment:objectProto$2.distanceToSegment.bind(objectProto$2),distanceToLine:objectProto$2.distanceToLine.bind(objectProto$2)}),LngLat$1=(objectProto.distance.bind(objectProto),objectProto.ringArea.bind(objectProto),objectProto.isClockwise.bind(objectProto),objectProto.typePolygon.bind(objectProto),objectProto.makesureClockwise.bind(objectProto),objectProto.makesureAntiClockwise.bind(objectProto),objectProto.distanceOfLine.bind(objectProto),objectProto.ringRingClip.bind(objectProto),objectProto.doesSegmentsIntersect.bind(objectProto),objectProto.doesSegmentLineIntersect.bind(objectProto),objectProto.doesSegmentRingIntersect.bind(objectProto),objectProto.doesSegmentPolygonIntersect.bind(objectProto),objectProto.doesLineLineIntersect.bind(objectProto),objectProto.doesLineRingIntersect.bind(objectProto),objectProto.doesRingRingIntersect.bind(objectProto),objectProto.pointInRing.bind(objectProto),objectProto.isPointInRing.bind(objectProto),objectProto.isPointInBbox.bind(objectProto),objectProto.isRingInRing.bind(objectProto),objectProto.isPointInPolygon.bind(objectProto),objectProto.isPointInPolygons.bind(objectProto),objectProto.isPointOnSegment.bind(objectProto),objectProto.isPointOnLine.bind(objectProto),objectProto.isPointOnRing.bind(objectProto),objectProto.isPointOnPolygon.bind(objectProto),objectProto.closestOnSegment.bind(objectProto),objectProto.closestOnLine.bind(objectProto),objectProto.distanceToSegment.bind(objectProto),objectProto.distanceToLine.bind(objectProto),function(){function LngLat(lng,lat,noWrap){var obj;if(void 0===noWrap&&(noWrap=!1),this.className="AMap.LngLat",obj=lng,Array.isArray(obj)&&function(obj){obj=+obj;return"number"==typeof obj&&!isNaN(obj)}(obj[0])?(lng=parseFloat(lng[0]),lat=parseFloat(lng[1])):(lat=parseFloat(lat),lng=parseFloat(lng)),isNaN(lng)||isNaN(lat))throw Error("Invalid Object: LngLat("+lng+", "+lat+")");!0!==noWrap&&(lat=Math.max(Math.min(lat,90),-90),lng=(lng+180)%360+(lng<-180||180===lng?180:-180)),this._highLat=lat,this._highLng=lng,this.lng=Math.round(1e6*lng)/1e6,this.lat=Math.round(1e6*lat)/1e6,this.pos=ProjectionManager.getProjection("EPSG:3857").project(lng,lat)}return LngLat.from=function(point){return isLngLat(point)?new LngLat(point._highLng,point._highLat):new LngLat(point[0],point[1])},LngLat.prototype.setLng=function(lng){return this._highLng=lng,this.lng=Math.round(1e6*lng)/1e6,this},LngLat.prototype.setLat=function(lat){return this._highLat=lat,this.lat=Math.round(1e6*lat)/1e6,this},LngLat.prototype.getLng=function(){return this.lng},LngLat.prototype.getLat=function(){return this.lat},LngLat.prototype.equals=function(another){return(another=function parseLngLatData(data){if(Array.isArray(data)){var type;if(!Array.isArray(data[0]))return"string"==(type=typeof data[0])||"number"==type?new LngLat$1(data[0],data[1]):data;for(var i=0;i<data.length;i+=1)data[i]=parseLngLatData(data[i])}return data}(another))instanceof LngLat&&Math.max(Math.abs(this._highLat-another._highLat),Math.abs(this._highLng-another._highLng))<=1e-9},LngLat.prototype.add=function(another,noWrap){return new LngLat(this._highLng+another._highLng,this._highLat+another._highLat,noWrap)},LngLat.prototype.subtract=function(another,noWrap){return new LngLat(this._highLng-another._highLng,this._highLat-another._highLat,noWrap)},LngLat.prototype.divideBy=function(num,noWrap){return new LngLat(this._highLng/num,this._highLat/num,noWrap)},LngLat.prototype.multiplyBy=function(num,noWrap){return new LngLat(this._highLng*num,this._highLat*num,noWrap)},LngLat.prototype.offset=function(E,N){if(isNaN(E)||isNaN(N))throw Error("valid offset args, require number");E=2*Math.asin(Math.sin(Math.round(E)/12756274)/Math.cos(this._highLat*Math.PI/180)),E=this._highLng+180*E/Math.PI,N=2*Math.asin(Math.round(N)/12756274);return new LngLat(E,this._highLat+180*N/Math.PI)},LngLat.prototype.toString=function(){return this.lng+","+this.lat},LngLat.prototype.toArray=function(){return[this.lng,this.lat]},LngLat.prototype.toJSON=function(){return[this.lng,this.lat]},LngLat.prototype.distanceTo=function(another){return GeometryUtil.distance(this,another)},LngLat.prototype.distance=function(another){return GeometryUtil.distance(this,another)},LngLat}()),Size=function(){function Size(width,height,isRound){if(void 0===isRound&&(isRound=!1),this.className="AMap.Size",isNaN(width)||isNaN(height))throw new Error("Invalid Object: Pixel("+width+", "+height+")");this.width=isRound?Math.round(width):Number(width),this.height=isRound?Math.round(height):Number(height)}return Size.prototype.getWidth=function(){return this.width},Size.prototype.getHeight=function(){return this.height},Size.prototype.toString=function(){return this.width+","+this.height},Size.prototype.toArray=function(){return[this.width,this.height]},Size}();var records,NEWTON_ITERATIONS,SUBDIVISION_PRECISION,SUBDIVISION_MAX_ITERATIONS,float32ArraySupported,Browser=function(config){function uaHas(key){return-1!==ua.indexOf(key)}var callback,webP,amapRunTime={runSupport:(new Date).getTime()},wasm=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate&&TextDecoder&&TextEncoder){var module=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(module instanceof WebAssembly.Module)return new WebAssembly.Instance(module)instanceof WebAssembly.Instance}}catch(e){}return!1}(),ua=navigator.userAgent.toLowerCase(),hardwareAccEnabled=!0,mac=uaHas("macintosh"),iPad=uaHas("ipad;")||uaHas("ipad "),iTouch=uaHas("ipod touch;"),iPhone=uaHas("iphone;")||uaHas("iphone "),iTouch=iPhone||iPad||iTouch,safari=(mac||iTouch)&&uaHas("safari")&&uaHas("version/"),macWechat=uaHas("macwechat"),windowsWechat=uaHas("windowswechat"),Browser={touch:!1,mac:mac,isRetina:!1,webkit:!1,isMobile:!1,scale:1,android:!1,isWorkerEnv:function(){try{document;return!1}catch(e){return!0}}(),wasm:wasm,safari:safari,macWechat:macWechat,windowsWechat:windowsWechat,amapRunTime:amapRunTime};if("undefined"!=typeof window&&"undefined"!=typeof document){var win_1=window,macWechat=document,windowsWechat=macWechat.documentElement,numberRegex_1=/([a-z0-9]*\\d+[a-z0-9]*)/,blackGraphicCard_1="google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965".split(";"),ie="ActiveXObject"in win_1,retina=0!=window.detectRetina&&("devicePixelRatio"in win_1&&1<win_1.devicePixelRatio||ie&&"matchMedia"in win_1&&win_1.matchMedia("(min-resolution:144dpi)")&&win_1.matchMedia("(min-resolution:144dpi)").matches),windows=uaHas("windows nt"),winPhone=(ua.search(/windows nt [1-5]\\./),ua.search(/windows nt 5\\.[12]/),uaHas("windows nt 10"),uaHas("windows phone")),mb2345Browser=uaHas("Mb2345Browser"),ios10=(iTouch&&ua.search(/ os [456]_/),iTouch&&ua.search(/ os [4-8]_/),iTouch&&ua.search(/ os [78]_/),iTouch&&uaHas("os 8_"),iTouch&&uaHas("os 10_")),android_1=uaHas("android"),androidVersion=0,android23=(android_1&&(androidVersion=parseInt(ua.split("android")[1])||0),android_1&&androidVersion<4),plat_1=(android_1&&5<=androidVersion||ua.search(/android 4.4/),android_1?"android":iTouch?"ios":windows?"windows":mac?"mac":"other"),androidVersion=ie&&!win_1.XMLHttpRequest,ie7=ie&&!macWechat.querySelector,ielt9=ie&&!macWechat.addEventListener,ie9=ie&&uaHas("msie 9"),ie10=ie&&uaHas("msie 10"),ie11=ie&&uaHas("rv:11"),ielt10=ielt9||ie9,edge=uaHas("edge"),uc=(uaHas("qtweb"),uaHas("ucbrowser")),gaodeCoords=uaHas("alipay")||android_1&&uc,wechat=(uaHas("miuibrowser"),uaHas("micromessenger")),dingding=uaHas("dingtalk"),qq=uaHas("mqqbrowser"),baidu=uaHas("baidubrowser"),crios=uaHas("crios/"),chrome=uaHas("chrome/"),crios=!((chrome||crios)&&uaHas("chromium"))&&(chrome&&30<parseInt(ua.split("chrome/")[1])||crios&&30<parseInt(ua.split("crios/")[1])),firefox=uaHas("firefox"),firefox27plus=firefox&&27<parseInt(ua.split("firefox/")[1]),safari7plus=safari&&7<parseInt(ua.split("version/")[1]),mobile_1=(iTouch&&uaHas("aliapp"),android_1||iTouch||winPhone||uaHas("mobile")),winPhone="ontouchstart"in macWechat,msPointer=win_1.navigator&&win_1.navigator.msPointerEnabled&&!!win_1.navigator.msMaxTouchPoints,pointer=win_1.navigator&&!!win_1.navigator.maxTouchPoints,pointerDev=!winPhone&&(pointer||msPointer),winPhone=winPhone||pointerDev,viewportScale=function(){if(!mobile_1)return win_1.devicePixelRatio||1;var metas=document.getElementsByTagName("meta");if(window.parent&&window.parent!==window)try{if(window.parent.location.origin!==window.location.origin)return 1;metas=window.parent.document.getElementsByTagName("meta")}catch(e){return 1}for(var content,initial_scale,minimum_scale,maximum_scale,i=metas.length-1;0<=i;--i)if("viewport"===metas[i].name)return maximum_scale=minimum_scale=initial_scale=void 0,-1!==(content=metas[i].content).indexOf("initial-scale")&&(initial_scale=parseFloat(content.split("initial-scale=")[1])),minimum_scale=-1!==content.indexOf("minimum-scale")?parseFloat(content.split("minimum-scale=")[1]):0,maximum_scale=-1!==content.indexOf("maximum-scale")?parseFloat(content.split("maximum-scale=")[1]):1/0,initial_scale?minimum_scale<=maximum_scale?maximum_scale<initial_scale?maximum_scale:initial_scale<minimum_scale?minimum_scale:initial_scale:(console&&console.log&&console.log("viewport"),null):minimum_scale<=maximum_scale?1<=minimum_scale?1:Math.min(maximum_scale,1):(console&&console.log&&console.log("viewport"),null)}(),needFitRetina_1=retina&&(!mobile_1||!!viewportScale&&1<=viewportScale),ie3d=ie&&"transition"in windowsWechat.style,isSvg=!!macWechat.createElementNS&&!!macWechat.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,canvas_1=macWechat.createElement("canvas"),isCanvas_1=!(!canvas_1||!canvas_1.getContext),macWechat=window.URL||window.webkitURL,isWorker_1=!0!==window.disableWorker&&!ie&&!(uc&&android_1&&!crios)&&window.Worker&&macWechat&&macWechat.createObjectURL&&window.Blob,webglContextName_1="",graphicCard_1="",maxRenderSize_1=0,macWechat=0!=window.higtQualityRender||!retina,movingDraw=window.movingDraw,webglParams_1=(window.forceWebGL,{alpha:!0,antialias:macWechat,depth:!0,stencil:!0}),macWechat=function(){if(isCanvas_1&&isWorker_1)for(var graphicVersion,number,contextName=["webgl","experimental-webgl","moz-webgl"],gl=null,i=0;i<contextName.length;i+=1){try{gl=canvas_1.getContext(contextName[i],webglParams_1)}catch(err){}if(gl){if(gl.drawingBufferWidth!==canvas_1.width||gl.drawingBufferHeight!==canvas_1.height)return!1;if(!gl.getShaderPrecisionFormat||!gl.getParameter||!gl.getExtension)return!1;maxRenderSize_1=gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);var maxViewPortSize=gl.getParameter(gl.MAX_VIEWPORT_DIMS);if(!maxViewPortSize)return!1;maxRenderSize_1=Math.min(maxRenderSize_1,maxViewPortSize[0],maxViewPortSize[1]),safari&&"mac"==plat_1&&(maxRenderSize_1=Math.min(maxRenderSize_1,4096));var maxViewPortSize=Math.max(screen.width,screen.height);if(needFitRetina_1&&(maxViewPortSize*=Math.min(2,window.devicePixelRatio||1)),maxRenderSize_1<maxViewPortSize)return!1;if(gl.getShaderPrecisionFormat(35632,36338).precision<23||gl.getShaderPrecisionFormat(35633,36338).precision<23)return!1;graphicCard_1=gl.getExtension("WEBGL_debug_renderer_info")?gl.getParameter(37446):null;number=b=maxViewPortSize=void 0;var b=(graphicVersion=graphicCard_1)?(maxViewPortSize=null,0<=(graphicVersion=(graphicVersion=(b=(graphicVersion=graphicVersion.toLowerCase()).match(/angle \\((.*)\\)/))?(graphicVersion=b[1]).replace(/\\s*direct3d.*$/,""):graphicVersion).replace(/\\s*\\([^\\)]*wddm[^\\)]*\\)/,"")).indexOf("intel")?(maxViewPortSize=["Intel"],0<=graphicVersion.indexOf("mobile")&&maxViewPortSize.push("Mobile"),(0<=graphicVersion.indexOf("gma")||0<=graphicVersion.indexOf("graphics media accelerator"))&&maxViewPortSize.push("GMA"),0<=graphicVersion.indexOf("haswell")?maxViewPortSize.push("Haswell"):0<=graphicVersion.indexOf("ivy")?maxViewPortSize.push("HD 4000"):0<=graphicVersion.indexOf("sandy")?maxViewPortSize.push("HD 3000"):0<=graphicVersion.indexOf("ironlake")?maxViewPortSize.push("HD"):(0<=graphicVersion.indexOf("hd")&&maxViewPortSize.push("HD"),(number=graphicVersion.match(numberRegex_1))&&maxViewPortSize.push(number[1].toUpperCase())),maxViewPortSize.join(" ")):0<=graphicVersion.indexOf("nvidia")||0<=graphicVersion.indexOf("quadro")||0<=graphicVersion.indexOf("geforce")||0<=graphicVersion.indexOf("nvs")?(maxViewPortSize=["nVidia"],0<=graphicVersion.indexOf("geforce")&&maxViewPortSize.push("geForce"),0<=graphicVersion.indexOf("quadro")&&maxViewPortSize.push("Quadro"),0<=graphicVersion.indexOf("nvs")&&maxViewPortSize.push("NVS"),graphicVersion.match(/\\bion\\b/)&&maxViewPortSize.push("ION"),graphicVersion.match(/gtx\\b/)?maxViewPortSize.push("GTX"):graphicVersion.match(/gts\\b/)?maxViewPortSize.push("GTS"):graphicVersion.match(/gt\\b/)?maxViewPortSize.push("GT"):graphicVersion.match(/gs\\b/)?maxViewPortSize.push("GS"):graphicVersion.match(/ge\\b/)?maxViewPortSize.push("GE"):graphicVersion.match(/fx\\b/)&&maxViewPortSize.push("FX"),(number=graphicVersion.match(numberRegex_1))&&maxViewPortSize.push(number[1].toUpperCase().replace("GS","")),0<=graphicVersion.indexOf("titan")?maxViewPortSize.push("TITAN"):0<=graphicVersion.indexOf("ti")&&maxViewPortSize.push("Ti"),maxViewPortSize.join(" ")):0<=graphicVersion.indexOf("amd")||0<=graphicVersion.indexOf("ati")||0<=graphicVersion.indexOf("radeon")||0<=graphicVersion.indexOf("firegl")||0<=graphicVersion.indexOf("firepro")?(maxViewPortSize=["AMD"],0<=graphicVersion.indexOf("mobil")&&maxViewPortSize.push("Mobility"),0<=(b=graphicVersion.indexOf("radeon"))&&maxViewPortSize.push("Radeon"),0<=graphicVersion.indexOf("firepro")?maxViewPortSize.push("FirePro"):0<=graphicVersion.indexOf("firegl")&&maxViewPortSize.push("FireGL"),0<=graphicVersion.indexOf("hd")&&maxViewPortSize.push("HD"),(number=(graphicVersion=0<=b?graphicVersion.substring(b):graphicVersion).match(numberRegex_1))&&maxViewPortSize.push(number[1].toUpperCase().replace("HD","")),maxViewPortSize.join(" ")):graphicVersion.substring(0,100)):null;if(b){if(-1<b.indexOf("google swiftshader"))return hardwareAccEnabled=!1;if(-1!==blackGraphicCard_1.indexOf(b))return!1}return webglContextName_1=contextName[i],!0}}return!1},canWebGL=macWechat(),enableVector=void 0===config[8]||config[8],canWebGL=window.Uint8Array&&enableVector&&!window.forbidenWebGL&&canWebGL&&(window.forceWebGL||(crios||firefox27plus||safari7plus||edge||wechat||dingding)&&"other"!=plat_1),crios=window.forceWebGLBaseRender||canWebGL?"w":"d",firefox27plus=uaHas("webkit"),safari7plus="WebKitCSSMatrix"in win_1&&"m11"in new window.WebKitCSSMatrix,dingding="MozPerspective"in windowsWechat.style,windowsWechat="OTransition"in windowsWechat.style,any3d=ie3d||safari7plus||dingding||windowsWechat,config=void 0!==config[12]?config[12]:null,localStore=!0;try{void 0===win_1.localStorage?localStore=!1:(tmpData=(new Date).getTime()+"",win_1.localStorage.setItem("_test",tmpData),win_1.localStorage.getItem("_test")!==tmpData&&(localStore=!1),win_1.localStorage.removeItem("_test"))}catch(e){localStore=!1}var tmpData=parseInt(ua.split("chrome/")[1]),Browser={iPad:iPad,iPhone:iPhone,size:iPhone?100:android_1?200:500,mac:mac,windows:windows,ios:iTouch,ios10:ios10,android:android_1,android23:android23,gaodeCoords:gaodeCoords,plat:plat_1,baidu:baidu,qq:qq,safari:safari,wechat:wechat,ie:ie,ie6:androidVersion,ie7:ie7,ie9:ie9,ie10:ie10,ielt9:ielt9,ielt10:ielt10,ie11:ie11,edge:edge,ielt11:ie&&!ie11,mb2345Browser:mb2345Browser,localStore:localStore,vdataVersion:config,geolocation:mobile_1||ie&&!ielt9||edge,uc_:uc,uc:uc&&!chrome,chrome:chrome,drawTextDir:!0,firefox:firefox,hardwareAccEnabled:hardwareAccEnabled,isMobile:mobile_1,mobileWebkit:mobile_1&&firefox27plus,mobileWebkit3d:mobile_1&&safari7plus,mobileOpera:mobile_1&&win_1.opera,isRetina:retina,viewportScale:viewportScale,needFitRetina:needFitRetina_1,touch:winPhone,msPointer:msPointer,pointer:pointer,pointerDev:pointerDev,chrome57:chrome&&57<=tmpData,chrome64:!mobile_1&&chrome&&64<=tmpData,webkit:firefox27plus,ie3d:ie3d,webkit3d:safari7plus,gecko3d:dingding,opera3d:windowsWechat,any3d:any3d,isSvg:isSvg,isCanvas:isCanvas_1,isWorker:isWorker_1,useLabelImage:!1,isWebGL:canWebGL,webglContextName:webglContextName_1,webglParams:webglParams_1,graphicCard:graphicCard_1,maxRenderSize:maxRenderSize_1,DataUrl2Blob:!1,movingDraw:movingDraw,baseRender:enableVector?crios:"d",scale:retina?2:1,getContext:function(canvas,opt){var params={};return extend(params,webglParams_1),extend(params,opt),canvas.getContext(webglContextName_1,params)},isWebp:!1,wasm:wasm,amapRunTime:amapRunTime,checkWebgl:macWechat};callback=function(isWebp){Browser.isWebp=isWebp},(webP=new Image).src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",webP.onload=webP.onerror=function(){callback(2===webP.height)}}return Browser}("undefined"==typeof config?[]:config),getTag=("undefined"!=typeof createImageBitmap&&"undefined"!=typeof ImageBitmap&&(Browser.imageBitmap=!0),Boolean(Browser.isWorkerEnv?!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"):!Browser.safari&&!Browser.macWechat&&!Browser.windowsWechat&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty("signal")));function A(aA1,aA2){return 1-3*aA2+3*aA1}function B(aA1,aA2){return 3*aA2-6*aA1}function calcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+3*aA1)*aT}function getSlope(aT,aA1,aA2){return 3*A(aA1,aA2)*aT*aT+2*B(aA1,aA2)*aT+3*aA1}function LinearEasing(x){return x}function getQuadBezierValue(t,p1,p2,p3){var iT;return 1<=t?p3:(iT=1-t)*iT*p1+2*iT*t*p2+t*t*p3}function cubic(t,p0,p1,p2,p3){var cX,bX,cY,aX;return 1<=t?p3:(cX=3*(p1.pos[0]-p0.pos[0]),bX=3*(p2.pos[0]-p1.pos[0])-cX,aX=p3.pos[0]-p0.pos[0]-cX-bX,cY=3*(p1.pos[1]-p0.pos[1]),p2=3*(p2.pos[1]-p1.pos[1])-cY,p1=p3.pos[1]-p0.pos[1]-cY-p2,p3=aX*Math.pow(t,3)+bX*Math.pow(t,2)+cX*t+p0.pos[0],aX=p1*Math.pow(t,3)+p2*Math.pow(t,2)+cY*t+p0.pos[1],ProjectionManager.getProjection("EPSG:3857").unproject(p3,aX))}function quad(t,p0,p1,p2){return ProjectionManager.getProjection("EPSG:3857").unproject(getQuadBezierValue(t,p0.pos[0],p1.pos[0],p2.pos[0]),getQuadBezierValue(t,p0.pos[1],p1.pos[1],p2.pos[1]))}function getCoordsWithControlPoints(prev,next,cpList,scaleFactor){var result=null;return prev&&cpList&&cpList.length&&((prev=[prev]).push.apply(prev,cpList),prev.push(next),result=function(num,pList){var func=null;switch(pList.length){case 3:func=quad;break;case 4:func=cubic;break;default:return null}for(var coords=[],params=[0].concat(pList),i=1;i<num-2;i++)params[0]=i/num,coords.push(func.apply(null,params));return coords.push(pList[pList.length-1]),coords}(function(pList,scaleFactor){for(var tolerance=4,interpolateLimit=[3,300],tolerance=Math.max(2,tolerance),xLen=0,yLen=0,i=0,len=pList.length;i<len-1;i++){var p1=pList[i],p2=pList[i+1];xLen+=Math.abs(p2.pos[0]-p1.pos[0]),yLen+=Math.abs(p2.pos[1]-p1.pos[1])}return Math.min(interpolateLimit[1],Math.max(interpolateLimit[0],Math.round(Math.max(xLen,yLen)/scaleFactor/tolerance)))}(prev,scaleFactor),prev)),result||[next]}Browser.canceledWorkerFetch=getTag,Browser.amapRunTime={workerTime:{}},records={},NEWTON_ITERATIONS=4,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,float32ArraySupported="function"==typeof Float32Array;var NebulaTagType,BezierUtil={quad:quad,cubic:cubic,easing:function(mX1,mY1,mX2,mY2){if(!(0<=mX1&&mX1<=1&&0<=mX2&&mX2<=1))throw new Error("bezier x values must be in [0, 1] range");var easingKey=arguments.toString();if(records[easingKey])return records[easingKey];if(mX1===mY1&&mX2===mY2)return LinearEasing;for(var sampleValues=new(float32ArraySupported?Float32Array:Array)(11),i=0;i<11;++i)sampleValues[i]=calcBezier(.1*i,mX1,mX2);function getTForX(aX){for(var intervalStart=0,currentSample=1;10!==currentSample&&sampleValues[currentSample]<=aX;++currentSample)intervalStart+=.1;var guessForT=intervalStart+.1*((aX-sampleValues[--currentSample])/(sampleValues[currentSample+1]-sampleValues[currentSample])),initialSlope=getSlope(guessForT,mX1,mX2);return.001<=initialSlope?function(aX,aGuessT,mX1,mX2){for(var i=0;i<NEWTON_ITERATIONS;++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(0===currentSlope)return aGuessT;aGuessT-=(calcBezier(aGuessT,mX1,mX2)-aX)/currentSlope}return aGuessT}(aX,guessForT,mX1,mX2):0===initialSlope?guessForT:function(aX,aA,aB,mX1,mX2){for(var currentX,currentT,i=0;0<(currentX=calcBezier(currentT=aA+(aB-aA)/2,mX1,mX2)-aX)?aB=currentT:aA=currentT,Math.abs(currentX)>SUBDIVISION_PRECISION&&++i<SUBDIVISION_MAX_ITERATIONS;);return currentT}(aX,intervalStart,intervalStart+.1,mX1,mX2)}function easingFunction(x){return 0===x?0:1===x?1:calcBezier(getTForX(x),mY1,mY2)}return records[easingKey]=easingFunction},getInterpolateCoords:function(lngLats,scaleFactor){for(var coords=[],i=0,len=lngLats.length;i<len;i+=1)coords.push.apply(coords,getCoordsWithControlPoints(lngLats[i-1],lngLats[i],lngLats[i].controlPoints,scaleFactor));return coords},getInterpolateLngLats:function(lngLats,crs,scaleFactor,opts){for(var coords=this.getInterpolateCoords(lngLats,crs,scaleFactor,opts),results=[],i=0,len=coords.length;i<len;i++)results.push(function(crs,a){return Array.isArray(a)&&(a=new Pixel(a[0],a[1])),crs.containerTolnglat(a,20)}(crs,coords[i]));return results}},lcs=new(function(){function LCS(){this._wordCoord=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],this._widthNum=128,this._heightNum=128,this._widthSize=(this._wordCoord[2]-this._wordCoord[0])/this._widthNum,this._heightSize=(this._wordCoord[3]-this._wordCoord[1])/this._heightNum}return LCS.prototype.setMap=function(map){this.map=map},LCS.prototype.getSize=function(){return[this._widthSize,this._heightSize]},LCS.prototype.getNum=function(){return[this._widthNum,this._heightNum]},LCS.prototype.getLocalByLnglat=function(lnglat){var _a=(_a=ProjectionManager.getProjection("EPSG:3857")).project.apply(_a,lnglat);return this.getLocalByCoord(_a)},LCS.prototype.getLocalByCoord=function(coord){var x=Math.floor(coord[0]/this._widthSize),y=Math.floor(coord[1]/this._heightSize),local=this.getLocalCenterByXY(x,y);return{deltaCenter:[coord[0]-local.center[0],coord[1]-local.center[1]],x:x,y:y,center:local.center,bbox:local.bbox}},LCS.prototype.getLocalCenterByXY=function(x,y){var center={x:x,y:y,center:[0,0],bbox:[0,0,0,0]};return center.center=[(x+.5)*this._widthSize,(y+.5)*this._heightSize],center.bbox=[x*this._widthSize,y*this._heightSize,(x+1)*this._widthSize,(y+1)*this._heightSize],center},LCS.prototype.getDeltaCoord=function(coord){var centerObj=this.getLocalByCoord(coord);return[coord[0]-centerObj.center[0],coord[1]-centerObj.center[1]]},LCS}()),globalInstance=self,TagMap=(!function(NebulaTagType){NebulaTagType.LITE="lite",NebulaTagType.LEFT="left",NebulaTagType.ALL="all",NebulaTagType.NONE=""}(NebulaTagType=NebulaTagType||{}),{2:"all",3:"all",4:"all",5:"all",6:"lite",7:"all",8:"lite",9:"all",10:"lite",11:"lite",12:"all",13:"all",14:"all",15:"lite",16:"lite",17:"all",18:"all",19:"all",20:"all"}),colorNameDist={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",grey:"#808080",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Util=function(){var supportNativeBind,CHARS,isWorker,lastId,lastTime,requestFn_1,cancelFn_1,requestFn,cancelFn,originUtil={CLASS_NAME:"AMap.Util",WorldAxesCenter:{x:0,y:0},Single:{},stamp:(isWorker=!0===Browser.isWorkerEnv,lastId=1e5,function(obj){return obj._amap_id=isWorker?++lastId:--lastId,obj._amap_id}),singlton:function(singltonClass){return Util.Single[singltonClass]||new singltonClass},getOptimalZoom:function(z){return z<Math.floor(z)+.8?Math.floor(z):Math.ceil(z)},join:function(object,sp){if(object.join)return object.join(sp);var i,r=[];for(i in object)object.hasOwnProperty(i)&&r.push(i+"="+(object[i]||""));return r.join(sp)},getGuid:function(pre,median){return void 0===median&&(median=10),(pre||"")+Math.round(Math.random()*Math.pow(10,median))+"_"+(new Date).getTime()},uuid:(CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),function(len,radix){var i,chars=CHARS,uuid=[];if(radix=(radix=void 0===radix?62:radix)||chars.length,len=void 0===len?0:len)for(i=0;i<len;i++)uuid[i]=chars[0|Math.random()*radix];else{var r;for(uuid[8]=uuid[13]=uuid[18]=uuid[23]="-",uuid[14]="4",i=0;i<36;i++)uuid[i]||(r=0|16*Math.random(),uuid[i]=chars[19===i?3&r|8:r])}return uuid.join("")}),endsWith:function(longStr,shortStr){return longStr.endsWith?longStr.endsWith(shortStr):!(longStr.length<shortStr.length)&&longStr.substr(longStr.length-shortStr.length)===shortStr},suspendedServices:[],globalPan:268435456,p20Center:[215440491,106744817],fps:{start:function(instance){instance.startTime=new Date,instance.times=[];function animate(){var now_=(new Date).getTime();instance.times.push(now_-lastTime),lastTime=now_,instance.id=Util.requestAnimFrame(animate)}var lastTime=(new Date).getTime();instance.id=Util.requestAnimFrame(animate)},cancel:function(instance){instance.id&&Util.cancelAnimFrame(instance.id)},stop:function(instance){instance.costTime=Date.now()-instance.startTime,this.cancel(instance),instance.fps=Math.round(1e3/(instance.costTime/(instance.times.length+1)))}},getTransitionalVal:function(preValue,nextValue,percent,easeFunction,isRound){if(void 0===isRound&&(isRound=!1),preValue===nextValue)return nextValue;switch(easeFunction=void 0===easeFunction?"linear":easeFunction){case"ease":percent=BezierUtil.easing(.25,.1,.25,1)(percent);break;case"ease-in":percent=BezierUtil.easing(.42,0,1,1)(percent);break;case"ease-out":percent=BezierUtil.easing(0,0,.58,1)(percent);break;case"ease-in-out":percent=BezierUtil.easing(.42,0,.58,1)(percent)}easeFunction=preValue+(nextValue-preValue)*percent;return isRound&&(easeFunction>>=0),easeFunction},createObjectURL:function(code,contentType){void 0===contentType&&(contentType="text/javascript; charset=utf-8");var url=null;try{url=(globalInstance.URL||globalInstance.webkitURL).createObjectURL(new Blob([code],{type:contentType}))}catch(e){url=null}return url},revokeObjectURL:function(url){try{(globalInstance.URL||globalInstance.webkitURL).revokeObjectURL(url)}catch(e){}},arrayToVIObj:function(array){for(var obj={},i=0,l=array.length;i<l;i++)obj[array[i]]=i;return obj},lnglatToCoords:function(lnglat,z){var z=Math.pow(2,z),dlat=180/z;return[Math.floor(lnglat[0]/(360/z))+z/2,z/2-Math.ceil(lnglat[1]/dlat)]},computeTileRange:function(bounds,z,isPure){void 0===isPure&&(isPure=!1);var minlnglat=[bounds[0],bounds[3]],bounds=[bounds[2],bounds[1]],minlnglat=this.lnglatToCoords(minlnglat,z),bounds=this.lnglatToCoords(bounds,z),minX=minlnglat[0],minY=minlnglat[1],maxX=bounds[0],maxY=bounds[1];if(isPure)return{minX:minX,minY:minY,maxX:maxX,maxY:maxY,z:z};this._optimalTileRange={minX:minX,minY:minY,maxX:maxX,maxY:maxY,z:z};for(var tileRange=[],i=minX;i<=maxX;i+=1)for(var j=minY;j<=maxY;j+=1)tileRange.push([z,i,j]);return tileRange},getMappingKey:function(conf){var obj={};if(Util.is(conf,"object"))for(var key in conf)conf.hasOwnProperty(key)&&(obj[conf[key]]=key);return obj},merge:function(array1,array2){if(array2.length<5e4)array1.push.apply(array1,array2);else for(var ii=0,iilen=array2.length;ii<iilen;ii+=1)array1.push(array2[ii])},clone:function(a){if("object"!=typeof a||null===a)return a;if(a.noDeepClone||this.is(a,"Float32Array")||this.is(a,"Uint16Array"))return a;var i,b=this.isArray(a)?[]:{};for(i in a)a.hasOwnProperty(i)&&(b[i]=Util.clone(a[i]));return b},isInteger:function(num){return(0|num)===num},isNumber:function(num){return!isNaN(num)},setPrototypeOf:"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:function(obj,_prototype){for(var key in _prototype)obj[key]=_prototype[key]},isFunction:function(value){return"function"==typeof value},argbToArray:function(argb,format){if(void 0===format&&(format="webgl"),!argb)return argb;for(var array=[],i=0,l=argb.length;i<l;i+=2){var val=parseInt(argb.substr(i,2),16);("webgl"===format||"rgba"===format&&0===i)&&(val=this.format(val/255,3)),array.push(val)}return array.push(array.shift()),array},noop:function(){},keys:"function"==typeof Object.keys?Object.keys:function(obj){var key,keys=[];for(key in obj)obj.hasOwnProperty(key)&&keys.push(key);return keys},map:function(collection,fun,context){void 0===context&&(context=null);var newCollection=[];return collection&&collection.length?(Util.each(collection,function(){for(var args=[],_a=0;_a<arguments.length;_a++)args[_a]=arguments[_a];newCollection[args[1]]=fun.apply(context||collection,args)}),newCollection):collection},forEach:function(collection,fun){if(collection&&collection.length){var l=collection.length;if(0<l&&(fun(collection[0],0),1<l)){fun(collection[1],1);for(var i=2;i<l;i++)fun(collection[i],i)}}},each:function(collection,fun,context){if(void 0===context&&(context=null),collection&&collection.length)for(var i=0,l=collection.length;i<l&&!1!==fun.call(context,collection[i],i,collection);i++);},find:function(collection,fn,context){void 0===context&&(context=null);for(var i=0,l=collection.length;i<l;i++)if("function"==typeof fn){if(fn.call(context,collection[i],i,collection))return collection[i]}else if(collection[i]===fn)return collection[i];return null},isDOM:function(obj){return"object"==typeof HTMLElement?obj instanceof HTMLElement:obj&&"object"==typeof obj&&1===obj.nodeType&&"string"==typeof obj.nodeName},uncodeCoords:function(ori,version){for(var charactersLength,d,characters="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM",offset="v5"<(version=version||"v5")?(charactersLength=characters.length,512):(characters=characters.substr(0,charactersLength=27),333),res=[],temp=NaN,_i=0,_len=ori.length;_i<_len;_i++)d=ori[_i],d=characters.indexOf(d),temp=isNaN(temp)?d*charactersLength:(res.push(temp+d-offset),NaN);return res},separateDoForLoop:function(func,array){for(var unit=1,unit=512<array.length?Math.round(Math.pow(array.length,.5)):array.length,groups=Math.ceil(array.length/unit),i=0;i<groups;i+=1){var s=unit*i,e=s+unit;e>array.length&&(e=array.length);for(var j=s;j<e;j+=1)func(array[j])}},colorToArray:function(color){var rgbaColor;return/^rgba\\(/.test(color)?this.rgbaStrToArray(color):("#"===(rgbaColor=color=this.colorNameToHex(color))[0]&&(3===(color=color.substring(1)).length&&(color=color.replace(/./g,function(str){return str+str})),rgbaColor=this.argbHex2Rgba(8===color.length?color:"ff"+color)),this.rgbaStrToArray(rgbaColor))},colorNameToHex:function(colorName){return"string"==typeof(colorName=(colorName=void 0===colorName?"":colorName).toLowerCase())&&colorNameDist[colorName]||colorName},enCodeTileCoord:function(x,y,z){var r=Math.floor(z/2),q=z-r,r=(1<<r)-1<<q,q=(1<<q)-1;return[z,x&r|y&q,y&r|x&q]},encodeURICom:function(keyword){return keyword?encodeURIComponent(keyword):""},getStyle:function(styles,styletype,styleid,level){var styleMap=styles[styletype].i[styleid];if(void 0===styleMap)return null;if(styleid=styles[styletype].s,"number"==typeof styleMap)return styleid[styleMap];for(;void 0===styleMap[level.toString()]&&!(--level<3););return"number"==typeof(styles=styleMap[level.toString()])?styleid[styles]:null},rgbaStrToArray:function(rgba){rgba=rgba.split(",");return rgba[0]=parseFloat(rgba[0].split("rgba(")[1])/255,rgba[1]=parseFloat(rgba[1])/255,rgba[2]=parseFloat(rgba[2])/255,rgba[3]=parseFloat(rgba[3]),rgba},rgbStrToArray:function(rgb){rgb=rgb.split(",");return rgb[0]=parseFloat(rgb[0].split("rgb(")[1])/255,rgb[1]=parseFloat(rgb[1])/255,rgb[2]=parseFloat(rgb[2])/255,rgb},rgbaArray2rgba:function(array){return"rgba("+255*array[0]+","+255*array[1]+","+255*array[2]+","+array[3]+")"},color2Rgba:function(color){return this.rgbaArray2rgba(this.color2RgbaArray(color))},color2RgbaArray:function(color){var hexOrRgbOrRgba,r,oc,h,s,l,hex;return color instanceof Array?(3==color.length&&color.push(1),color):0==(hexOrRgbOrRgba=this.colorNameToHex(color)).indexOf("rgb(")?((r=this.rgbStrToArray(hexOrRgbOrRgba)).push(1),r):0==hexOrRgbOrRgba.indexOf("rgba(")?this.rgbaStrToArray(hexOrRgbOrRgba):0==hexOrRgbOrRgba.indexOf("#")?4===hexOrRgbOrRgba.length?(hex=hexOrRgbOrRgba.substr(1).replace(/./g,function(str){return str+str}),this.rgbHex2RgbaArray(hex)):7==hexOrRgbOrRgba.length?this.rgbHex2RgbaArray(hexOrRgbOrRgba.substr(1)):9==hexOrRgbOrRgba.length?(r=hexOrRgbOrRgba.substr(1),this.argbHex2RgbaArray(r)):void 0:0===hexOrRgbOrRgba.indexOf("hsla")?(oc=color.substr(5).split(","),h=parseInt(oc[0],10)/360,s=parseInt(oc[1],10)/100,l=parseInt(oc[2],10)/100,r=parseFloat(oc[3]),this.HSLA2RGBA(h,s,l,r)):0===hexOrRgbOrRgba.indexOf("hsl")?(oc=color.substr(4).split(","),h=parseInt(oc[0],10)/360,s=parseInt(oc[1],10)/100,l=parseInt(oc[2],10)/100,this.HSLA2RGBA(h,s,l,1)):3===hexOrRgbOrRgba.length?(hex=hexOrRgbOrRgba.replace(/./g,function(str){return str+str}),this.rgbHex2RgbaArray(hex)):6==hexOrRgbOrRgba.length?this.rgbHex2RgbaArray(hexOrRgbOrRgba):8==hexOrRgbOrRgba.length?this.argbHex2RgbaArray(hexOrRgbOrRgba):void 0},HSLA2RGBA:function(h,s,l,a){var r,g,b;return 0===s?r=g=b=l:(r=this.hue2rgb(s=2*l-(l=l<.5?l*(1+s):l+s-l*s),l,h+1/3),g=this.hue2rgb(s,l,h),b=this.hue2rgb(s,l,h-1/3)),[r,g,b,a]},hue2rgb:function(p,q,t){return t<0&&(t+=1),1<t&&--t,t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p},rgbHex2Rgba:function(hex){return hex.startsWith("#")&&(hex=hex.slice(1)),Util.argbHex2Rgba("ff"+hex)},argbHex2Rgba:function(hex){for(var parts=[],i=0,len=(hex=hex.startsWith("#")?hex.slice(1):hex).length;i<len;i+=2)parts.push(parseInt(hex.substr(i,2),16));return parts.push((parts.shift()/255).toFixed(2)),"rgba("+parts.join(",")+")"},Opacity2Rgba:function(opacity,color){var newColor=color;return color&&color[3]&&opacity&&(color[3]=Math.floor(255*opacity)),newColor},Hex2Rgba:function(hex){if("string"!=typeof hex)return!1;for(var parts=[],i=0,len=hex.length;i<len;i+=2)parts.push(parseInt(hex.substr(i,2),16));return parts.push(parseInt(parts.shift())),parts},rgbHex2RgbaArray:function(hex){return this.rgbaHex2RgbaArray(hex+"ff")},argbHex2RgbaArray:function(hex){for(var parts=[],i=0,len=hex.length;i<len;i+=2)parts.push(parseInt(hex.substr(i,2),16)/255);return parts.push(parts.shift()),parts},rgbaHex2RgbaArray:function(hex){hex=parseInt(hex,16);return[(hex>>24&255)/255,(hex>>16&255)/255,(hex>>8&255)/255,(255&hex)/255]},isEmpty:function(obj){for(var i in obj)if(obj.hasOwnProperty(i))return!1;return!0},delArrayItem:function(array,n){return 0<=n&&array.splice(n,1),array},startsWith:function(_long,_short){return _long.startsWith?_long.startsWith(_short):_long.substr(0,_short.length)===_short},deleteItemFromArray:function(array,item){item=Util.indexOf(array,item);return Util.delArrayItem(array,item)},deleteItemFromArrayByIndex:function(array,index){return Util.delArrayItem(array,index)},filter:function(array,fun,context){var ret=[];return Util.each(array,function(item,i){fun.call(context,item,i)&&ret.push(item)}),ret},indexOf:function(array,item){if(array&&array.length){if(array.indexOf)return array.indexOf(item);for(var i=0;i<array.length;i+=1)if(array[i]===item)return i}return-1},endsWith_:function(longStr,shortStr){return longStr.endsWith?longStr.endsWith(shortStr):!(longStr.length<shortStr.length)&&longStr.substr(longStr.length-shortStr.length)==shortStr},bind:(supportNativeBind=!1,Boolean(Function.prototype.bind)&&(supportNativeBind=!0),function(fn,context){var args=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return supportNativeBind?args?(args.unshift(context),fn.bind.apply(fn,args)):fn.bind(context):function(){return fn.apply(context,args||arguments)}}),setOptions:function(obj,opts){return obj.opts=assign({},obj.opts,opts=opts||{}),obj.opts},cloneDeep:function(value,customizer,thisArg){return"function"==typeof customizer?this.baseClone(value,!0,this.bindCallback(customizer,thisArg,1)):this.baseClone(value,!0)},baseClone:function(value,isDeep,customizer,key,object,stackA,stackB){var result;if(void 0===(result=customizer?object?customizer(value,key,object):customizer(value):result)){if(!this.isObject(value))return value;key=this.isArray(value);if(key){if(result=this.initCloneArray(value),!isDeep)return this.arrayCopy(value,result)}else{var tag=Object.prototype.toString.call(value),isFunc="[object Function]"==tag;if("[object Object]"!=tag&&"[object Arguments]"!=tag&&(!isFunc||object))return object?value:{};if(result=this.initCloneObject(isFunc?{}:value),!isDeep)return this.baseAssign(result,value)}stackB=stackB||[];for(var length=(stackA=stackA||[]).length;length--;)if(stackA[length]==value)return stackB[length];stackA.push(value),stackB.push(result),(key?this.arrayEach:this.baseForOwn)(value,function(subValue,key){result[key]=Util.baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)})}return result},baseAssign:function(object,source){return null==source?object:this.baseCopy(source,Object.keys(source),object)},isObject:function(value){var type=typeof value;return!!value&&("object"==type||"function"==type)},isObjectLike:function(value){return!!value&&"object"==typeof value},isLength:function(value){return"number"==typeof value&&-1<value&&value%1==0&&value<=9007199254740991},initCloneArray:function(array){var length=array.length,result=new Array(length);return length&&"string"==typeof array[0]&&Object.hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result},arrayCopy:function(source,array){var index=-1,length=source.length;for(array=array||Array(length);++index<length;)array[index]=source[index];return array},initCloneObject:function(object){object=object.constructor;return new(object="function"==typeof object&&object instanceof object?object:Object)},bindCallback:function(func,thisArg,argCount){if("function"!=typeof func)return this.identity;if(void 0===thisArg)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}},arrayEach:function(array,iteratee){for(var index=-1,length=array.length;++index<length&&!1!==iteratee(array[index],index,array););return array},identity:function(value){return value},createBaseFor:function(fromRight){return function(object,iteratee,keysFunc){for(var iterable=Util.toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:++index<length;){var key=props[index];if(!1===iteratee(iterable[key],key,iterable))break}return object}},baseForOwn:function(object,iteratee){return Util.createBaseFor()(object,iteratee,Object.keys)},toObject:function(value){return Util.isObject(value)?value:Object(value)},baseCopy:function(source,props,object){object=object||{};for(var index=-1,length=props.length;++index<length;){var key=props[index];object[key]=source[key]}return object},falseFn:function(){return!1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",getTimestamp:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},limitExecByInterval:function(fn,time,context,ignoreWhenLock){var lastRunTime_1,curTime_1,fnGetTime_1,wrapperFn,lock_1,args_1,later_1;return wrapperFn=ignoreWhenLock?(lastRunTime_1=0,fnGetTime_1=this.getTimestamp,function(){if((curTime_1=fnGetTime_1())-lastRunTime_1<time)return!1;lastRunTime_1=curTime_1,fn.apply(context,arguments)}):(later_1=function(){lock_1=!1,args_1&&(wrapperFn.apply(context,args_1),args_1=!1)},function(){lock_1?args_1=arguments:(lock_1=!0,fn.apply(context,arguments),setTimeout(later_1,time))})},format:function(num,digits){return num===num<<0?num:+parseFloat(num+"").toFixed(digits||0)},isArray:Array.isArray||function(array){return this.is(array,"array")},is:function(obj,type){return Object.prototype.toString.call(obj).split(" ")[1].slice(0,-1).toLowerCase()===type.toLowerCase()},includes:"function"==typeof Array.prototype.includes?function(arr,val){return arr.includes(val)}:function(arr,val){return-1!==this.indexOf(arr,val)},strHashCode:function(str){var hash=0;if(0!==str.length)for(var i=0,len=str.length;i<len;i+=1)hash=(hash<<5)-hash+str.charCodeAt(i),hash&=hash;return hash},decode_:function(str,key){key=key?Math.ceil(parseInt(key.substr(6))/24):1;for(var result="",i=0,strlen=str.length;i<strlen;i++)result+=String.fromCharCode((str.charCodeAt(i)-256-key+65535)%65535);return result},decodeLngLat:function(lng,lat){var lngKey=(lng+"").slice(-2),latKey=(lat+"").slice(-2),ms=(lng=lng.slice(0,-2),lat=lat.slice(0,-2),parseInt((latKey+lngKey).slice(1))),lngDir=Math.ceil(ms/250)%2?1:-1,ms=1<ms/500?1:-1;return lng-=parseInt("1"+lngKey)/3e3*lngDir,lat-=parseInt("1"+latKey)/3e3*ms,new LngLat$1(parseFloat(lng).toFixed(5),parseFloat(lat).toFixed(5))},objHashCode:function(obj){return"undefined"!=typeof JSON&&JSON.stringify?Util.strHashCode(JSON.stringify(obj)):null},stampHashCode:function(obj,refresh){var key="_amap_hash";return!refresh&&obj.hasOwnProperty(key)||(refresh=Util.objHashCode(obj))&&(obj[key]=refresh),obj[key]},parseLngLatData:function(data){if(Util.isArray(data)){var type;if(!Util.isArray(data[0]))return"string"==(type=typeof data[0])||"number"==type?new LngLat$1(data[0],data[1]):data;for(var i=0;i<data.length;i+=1)data[i]=Util.parseLngLatData(data[i])}return data},xy2arr:function(xys){for(var r=[],i=0,len=xys.length;i<len;i+=1)r[i]=[xys[i].x,xys[i].y];return r},parseSize:function(data){return Util.isArray(data)?new Size(data[0],data[1]):data},getDeltaCenter:function(localCenter,frameState){var deltaX,localDeltaCenter=[0,0],zoom=Util.getOptimalZoom(frameState.viewState.zoom);return localCenter&&13<=zoom?(zoom=lcs.getSize(),frameState=frameState.viewState.centerCoord,frameState=lcs.getLocalByCoord([frameState[0],frameState[1]]),deltaX=localCenter.x-frameState.x,frameState=localCenter.y-frameState.y,0!=deltaX&&(deltaX*=zoom[0],localDeltaCenter[0]=deltaX),0!=frameState&&(frameState*=zoom[1],localDeltaCenter[1]=frameState)):localCenter&&(localDeltaCenter[0]+=localCenter.center[0],localDeltaCenter[1]+=localCenter.center[1]),localDeltaCenter},checkInZooms:function(zoom,zooms){return zoom>=zooms[0]&&zoom<=zooms[1]},getTileTagByZoom:function(key,optimalZoom,forceAll){void 0===forceAll&&(forceAll=!1);key=(key=void 0===key?"":key).split(",")[0]||"";return!forceAll&&key&&optimalZoom&&TagMap[optimalZoom]||"all"},getTileTagByZ:function(z,optimalZoom,forceAll){return!(forceAll=void 0!==forceAll&&forceAll)&&z&&optimalZoom&&TagMap[optimalZoom]||"all"},containTag:function(tag1,tag2){return!(!tag1||!tag2)&&(tag1=this.getNumberByTag(tag1),this.getNumberByTag(tag2)<=tag1)},getNumberTag:function(tag){var numberTag;switch(tag=void 0===tag?"all":tag){case"lite":numberTag=0;break;case"left":numberTag=1;break;default:numberTag=2}return numberTag},getStringTag:function(tag){var numberTag;switch(tag=void 0===tag?2:tag){case 0:numberTag=NebulaTagType.LITE;break;case 1:numberTag=NebulaTagType.LEFT;break;default:numberTag=NebulaTagType.ALL}return numberTag},getNumberByTag:function(tag){var tagNumber=0;switch(tag){case"lite":tagNumber=0;break;case"left":tagNumber=1;break;case"all":tagNumber=2}return tagNumber}};function timeoutDefer(fn){var time=+new Date,timeToCall=Math.max(0,(Browser.android?50:20)-(time-lastTime));return lastTime=time+timeToCall,globalInstance.setTimeout(fn,50)}function timeoutClear(id){globalInstance.clearTimeout(id)}function getPrefixed(name){for(var fn,prefixes=["webkit","moz","o","ms"],i=0;i<prefixes.length&&!fn;i+=1)fn=globalInstance[prefixes[i]+name];return fn}lastTime=0,Browser.isWorkerEnv?(requestFn_1=timeoutDefer,cancelFn_1=timeoutClear,originUtil.requestAnimFrame=function(fn,context,immediate,element){if(!immediate)return requestFn_1(function(){context?Util.bind(fn,context).call(context,element):fn()});context?Util.bind(fn,context).call(context,element):fn()},originUtil.cancelAnimFrame=function(id){id&&cancelFn_1.call(globalInstance,id)}):(requestFn=globalInstance.requestAnimationFrame||getPrefixed("RequestAnimationFrame")||timeoutDefer,cancelFn=globalInstance.cancelAnimationFrame||getPrefixed("CancelAnimationFrame")||getPrefixed("CancelRequestAnimationFrame")||timeoutClear,originUtil.requestAnimFrame=function(fn,context,immediate,element){if(!immediate)return requestFn(function(){context?Util.bind(fn,context).call(context,element):fn()});context?Util.bind(fn,context).call(context,element):fn()},originUtil.cancelAnimFrame=function(id){id&&cancelFn.call(globalInstance,id)}),Browser.isWorkerEnv||(originUtil.requestIdleCallback=globalInstance.requestIdleCallback?function(callback,options){return globalInstance.requestIdleCallback(callback,options)}:function(cb,options){void 0===options&&(options={});var start=Util.getTimestamp();return setTimeout(function(){cb({didTimeout:!1,timeRemaining:function(){return Math.max(0,70-(Util.getTimestamp()-start))}})},options.timeout||0)},originUtil.cancelIdleCallback=globalInstance.cancelIdleCallback?function(handler){return globalInstance.cancelIdleCallback(handler)}:function(id){clearTimeout(id)});var Util=originUtil;return Util}();function isLngLat(obj){return obj&&"AMap.LngLat"===obj.className}var CONSTS_Events={MOVE_START:"movestart",MOVING:"moving",MOVE_END:"moveend",MOVE_ALONG:"movealong"},freeSelf={clip:null,clips:[],markerAnimation:null,moveTo:function(targetPosition,params){var markerAnimation,position,targetPositionArr,duration,speed,easing,autoRotation,clip,path,eventType,lastStep,currentStep,_this=this;if(this._map||(this._map=this._parent&&this._parent.map),this._map&&targetPosition)return this._initAnimation(),this._map,markerAnimation=this.markerAnimation,position=isLngLat(position=this.getPosition())?position.toJSON():position,targetPositionArr=isLngLat(targetPosition)?targetPosition.toJSON():targetPosition,duration=(params=params||{}).duration,speed=params.speed,easing=params.easing,params=params.autoRotation,autoRotation=void 0===params||params,params=duration||(speed?this._getDuration(speed,position,targetPosition):0),clip=this._getClip({duration:params,easing:easing||"Linear"},{x:[position[0],targetPositionArr[0]],y:[position[1],targetPositionArr[1]]}),path=[new AMap.LngLat(position[0],position[1]),new AMap.LngLat(targetPositionArr[0],targetPositionArr[1])],eventType=CONSTS_Events.MOVING,lastStep=path[0],clip.on("start",function(e){var type=CONSTS_Events.MOVE_START,e=_this._getMoveStartEvent(type,e,path);_this.emit(type,e)}),clip.on("update",function(e){var e=_this._getMovingEvent(eventType,e,path,0),index=e.index;autoRotation&&!clip._hasSetRotation&&"AMap.Marker"===_this.CLASS_NAME&&(clip._hasSetRotation=!0,currentStep=path[index+1],lastStep=path[index])&&currentStep&&(!1===(index=_this._getOrientationByLngLats(lastStep,currentStep))?index=_this.lastAngle||0:_this.lastAngle=index,_this.setOrientation(index)),_this.emit(eventType,e)}),clip.on("complete",function(e){var type=CONSTS_Events.MOVE_END,e=_this._getMoveEndEvent(type,e,path);_this.emit(type,e)}),markerAnimation.addClip(clip),markerAnimation.start(),this},startMove:function(){this.markerAnimation&&(this._destroyClip(),this.markerAnimation.reset(),this.markerAnimation.start())},stopMove:function(){this.markerAnimation&&this.markerAnimation.stop()},pauseMove:function(){this.markerAnimation&&this.markerAnimation.pause()},resumeMove:function(){this.markerAnimation&&this.markerAnimation.start()},moveAlong:function(path,params){var _this=this;if(this._map||(this._map=this._parent&&this._parent.map),this._map&&path){this._initAnimation();this._map;for(var beforeClip,lastStep,currentStep,markerAnimation=this.markerAnimation,params=params||{},speed=params.speed,easing=params.easing,circlable=params.circlable,_b=params.delay,delay=void 0===_b?0:_b,_b=params.aniInterval,aniInterval=void 0===_b?0:_b,duration=params.duration,_b=params.totalDuration,params=params.autoRotation,autoRotation=void 0===params||params,clips=[],pathLen=path.length,isDurationAFunction="function"==typeof duration,duration2=duration||(_b?_b/(pathLen-1):0),isSpeedAFunction="function"==typeof speed,isDelayAFunction="function"==typeof delay,originPath=this._getOriginPath(path),firstPosition=originPath[0],this_1=(this.setPosition(firstPosition),this),i=0;i<pathLen-1;i++)!function(i){var curPath=path[i],targetPath=path[i+1],position=void 0,targetPosition=void 0,curSpeed=void 0,curDelay=void 0,curDuration=void 0;if(isLngLat(curPath)&&isLngLat(targetPath)?(position=curPath.toJSON(),targetPosition=targetPath.toJSON()):curPath.position&&targetPath.position?(position=curPath.position,targetPosition=targetPath.position,isLngLat(position)&&(position=position.toJSON()),isLngLat(targetPosition)&&(targetPosition=targetPosition.toJSON()),curSpeed=targetPath.speed,curDuration=targetPath.duration,curDelay=targetPath.delay,!curDuration&&curSpeed&&(curDuration=this_1._getDuration(curSpeed,position,targetPosition))):(position=curPath,targetPosition=targetPath),!position||!targetPosition)return;i||(lastStep=position),curSpeed=curSpeed||(isSpeedAFunction?speed(i,position):speed),curDelay=curDelay||(isDelayAFunction?delay(i,position):delay),!(curDuration=curDuration||(isDurationAFunction?duration(i,position):duration2))&&curSpeed&&(curDuration=this_1._getDuration(curSpeed,position,targetPosition));var index,clip=this_1._getClip({delay:curDelay||0,duration:curDuration,easing:easing||"Linear"},{x:[position[0],targetPosition[0]],y:[position[1],targetPosition[1]]});i||clip.on("start",function(e){var type=CONSTS_Events.MOVE_START,e=_this._getMoveStartEvent(type,e,originPath);_this.emit(type,e)}),clip.on("update",function(e){var type=CONSTS_Events.MOVING,e=_this._getMovingEvent(type,e,originPath,i),index=e.index;autoRotation&&!clip._hasSetRotation&&"AMap.Marker"===_this.CLASS_NAME&&(clip._hasSetRotation=!0,lastStep=originPath[index],currentStep=originPath[index+1],lastStep)&&currentStep&&(!1===(index=_this._getOrientationByLngLats(lastStep,currentStep))?index=_this.lastAngle||0:_this.lastAngle=index,_this.setOrientation(index)),_this.emit(type,e)}),i===pathLen-2?clip.on("complete",(index=i+2,function(e){var moveEndEvent=_this._getMoveEndEvent(CONSTS_Events.MOVE_END,e,originPath.slice(0,index)),moveEndEvent=(_this.emit(CONSTS_Events.MOVE_END,moveEndEvent),_this._getMoveEndEvent(CONSTS_Events.MOVE_ALONG,e,originPath.slice(0,index)));_this.emit(CONSTS_Events.MOVE_ALONG,moveEndEvent)})):clip.on("complete",function(){var index=i+2;return function(e){e=_this._getMoveEndEvent(CONSTS_Events.MOVE_END,e,originPath.slice(0,index));_this.emit(CONSTS_Events.MOVE_END,e)}}()),beforeClip&&beforeClip.chain(clip),beforeClip=clip,clips.push(clip)}(i);this.clips=clips,circlable&&markerAnimation.on("complete",function(){_this.setPosition(firstPosition),markerAnimation.reset();for(var _i=0,clips_1=clips;_i<clips_1.length;_i++)clips_1[_i]._hasSetRotation=!1;setTimeout(function(){markerAnimation.start()},aniInterval)}),markerAnimation&&(markerAnimation.addClip(clips[0]),this.clip=clips[0],markerAnimation.start())}},_getDuration:function(speed,pos1,pos2){return(AMap.GeometryUtil.distance(pos1,pos2)||0)/(speed=speed||1)*60*60},_getClip:function(options,keyFrame){var _this=this,options=this.clip=new chito_2(options,keyFrame);return options.on("update",function(e){var e=e.keyframe,x=e.x,e=e.y;_this.setPosition([x,e])}),options},_destroyClip:function(){var clip=this.clip,clips=this.clips;if(this.markerAnimation&&(this.markerAnimation.removeClip(clip),clip.chain()),clips)for(var _i=0,clips_2=clips;_i<clips_2.length;_i++)clips_2[_i].destroy(),0;clip.destroy(),this.clip=null,this.clips=[]},_initAnimation:function(){this.markerAnimation?this.markerAnimation&&(this._destroyClip(),this.markerAnimation.reset()):this.markerAnimation=new chito_1},_getMoveStartEvent:function(type,e,path){return{index:0,type:type,progress:0,pos:path[0],target:this,passedPos:path[0],passedPath:path.slice(0,1)}},_getMoveEndEvent:function(type,e,path){var lastIndex=path.length-1;return{index:lastIndex,type:type,progress:1,pos:path[lastIndex],target:this,passedPos:path[lastIndex],passedPath:path}},_getMovingEvent:function(type,e,path,i){var curPosition=new AMap.LngLat(e.keyframe.x,e.keyframe.y),passedPath=path.slice(0,i+1).concat(curPosition);return{index:i,type:type,progress:e.progress,pos:curPosition,target:this,passedPos:path[i],passedPath:passedPath}},_getOrientationByLngLats:function(lnglat1,lnglat2){return isLngLat(lnglat1)||(lnglat1=new AMap.LngLat(lnglat1[0],lnglat1[1])),isLngLat(lnglat2)||(lnglat2=new AMap.LngLat(lnglat2[0],lnglat2[1])),this._getRotationByLngLats(lnglat1,lnglat2)},_getOriginPath:function(path){for(var originPath=[],_i=0,path_1=path;_i<path_1.length;_i++){var curPosition=path_1[_i];isLngLat(curPosition)||Array.isArray(curPosition)?originPath.push(curPosition):curPosition.position&&originPath.push(curPosition.position)}return originPath}};AMap.extend(AMap.Marker,freeSelf),AMap.extend(AMap.Text,freeSelf),AMap.extend(AMap.LabelMarker,freeSelf)}(); '
);
_cssload_(
  "AMap.Driving",
  ".amap-lib-driving{margin:0;padding:0;color:#565656;font-family:Microsoft Yahei,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:1.5;word-wrap:break-word;background-color:#fff;border:1px solid silver}.amap-lib-driving ol,.amap-lib-driving ul{list-style:outside none none;margin:0;padding:0}.amap-call{font-size:12px;color:#fafafa;cursor:pointer;background-color:#bbb;text-align:right;padding:3px 8px 1px 3px}.amap-call,.amap-lib-driving .planTitle .clearfix a{text-decoration:underline}.amap-lib-driving .blue{color:#3d93fd}.amap-lib-driving p{margin:0}.amap-lib-driving b,.amap-lib-driving strong{font-weight:700}.amap-lib-driving dt{cursor:pointer}.amap-lib-driving .planTitle{position:relative;padding:2px 8px;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;background:#fafafa;font-size:14px;cursor:pointer}.amap-lib-driving .planTitle:hover{background:#fff}.amap-lib-driving .planTitle.current .sidebar,.amap-lib-driving .planTitle:hover .sidebar{display:block}.amap-lib-driving .planTitle span.red{color:#ff4546}.amap-lib-driving .planTitle h3{margin-top:0;font-size:13px;margin-bottom:1px}.amap-lib-driving .planTitle p{font-size:12px;margin-bottom:1px;color:#666}.amap-lib-driving .planTitle ul{display:none;margin-top:3px}.amap-lib-driving .planTitle ul li{float:left}.amap-lib-driving .planTitle ul li:last-child{border-right:none}.amap-lib-driving .planTitle ul li a{background-repeat:no-repeat;color:#00f;font-size:12px;height:16px;line-height:16px;padding-right:8px;text-indent:20px}.amap-lib-driving .planTitle ul li a.icon-share{padding-left:0;background-position:0}.amap-lib-driving .icon-arrow-up{background-image:url(https://webapi.amap.com/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-driving .planTitle .sidebar{display:none;position:absolute;width:30px;height:30px;top:50%;right:0;pointer-events:none;margin-top:-15px}.amap-lib-driving .planTitle .sidebar div{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%;transition:all .3s ease-in 0s;-webkit-transition:all .3s ease-in 0s;-moz-transition:all .3s ease-in 0s;background-image:url(https://webapi.amap.com/theme/v1.3/images/newpc/icon/arrow-down.png)}.amap-lib-driving .planTitle .sidebar div.expand{background-image:url(https://webapi.amap.com/theme/v1.3/images/newpc/icon/arrow-up.png)}.amap-lib-driving .plan{display:none;font-size:12px;margin:0}.amap-lib-driving .plan .grey{color:#999}.amap-lib-driving .plan .blue{color:#3baeca}.amap-lib-driving .plan dt{position:relative;margin-left:35px;line-height:20px;border-bottom:1px solid #f0f0f0;padding-bottom:3px;padding-top:3px}.amap-lib-driving .plan dt:hover{background:#fafafa}.amap-lib-driving .plan dt span.grey{font-weight:400}.amap-lib-driving .plan dt span.line{padding-left:5px;padding-right:5px;display:inline-block;line-height:22px;color:#fff;background:#3baeca;text-indent:0}.amap-lib-driving .plan dt:first-child{border-top:1px solid #f0f0f0}.amap-lib-driving .plan dt .beforedt{left:-30px;border-radius:50%;background-color:#fff;background-position:50%;background-repeat:no-repeat;text-indent:0;text-align:center;font-size:12px;z-index:10}.amap-lib-driving .beforedt{top:15px;left:-22px;height:100%;width:4px;z-index:-1;position:absolute;background-color:#e5e7e8}.amap-lib-driving .afterdt{position:absolute}.amap-lib-driving .plan dt.end,.amap-lib-driving .plan dt.start,.amap-lib-driving .plan dt.via{font-size:14px}.amap-lib-driving .plan dt.end .beforedt,.amap-lib-driving .plan dt.start .beforedt,.amap-lib-driving .plan dt.via .beforedt{margin-top:-10px;width:20px;height:20px;line-height:20px;color:#fff;background-image:url(https://webapi.amap.com/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan dt.start .beforedt{background-position:-47px -104px}.amap-lib-driving .plan dt.via .beforedt{background-position:-85px -104px}.amap-lib-driving .plan dt.end .beforedt{background-position:-126px -104px}.amap-lib-driving .plan dt.end .afterdt{height:0%}.amap-lib-driving .afterdt{background-color:#e5e7e8;left:-22px;top:20px;height:500px;width:4px;z-index:9}.amap-lib-driving>.plan dt>.afterdt{height:100%}.amap-lib-driving .plan dt.walk .beforedt{left:-27px;width:10px;height:10px;margin-top:-6px;border:2px solid #ddd}.amap-lib-driving .plan dt.bus .beforedt,.amap-lib-driving .plan dt.subway .beforedt{left:-31px;width:24px;height:24px;margin-top:-12px;background-image:url(https://webapi.amap.com/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan dt.bus .afterdt{background-color:#33a7ff}.amap-lib-driving .plan dt.subway .afterdt{background-color:#3baeca}.amap-lib-driving .plan dt.bus .beforedt{background-position:-164px -102px}.amap-lib-driving .plan dt.subway .beforedt{background-position:-243px -101px}.amap-lib-driving .plan-nobus{margin:0}.amap-lib-driving .plan-nobus dt span{display:block;line-height:18px}.amap-lib-driving .plan-nobus dt .beforedt{left:-31px;width:21px;height:21px;margin-top:-12px;border:1px solid #ddd;background-image:url(https://webapi.amap.com/theme/v1.3/images/newpc/diricon.png)}.amap-lib-driving .plan-nobus dt.end .beforedt,.amap-lib-driving .plan-nobus dt.start .beforedt,.amap-lib-driving .plan-nobus dt.via .beforedt{border:none}.amap-lib-driving .plan-nobus dt.turn-go .beforedt{background-image:url(https://webapi.amap.com/theme/v1.3/images/newpc/icon/turn-go.png)}.amap-lib-driving .plan-nobus dt.turn-advance .beforedt{background-position:-46px -23px}.amap-lib-driving .plan-nobus dt.turn-left .beforedt{background-position:-87px -23px}.amap-lib-driving .plan-nobus dt.turn-right .beforedt{background-position:-124px -23px}.amap-lib-driving .plan-nobus dt.turn-keepleft .beforedt{background-position:-406px -23px}.amap-lib-driving .plan-nobus dt.turn-keepright .beforedt{background-position:-445px -23px}.amap-lib-driving .plan-nobus dt.turn-leftup .beforedt{background-position:-165px -23px}.amap-lib-driving .plan-nobus dt.turn-leftdown .beforedt{background-position:-246px -23px}.amap-lib-driving .plan-nobus dt.turn-rightup .beforedt{background-position:-206px -23px}.amap-lib-driving .plan-nobus dt.turn-rightdown .beforedt{background-position:-284px -23px}.amap-lib-driving .plan-nobus dt.turn-leftback .beforedt{background-position:-327px -23px}.amap-lib-driving .plan-nobus dt.turn-rightback .beforedt{background-position:-365px -23px}.amap-lib-driving .plan-nobus dt.turn-enterRing .beforedt{background-position:-561px -23px}.amap-lib-driving .plan-nobus dt.turn-leaveRing .beforedt{background-position:-602px -23px}.amap-lib-driving .plan-nobus dt.turn-slow .beforedt{background-position:-524px -23px}.amap-lib-driving .plan-nobus dt.turn-crosswalk .beforedt{background-position:-126px -184px}.amap-lib-driving .plan-nobus dt.turn-overpass .beforedt{background-position:-164px -184px}.amap-lib-driving .plan-nobus dt.turn-underpass .beforedt{background-position:-85px -184px}.amap-lib-driving .plan-nobus dt.turn-squarepass .beforedt{background-position:-204px -184px}.amap-lib-marker-from,.amap-lib-marker-mid,.amap-lib-marker-to{position:absolute;width:25px;height:30px;color:#e90000;background-size:100% 100%}.amap-lib-marker-from{background-image:url(https://a.amap.com/jsapi/static/image/plugin/marker/start.png);cursor:pointer}.amap-lib-marker-to{background-image:url(https://a.amap.com/jsapi/static/image/plugin/marker/end.png);cursor:pointer}.amap-lib-marker-mid{background-image:url(https://a.amap.com/jsapi/static/image/plugin/marker/mid.png)}.amap-combo-close{position:absolute;top:11px;right:10px;background:url(https://webapi.amap.com/theme/v1.3/images/amap-info.png) no-repeat -1px -151px;width:12px;height:12px;cursor:pointer}.amap-content-body{min-width:200px;max-width:240px;font-family:Helvetica,Hiragino Sans GB,Microsoft Yahei,,Arial,sans-serif;box-shadow:0 0 .5px rgba(0,0,100,.6);background:none repeat scroll 0 0 #fff;border-radius:2px;text-align:left;border:1px solid silver}.amap-combo-sharp{margin:0 auto;bottom:1px;position:relative;background:url(https://webapi.amap.com/theme/v1.3/images/amap-info.png) no-repeat -5px -564px;width:18px;height:9px}.amap-lib-infowindow{padding:0;position:relative;background-color:#fff;margin:8px}.amap-lib-infowindow-title{line-height:22px;font-size:14px;border-bottom:1px solid #99adce;padding-right:15px}.amap-lib-infowindow-content{padding-top:5px;overflow:hidden;font-size:12px;zoom:1}"
);
_jsload_(
  "AMap.Driving",
  '!function(AMap){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}var markerOffset=[-12,-30];function forOf(arr,cb){for(var i=0,len=arr.length;i<len;i++){cb(arr[i])}}var DrivingRender=function DrivingRender(initOpts){this["CLASS_NAME"]="AMap.DrivingRender";var me=this;initOpts=initOpts||{};me._styleOpts={};me._styleOpts["zIndex"]=typeof initOpts["zIndex"]==="number"?initOpts["zIndex"]:50;me._showTraffic=initOpts["showTraffic"];me._eventSelf=initOpts["eventSelf"];me.showDir=!!(initOpts?initOpts.showDir:true);me._currentRouteTitle=null;me._currentRouteOptenitem=null;me.autoRender=function(options,drivingObject){me.clear(1);if(!options||!options.data||!options.panel&&!options.map){return}this.options=options;this.hideMarkers=options["hideMarkers"]||false;if(options.map){this._infoWindow=new AMap.InfoWindow({size:new AMap.Size(0,0),isCustom:true,offset:new AMap.Pixel(0,-30)});this._overlays=[];this._route=[];this._highlightOverlay=null;if(!options.panel){this.drawRouteOverlays(0)}}if(options.panel){if(Object.prototype.toString.call(options.panel)==="[object String]"){options.panel=document.getElementById(options.panel)}if(drivingObject&&options.data.waypoints.length===0){me.listener.gotoAMap=function(){drivingObject.searchOnAMAP(options.data)};var a=document.createElement("div");a.className="amap-call";a.href="javascript:void(0)";a.innerHTML="";a.addEventListener("click",me.listener.gotoAMap);options.panel.appendChild(a)}options.panel.appendChild(this.view.createPanel(options.data));this.enableListeners()}};me.clear=function(reserve){this.clearPanel();this.clearOverlays(reserve)};me.drawRoute=function(index){var data=this.options.data,route=data.routes[index];var distance=route.distance,steps=route.steps;var walkPaths=[],drivingPaths=[];walkPaths.push([data.start.location,steps[0].path[0]]);var lastStepPath=steps[steps.length-1].path;walkPaths.push([lastStepPath[lastStepPath.length-1],data.end.location]);for(var i=0,step;i<steps.length;i++){step=steps[i];drivingPaths=drivingPaths.concat(step.path)}if(drivingPaths.length>0){drivingPaths=[drivingPaths]}drivingPaths.steps=steps;this.clearRoute();this._route=this.addOverlays([],walkPaths,drivingPaths,{strokeOpacity:.4})};me.clearRoute=function(){if(this._route){for(var i=0;i<this._route.length;i++){this._route[i].setMap(null)}this._route=[]}};me.drawRouteOverlays=function(index){var data=this.options.data,route=data.routes[index];var distance=route.distance,steps=route.steps;var walkPaths=[],drivingPaths=[],points=[];points.push(data.start);if(data.waypoints){var waypoints=data.waypoints;for(var i=0,len=waypoints.length;i<len;i++){points.push(waypoints[i])}}points.push(data.end);walkPaths.push([data.start.location,steps[0].path[0]]);var lastStepPath=steps[steps.length-1].path;walkPaths.push([lastStepPath[lastStepPath.length-1],data.end.location]);for(var _i=0,step;_i<steps.length;_i++){step=steps[_i];drivingPaths=drivingPaths.concat(step.path)}if(drivingPaths.length>0){drivingPaths=[drivingPaths]}drivingPaths.steps=steps;this.clearOverlays(1);this._overlays=this.addOverlays(points,walkPaths,drivingPaths);if(me.options["autoFitView"]){me.options.map.setFitView(this._overlays)}};me.addOverlays=function(points,walkPaths,drivingPaths,styleOptions){var _this=this;var map=this.options.map;styleOptions=styleOptions||{strokeOpacity:1};var _overlays=[];if(!this.hideMarkers){if(points[0]){if(!this.startMarker){this.startMarker=new AMap.Marker({offset:markerOffset,map:map,content:\'<div class="amap-lib-marker-from"></div>\',innerOverlay:true});this.startMarker.isOfficial=true}var start=this.startMarker;start.setPosition(points[0].location);start.setMap(map);start._data=points[0];start.on("click",this.listener.markerClick);AMap.Event.addListener(start,"click",this.listener.markerClick);_overlays.push(start)}if(points.length>1){if(!this.endMarker){this.endMarker=new AMap.Marker({offset:markerOffset,map:map,content:\'<div class="amap-lib-marker-to"></div>\',innerOverlay:true});this.endMarker.isOfficial=true}var end=this.endMarker;end.setPosition(points[points.length-1].location);end.setMap(map);end._data=points[points.length-1];end.on("click",this.listener.markerClick);AMap.Event.addListener(end,"click",this.listener.markerClick);_overlays.push(end)}for(var i=1,point;i<points.length-1;i++){if(points[i].isWaypoint){point=new AMap.Marker({map:map,offset:markerOffset,position:points[i].location,content:\'<div class="amap-lib-marker-mid"></div>\',innerOverlay:true});point._data=points[i];AMap.Event.addListener(point,"click",this.listener.markerClick)}point.isOfficial=true;_overlays.push(point)}}styleOptions=me.util.extend({},me._styleOpts,styleOptions);for(var _i2=0,drivingPath;_i2<drivingPaths.length;_i2++){var trafficGradient=undefined;if(me._showTraffic&&drivingPaths.steps){(function(){var trafficGradientValues=[];var totalDistance=0;forOf(drivingPaths.steps,function(step){if(step.tmcsPaths){forOf(step.tmcsPaths,function(tmcsPath){totalDistance+=tmcsPath.distance})}else{totalDistance+=100}});var currentDistance=0;forOf(drivingPaths.steps,function(step){if(step.tmcsPaths){forOf(step.tmcsPaths,function(tmcsPath){currentDistance+=tmcsPath.distance;trafficGradientValues.push([currentDistance/totalDistance,_this.getColorByTmcsStatus(tmcsPath.status)])})}else{currentDistance+=100;trafficGradientValues.push([currentDistance/totalDistance,_this.getColorByTmcsStatus("")])}});trafficGradient={values:trafficGradientValues}})()}drivingPath=new AMap.Polyline(me.util.extend({},styleOptions,{map:map,path:drivingPaths[_i2],lineJoin:"round",strokeColor:"#0091ff",isOutline:me.options["isOutline"],outlineColor:me.options["outlineColor"],borderWeight:2,lineGradient:trafficGradient,strokeOpacity:1,showDir:me.showDir,strokeWeight:6,innerOverlay:true}));drivingPath.isOfficial=true;_overlays.push(drivingPath);me._drivingPolyline=drivingPath}for(var _i3=0,walkPath;_i3<walkPaths.length;_i3++){walkPath=new AMap.Polyline(me.util.extend({},styleOptions,{map:map,path:walkPaths[_i3],strokeColor:"grey",strokeStyle:"dashed",strokeWeight:6,lineJoin:"bevel",innerOverlay:true}));walkPath.isOfficial=true;_overlays.push(walkPath)}if(me.showDir);return _overlays};me.getColorByTmcsStatus=function(status){var color;switch(status){case"":color="#1BAC2E";break;case"":color="#FFA700";break;case"":color="#E94B37";break;case"":color="#A81212";break;default:color="#adadad";break}return color};me.clearPanel=function(){if(this.options&&this.options.panel){var a=me.util.getElementsByClassName("amap-call","div",this.options.panel)[0];if(a){a.removeEventListener("click",me.listener.gotoAMap)}this.options.panel.innerHTML=""}};me.clearOverlays=function(reserve){if(!reserve){if(this.startMarker){this.startMarker.setMap();this.startMarker=null}if(this.endMarker){this.endMarker.setMap();this.endMarker=null}}if(this._overlays){for(var i=0,overlay;i<this._overlays.length;i++){overlay=this._overlays[i];overlay.setMap(null)}this._overlays=[]}if(this._infoWindow){this._infoWindow.close()}if(this._highlightOverlay){this._highlightOverlay.setMap(null);this._highlightOverlay=null}this.clearRoute()};me.getTitle=function(route){var policy=route.policy?" | <span class=\'blue\'>"+route.policy+"</span>":"";var result=me.util.getTime(route.time)+"("+me.util.getDistance(route.distance)+")"+policy;return result};me.util={};me.util.extend=function(dest){var sources=Array.prototype.slice.call(arguments,1),i,j,len,src;for(j=0,len=sources.length;j<len;j=j+1){src=sources[j]||{};for(i in src){if(Object.prototype.hasOwnProperty.call(src,i)){if(typeof src[i]==="function"&&typeof dest[i]==="function"){src[i].__super=dest[i]}dest[i]=src[i]}}}return dest};me.util.getDistance=function(len){if(len<=1e3){var s=len;return s+""}else{var _s=Math.round(len/10);return""+_s/100+""}};me.util.getTime=function(second){var minute=+(second/60).toFixed(0);if(minute<60){return""+minute+""}else{return""+Math.floor(minute/60)+""+minute%60+""}};me.util.domstr2dom=function(arg){var objE=document.createElement("div");objE.innerHTML=arg;return objE};me.util.getElementsByClassName=function(className,tag,parent){var testClass=new RegExp("(^|\\\\s)"+className+"(\\\\s|$)");tag=tag||"*";parent=parent||document;var elements=parent.getElementsByTagName(tag);var returnElements=[];for(var i=0,current;i<elements.length;i++){current=elements[i];if(testClass.test(current.className)){returnElements.push(current)}}return returnElements};me.enableListeners=function(){var unfocusTitles=me.util.getElementsByClassName("planTitle","div",me.options.panel);for(var i=0,unfocusTitle;i<unfocusTitles.length;i++){unfocusTitle=unfocusTitles[i];AMap.Event.addDomListener(unfocusTitle,"click",this.listener.unfocusTitleClick);AMap.Event.addDomListener(unfocusTitle,"mouseenter",this.listener.unfocusTitleMouseenter);AMap.Event.addDomListener(unfocusTitle,"mouseleave",this.listener.unfocusTitleMouseleave)}var c_divs=this.util.getElementsByClassName("*","dt",me.options.panel);for(var _i4=0,c_div;_i4<c_divs.length;_i4++){c_div=c_divs[_i4];AMap.Event.addDomListener(c_div,"click",this.listener.routeStepItem)}if(unfocusTitles.length>0){me.listener.unfocusTitleClick.call(unfocusTitles[0])}};me.listener={};me.listener.markerClick=function(){var data=this._data;if(data.type==="start"||data.type==="end"){me._infoWindow.setOffset(new AMap.Pixel(0,-30))}else{me._infoWindow.setOffset(new AMap.Pixel(0,0))}if(data.name===""||data.name===""||data.name==="");else{me._infoWindow.setContent(me.view.createInfowindowContent(data));me._infoWindow.open(me.options.map,this.getPosition())}me.options.map.setCenter(this.getPosition())};me.listener.routeStepItem=function(){if(!me.options.map){var _p=this.parentNode;var _children=_p.children;var _stepIndex;for(var i=0,child;i<_children.length;i++){child=_children[i];if(child===this){_stepIndex=i;break}}me._eventSelf.emit("panelClick",{stepIndex:_stepIndex});return}if(me._highlightOverlay){me._highlightOverlay.setMap(null)}this.style.backgroundColor="rgb(240, 240, 240)";if(me.listener.routeStepItem.last){me.listener.routeStepItem.last.style.backgroundColor=""}me.listener.routeStepItem.last=this;var p=this.parentNode;var children=p.children;var stepIndex;for(var _i5=0,_child;_i5<children.length;_i5++){_child=children[_i5];if(_child===this){stepIndex=_i5;break}}if(stepIndex===0){me.listener.markerClick.call({_data:me.options.data.start,getPosition:function getPosition(){return me.options.data.start.location}});return}if(stepIndex===children.length-1){me.listener.markerClick.call({_data:me.options.data.end,getPosition:function getPosition(){return me.options.data.end.location}});return}me._infoWindow.close();stepIndex=stepIndex-1;var step=me.options.data.routes[me._currentRouteIndex].steps[stepIndex];var highlight;highlight=new AMap.Polyline({map:me.options.map,path:step.path,strokeColor:"red",strokeOpacity:.8,strokeWeight:8,lineJoin:"round",draggable:true,innerOverlay:true});highlight.isOfficial=true;me._highlightOverlay=highlight;me.options.map.setBounds(highlight.getBounds())};me.listener.driveTitleClick=function(){me._currentRouteTitle.style.display="block";me._currentRouteOptenitem.style.display="none";me.clearOverlays()};me.listener.unfocusTitleClick=function(){var target=arguments[0]&&(arguments[0].target||arguments[0].srcElement);if(target&&target.tagName==="A"){return}if(me._currentRouteTitleStatus==="open"&&me._currentRouteTitle===this){me.view.closeCurrentPlanDiv();me.clearOverlays()}else if(me._currentRouteTitleStatus==="open"){me.view.closeCurrentPlanDiv();me.view.openPlanDiv(this)}else{me.view.openPlanDiv(this)}};me.listener.unfocusTitleMouseenter=function(e){var index=this.getAttribute("index");me.drawRoute(index);me.listener.unfocusTitleMouseenter.last=this};me.listener.unfocusTitleMouseleave=function(e){me.clearRoute()};me.view={};me.view.openPlanDiv=function(planDiv){me._currentRouteTitle=planDiv;me._currentRouteOptenitem=planDiv.nextSibling;me.util.getElementsByClassName("icon-arrow-up","div",me._currentRouteTitle)[0].className="icon-arrow-up expand";if(me.util.getElementsByClassName("clearfix","ul",me._currentRouteTitle)[0]){me.util.getElementsByClassName("clearfix","ul",me._currentRouteTitle)[0].style.display="inline-block"}me._currentRouteOptenitem.style.display="block";me._currentRouteTitleStatus="open";var index=me._currentRouteTitle.getAttribute("index");me._currentRouteIndex=index;if(me.options.map){me.drawRouteOverlays(me._currentRouteIndex)}};me.view.closeCurrentPlanDiv=function(){var title=me.util.getElementsByClassName("icon-arrow-up expand","div",me._currentRouteTitle)[0];var fix=me.util.getElementsByClassName("clearfix","ul",me._currentRouteTitle)[0];if(title){title.className="icon-arrow-up"}if(fix){fix.style.display="none"}me._currentRouteOptenitem.style.display="none";me._currentRouteTitleStatus="close"};me.view.createInfowindowContent=function(data){var c=[data.name];return c.join("")};me.view.createInfowindowContent=function(data){var content=document.createElement("div");var div=document.createElement("div");div.className="amap-content-body";var c=[];c.push(\'<div class="amap-lib-infowindow">\');c.push(\'    <div class="amap-lib-infowindow-title">\'+data.name+\'&nbsp;<a href="http://detail.amap.com/detail/\'+data.id+"?spm=0.0.0.0.sWhSmy&citycode="+data.citycode+\'" target="_blank"></a></div>\');c.push(\'    <div class="amap-lib-infowindow-content">\');c.push(\'        <div class="amap-lib-infowindow-content-wrap">\');c.push("             <div>"+data.address+"</div>");if(data.tel){c.push("             <div>"+data.tel+"</div>")}c.push("        </div>");c.push("    </div>");c.push("</div>");div.innerHTML=c.join("");var sharp=document.createElement("div");sharp.className="amap-combo-sharp";div.appendChild(sharp);var close=document.createElement("div");close.className="amap-combo-close";div.appendChild(close);close.href="javascript: void(0)";AMap.Event.addDomListener(close,"touchend",function(e){me._infoWindow["close"]()});AMap.Event.addDomListener(close,"click",function(e){me._infoWindow["close"]()});content.appendChild(div);content.appendChild(close);content.appendChild(sharp);return content};me.view.createPanel=function(data){var div=document.createElement("div");div.className="amap-lib-driving";if(!data.routes){div.innerHTML="";return div}var result=[];for(var i=0,route;i<data.routes.length;i++){route=data.routes[i];var isDisplay=false,title=me.getTitle(route);result=result.concat(me.view.createTitleDiv(i,title,route,!isDisplay));result=result.concat(me.view.createOpenitemDiv(i,title,data,isDisplay))}div.innerHTML=result.join("");return div};me.view.createTitleDiv=function(index,title,route,isDisplay){var steps=route.steps,roadNameArray=[],roadNames="",roadNames2="";var temp="";for(var i=0,road;i<steps.length;i++){road=steps[i].road;if(road&&road!==temp){roadNameArray.push(road);temp=road}}roadNames=roadNameArray.join(">");if(roadNameArray.length>4){roadNameArray.splice(2,roadNameArray.length-4,"......");roadNames2=roadNameArray.join(">")}else{roadNames2=roadNames}var r=[];r.push(\'<div class="planTitle" index="\'+index+\'">\');r.push("    <h3  class=\'planTitle_route\' title=\\""+roadNames+\'">\');r.push("         <b>"+roadNames2+"</b>");r.push("    </h3>");r.push("    <p>"+title+"</p>");var d=me.options.data;r.push(\'    <div class="sidebar">\');r.push(\'        <div class="icon-arrow-up" href="javascript:void(0)"></div>\');r.push("    </div>                ");r.push("</div>");return r};me.view.createOpenitemDiv=function(index,title,data,isDisplay){var route=data.routes[index],steps=route.steps;var r=[];r.push(\'<dl class="plan plan-nobus">\');r.push("    <dt class=\\"start\\"><div class=\'beforedt\'></div><div class=\'afterdt\'></div><b>"+data.start.name+"</b></dt>");for(var i=0,step;i<steps.length;i++){step=steps[i];r.push(\' <dt class="route turn-\'+me.getSigns(step.action)+\'"  index="\'+index+\'">                \');r.push("  <div class=\'beforedt\'></div><div class=\'afterdt\'></div>       "+step.instruction);r.push(" </dt>")}r.push("    <dt class=\\"end\\"><div class=\'beforedt\'></div><b>"+data.end.name+"</b></dt>");r.push("</dl>");return r};me.getSigns=function(action){var signs="";var routeSign={"":"left","":"right","":"keepleft","":"keepright","":"leftup","":"leftdown","":"rightup","":"rightdown","":"leftback","":"rightback","":"enterRing","":"leaveRing","":"slow","":"leftup","":"leftdown","":"rightup","":"rightdown","":"crosswalk","":"overpass","":"underpass","":"squarepass"};signs=routeSign[action];if(!signs){signs="advance"}return signs}};var GetLL=function(){function GetLL(city){_classCallCheck(this,GetLL);this.city=city||"";this.CLASS_NAME="AMap.GetLL"}_createClass(GetLL,[{key:"getCity",value:function getCity(cbk){var url=AMap.getConfig().protocol+"://webapi.amap.com/maps/ipCity";AMap.WebService.get(url,{},function(status,data){if(status==="complete"){cbk(data)}else{cbk({})}})}},{key:"get",value:function get(keywordsList,defaultCity,cbk){var psearch=new PlaceSearch({extensions:"all"});var result=[];var getOne=function getOne(){if(keywordsList.length){var keyAndcity=keywordsList.shift();var keyword=keyAndcity["keyword"];var city=keyAndcity["city"]||defaultCity;if(!city){city=""}psearch["setCity"](city);psearch.search(keyword,function(status,data){if(status==="error"){cbk("error",data)}else if(status==="complete"){if(data["poiList"]&&data["poiList"]["pois"].length){result.push(data["poiList"]["pois"][0]);if(keywordsList.length){getOne()}else{cbk("complete",result)}}else{if(!city){cbk("no_city",keyAndcity)}else{cbk("no_poi",keyAndcity)}}}else if(status==="no_data"){if(!city){cbk("no_city",keyAndcity)}else{cbk("no_poi",keyAndcity)}}})}};getOne()}}]);return GetLL}();var PlaceSearch=function(_AMap$Event){_inherits(PlaceSearch,_AMap$Event);var _super=_createSuper(PlaceSearch);function PlaceSearch(opt){var _this;_classCallCheck(this,PlaceSearch);_this=_super.call(this);_this.closed=false;_this.opt=AMap.extend({showCover:true,autoFitView:true},opt||{});_this.opt["pageIndex"]=_this.opt["pageIndex"]||1;_this.opt["pageSize"]=typeof _this.opt["pageSize"]!=="number"||_this.opt["pageSize"]<0?10:_this.opt["pageSize"]>50?50:_this.opt["pageSize"];_this.url=AMap.getConfig().server+"/v3/place";return _this}_createClass(PlaceSearch,[{key:"search",value:function search(keyword,cbk){var params={s:"rsv3",children:+(this.opt["children"]?"1":"")};var map={city:"city",rankBy:"sortrule",type:"types",pageIndex:"page",pageSize:"offset",extensions:"extensions",citylimit:"citylimit"};this._mergeParams(this.opt,map,params);this._query(this.url+"/text",params,cbk,{keywords:keyword||""},"KEYWORD",arguments)}},{key:"setCity",value:function setCity(city){AMap.BuryPoint.add(this,"setCity");this.opt["city"]=city}},{key:"_mergeParams",value:function _mergeParams(data,map,params){for(var i in data){if(typeof data[i]!=="undefined"&&typeof map[i]!=="undefined"){params[map[i]]=data[i]}}return params}},{key:"_query",value:function _query(url,params,cbk,encodeURICom,type,args){var _this2=this;url=url+(params.length>0?"?"+params.join("&"):"");AMap.WebService.get(url,AMap.extend({type_:type,antiCrab:true},params,encodeURICom),function(status,data){if(status==="complete"){_this2._onComplete(data,cbk,type,args)}else{_this2._onError(data,cbk)}})}},{key:"_onComplete",value:function _onComplete(data,cbk,type,args){if(this.closed){return}var result;if(!parseInt(data.status,10)){result={info:data["info"]};AMap.Event.trigger(this,"error",result);if(cbk&&typeof cbk==="function"){cbk("error",data["info"])}}else{result={info:data["info"],poiList:{}};result["poiList"]={pois:[],count:parseInt(data["count"],10),pageIndex:this.opt["pageIndex"],pageSize:this.opt["pageSize"]};if(data["pois"]){for(var i=0;i<data["pois"].length;i+=1){var tmp=data["pois"][i];result["poiList"]["pois"][i]=this._parsePOI(tmp)}}if(data["suggestion"]&&data["suggestion"]["keywords"].length){result["keywordList"]=data["suggestion"]["keywords"];result["info"]="TIP_KEYWORDS"}if(data["suggestion"]&&data["suggestion"]["cities"].length){var cities=data["suggestion"]["cities"],citiesnew=[];for(var j=0;j<cities.length;j+=1){var city=cities[j];for(var pro in city){if(city.hasOwnProperty(pro)&&pro==="num"){city["count"]=city[pro];delete city[pro]}}city["count"]=parseInt(city["count"]);citiesnew.push(city)}result["info"]="TIP_CITIES";result["cityList"]=citiesnew}if((!data["count"]||parseInt(data["count"],10)===0)&&!result["cityList"]&&!result["keywordList"]){result["info"]=data["info"].toLowerCase()==="ok"?"NO_DATA":data["info"];AMap.Event.trigger(this,"complete",result);if(cbk&&typeof cbk==="function"){if(result["cityList"]||result["keywordList"]){cbk("complete",result)}else{cbk("no_data",{})}}}else{AMap.Event.trigger(this,"complete",result);if(cbk&&typeof cbk==="function"){cbk("complete",result)}}}}},{key:"_parsePOI",value:function _parsePOI(poi){this._formatFields(poi);function getLngLat(location){if(location){var lngLat=location.split(",");return new AMap.LngLat(+lngLat[0],+lngLat[1])}else{return null}}var poiBaseInfo={id:poi["id"],name:poi["name"],type:poi["type"],location:getLngLat(poi["location"]),address:poi["address"],tel:poi["tel"],distance:parseFloat(poi["distance"]),shopinfo:poi["shopinfo"]};if(poi["shopinfo"]&&poi["shopinfo"].length){poiBaseInfo["shopinfo"]=poi["shopinfo"]}else{poiBaseInfo["shopinfo"]=""}if(poi["children"]){var children=poi["children"];for(var i=0,len=children.length;i<len;i++){children[i]["location"]=getLngLat(children[i]["location"])}poiBaseInfo["children"]=children}var poiDetailInfo={website:poi["website"],pcode:poi["pcode"],citycode:poi["citycode"],adcode:poi["adcode"],postcode:poi["postcode"+""],pname:poi["pname"],cityname:poi["cityname"],adname:poi["adname"],email:poi["email"],photos:poi["photos"],entr_location:getLngLat(poi["entr_location"]),exit_location:getLngLat(poi["exit_location"]),groupbuy:poi["groupbuy_num"]!=="0",discount:poi["discount_num"]!=="0"};if(poi["indoor_map"]==="1"){poiDetailInfo["indoor_map"]=true;poiDetailInfo["indoor_data"]={cpid:this._parseString(poi["indoor_data"]["cpid"]),floor:this._parseString(poi["indoor_data"]["floor"]),truefloor:this._parseString(poi["indoor_data"]["truefloor"])}}else{poiDetailInfo["indoor_map"]=false}var poiDeepInfo={groupbuys:"",discounts:"",deep_type:"",dining:"",hotel:"",cinema:"",scenic:""};if(poi["rich_content"]){if(poiDetailInfo["groupbuy"]){var groupBuyTemp=poi["rich_content"]["groupbuys"],groupBuyNum=groupBuyTemp.length;if(groupBuyNum>0){poiDeepInfo["groupbuys"]=[]}for(var n=0;n<groupBuyNum;n+=1){var groupBuy={title:groupBuyTemp[n]["title"],type_code:groupBuyTemp[n]["typecode"],type:groupBuyTemp[n]["type"],detail:groupBuyTemp[n]["detail"],stime:groupBuyTemp[n]["start_time"],etime:groupBuyTemp[n]["end_time"],count:groupBuyTemp[n]["num"],sold_num:parseInt(groupBuyTemp[n]["sold_num"]),original_price:parseFloat(groupBuyTemp[n]["original_price"]),groupbuy_price:parseFloat(groupBuyTemp[n]["groupbuy_price"]),discount:parseFloat(groupBuyTemp[n]["discount"]),ticket_address:groupBuyTemp[n]["ticket_address"],ticket_tel:groupBuyTemp[n]["ticket_tel"],photos:groupBuyTemp[n]["photos"],url:groupBuyTemp[n]["url"],provider:""};poiDeepInfo["groupbuys"].push(groupBuy)}}if(poiDetailInfo["discount"]){var discountTemp=poi["rich_content"]["discounts"],disNum=discountTemp.length;if(disNum>0){poiDeepInfo["discounts"]=[]}for(var dis=0;dis<disNum;dis+=1){var discount={title:discountTemp[dis]["title"],detail:discountTemp[dis]["detail"],start_time:discountTemp[dis]["start_time"],end_time:discountTemp[dis]["end_time"],sold_num:parseInt(discountTemp[dis]["sold_num"]),photos:discountTemp[dis]["photos"],url:discountTemp[dis]["url"],provider:""};poiDeepInfo["discounts"].push(discount)}}}if(poi["deep_info"]){poiDeepInfo["deep_type"]=poi["deep_info"]["type"];var poiDeep=poi["deep_info"];switch(poiDeepInfo["deep_type"]){case"cinema":var cinema={intro:poiDeep["intro"],rating:poiDeep["rating"],deep_src:"",parking:poiDeep["parking"],opentime_GDF:poiDeep["opentime_GDF"],opentime:poiDeep["opentime"],photos:poiDeep["photos"]};poiDeepInfo["cinema"]=cinema;poiDeepInfo["deep_type"]="CINEMA";break;case"dining":var dining={cuisines:poiDeep["cuisines"],tag:poiDeep["tag"],intro:poiDeep["intro"],rating:poiDeep["rating"],cp_rating:poiDeep["cp_rating"],deep_src:"",taste_rating:poiDeep["taste_rating"],environment_rating:poiDeep["environment_rating"],service_rating:poiDeep["service_rating"],cost:poiDeep["cost"],recommend:poiDeep["recommend"],atmosphere:poiDeep["atmosphere"],ordering_wap_url:poiDeep["ordering_wap_url"],ordering_web_url:poiDeep["ordering_web_url"],ordering_app_url:poiDeep["ordering_app_url"],opentime_GDF:poiDeep["opentime_GDF"],opentime:poiDeep["opentime"],addition:poiDeep["addition"],photos:poiDeep["photos"]};poiDeepInfo["dining"]=dining;poiDeepInfo["deep_type"]="DINING";break;case"scenic":var scenic={intro:poiDeep["intro"],rating:poiDeep["rating"],deep_src:"",level:poiDeep["level"],price:poiDeep["price"],season:poiDeep["season"],recommend:poiDeep["recommend"],theme:poiDeep["theme"],ordering_wap_url:poiDeep["ordering_wap_url"],ordering_web_url:poiDeep["ordering_web_url"],opentime_GDF:poiDeep["opentime_GDF"],opentime:poiDeep["opentime"],photos:poiDeep["photos"]};poiDeepInfo["scenic"]=scenic;poiDeepInfo["deep_type"]="SCENIC";break;case"hotel":var hotel={rating:poiDeep["rating"],star:poiDeep["star"],intro:poiDeep["intro"],lowest_price:poiDeep["lowest_price"],faci_rating:poiDeep["faci_rating"],health_rating:poiDeep["health_rating"],environment_rating:poiDeep["environment_rating"],service_rating:poiDeep["service_rating"],traffic:poiDeep["traffic"],addition:poiDeep["addition"],deep_src:"",photos:poiDeep["photos"]};poiDeepInfo["hotel"]=hotel;poiDeepInfo["deep_type"]="HOTEL";break}}var rePoi={};for(var baseK in poiBaseInfo){if(poiBaseInfo.hasOwnProperty(baseK)){rePoi[baseK]=poiBaseInfo[baseK]}}if(this.opt["extensions"]&&this.opt["extensions"]!=="base"){for(var deepK in poiDeepInfo){if(poiDeepInfo.hasOwnProperty(deepK)){if(poiDeepInfo[deepK]){rePoi[deepK]=poiDeepInfo[deepK]}}}for(var detailK in poiDetailInfo){if(poiDetailInfo.hasOwnProperty(detailK)){rePoi[detailK]=poiDetailInfo[detailK]}}if(poi.biz_ext){for(var key in poi.biz_ext){if(poi.biz_ext.hasOwnProperty(key)&&poi.biz_ext[key].length&&rePoi[key]===undefined){rePoi[key]=poi.biz_ext[key]}}}}return rePoi}},{key:"_parseString",value:function _parseString(v){var n=v instanceof Array&&v.length===0||typeof v==="undefined"?"":v;return n}},{key:"_formatFields",value:function _formatFields(obj){for(var j in obj){if(obj.hasOwnProperty(j)){obj[j]=this._parseString(obj[j]);if(_typeof(obj[j])==="object"){this._formatFields(obj[j])}}}}},{key:"_onError",value:function _onError(e,cbk){AMap.Event.trigger(this,"error",e);if(cbk&&typeof cbk==="function"){cbk("error",e["info"])}}}]);return PlaceSearch}(AMap.Event);var DrivingPolicy=AMap.DrivingPolicy?AMap.DrivingPolicy:{LEAST_TIME:0,LEAST_FEE:1,LEAST_DISTANCE:2,REAL_TRAFFIC:4,MULTI_POLICIES:5,HIGHWAY:6,FEE_HIGHWAY:7,FEE_TRAFFIC:8,TRAFFIC_HIGHWAY:9};var Driving=function(_AMap$Event){_inherits(Driving,_AMap$Event);var _super=_createSuper(Driving);function Driving(opt){var _this2;_classCallCheck(this,Driving);_this2=_super.call(this);_this2.closed=false;_this2["CLASS_NAME"]="AMap.Driving";_this2.stampId=AMap.Util.stamp(_assertThisInitialized(_this2));_this2.opt=AMap.extend({showTraffic:true,showDir:true,policy:0,outlineColor:"#ffe",isOutline:true,autoFitView:true},opt);_this2.url=_this2.opt.serviceUrl?_this2.opt.serviceUrl:AMap.getConfig().server+"/v3/direction/driving";_this2._dodgeAreas=[];if(_this2.opt["map"]||_this2.opt["panel"]);return _this2}_createClass(Driving,[{key:"_guid",value:function _guid(){return Math.round(1e5*Math.random())}},{key:"search",value:function search(){var args=arguments;if(args.length>0){args[0]=AMap.Util.parseLngLatData(args[0]);args[1]=AMap.Util.parseLngLatData(args[1]);if(args[0].lng&&args[0].lat){this.search_.apply(this,args)}else if(args[0]instanceof Array){var this_=this;var cbk=args[1];if(!this_.getLL){this_.getLL=new GetLL}this_.getLL.getCity(function(data){var city=data["citycode"]||"";this_.getLL.get(args[0],city,function(status,result){if(status==="error"){if(cbk&&typeof cbk==="function"){cbk("error",result)}}else if(status==="complete"){var start=result[0]["exit_location"]||result[0].location;var end=result[result.length-1]["entr_location"]||result[result.length-1].location;var wps=result.slice(1,result.length-1),ps=[];for(var i=0;i<wps.length;i+=1){ps.push(wps[i]["entr_location"]||wps[i].location)}this_.search_(start,end,{waypoints:ps},args[1]||undefined,result)}else if(status==="no_poi"){args[1]&&args[1]("error",{info:""+result["city"]+""+result["keyword"]})}else if(status==="no_city"){args[1]&&args[1]("error",{info:""+result["keyword"]+""})}})})}}}},{key:"clear",value:function clear(){if(this.render){this.render["clear"]()}}},{key:"setAvoidPolygons",value:function setAvoidPolygons(areas){areas=AMap.Util.parseLngLatData(areas);this._dodgeAreas=areas}},{key:"clearAvoidPolygons",value:function clearAvoidPolygons(){this._dodgeAreas=[]}},{key:"getAvoidPolygons",value:function getAvoidPolygons(){return this._dodgeAreas}},{key:"setAvoidRoad",value:function setAvoidRoad(value){this._dodgeRoad=value}},{key:"clearAvoidRoad",value:function clearAvoidRoad(){this._dodgeRoad=""}},{key:"getAvoidRoad",value:function getAvoidRoad(){return this._dodgeRoad}},{key:"searchOnAMAP",value:function searchOnAMAP(p){var pp={};pp["t"]=0;pp["m"]=typeof p["m"]!=="undefined"?p["m"]:this.opt["policy"];var o=AMap.Util.parseLngLatData(p["origin"]);var d=AMap.Util.parseLngLatData(p["destination"]);pp["sy"]=o.lat;pp["sx"]=o.lng;pp["sname"]=p["originName"]||"";pp["dy"]=d.lat;pp["dx"]=d.lng;pp["dname"]=p["destinationName"]||""}},{key:"setProvinceAndNumber",value:function setProvinceAndNumber(province,number){if(province&&number){this.opt["province"]=province;this.opt["number"]=number}}},{key:"search_",value:function search_(origin,destination,opts,cbk,poiresult){var _this3=this;if(arguments.length===2){opts={}}if(arguments.length===3){if(typeof opts==="function"){cbk=opts;opts={}}}if(!(origin instanceof AMap.LngLat)||!(destination instanceof AMap.LngLat)){if(cbk&&typeof cbk==="function"){cbk("error","NO_PARAMS")}return}var params={origin:origin.toString(),destination:destination.toString(),extensions:this._parseString(this.opt["extensions"]),s:"rsv3"};if(this.opt["province"]&&this.opt["number"]){params["province"]=this.opt["province"];params["number"]=this.opt["number"].toUpperCase()}params["strategy"]=this._parseString(this.opt["policy"]);params["ferry"]=this._parseInt(this.opt["ferry"]+0);if(opts["waypoints"]&&opts["waypoints"].slice){opts["waypoints"]=opts["waypoints"].slice(0,16);params["waypoints"]=opts["waypoints"].join(";")}if(this._dodgeAreas.length){var avoid=[];for(var i=0;i<this._dodgeAreas.length;i+=1){avoid.push(this._dodgeAreas[i].join(";"))}params["avoidpolygons"]=avoid.join("|")}if(this._dodgeRoad){params["avoidroad"]=this._dodgeRoad}AMap.WebService.get(this.url,params,function(status,data){if(status==="complete"){_this3._onComplete(data,cbk,poiresult,{waypoints:AMap.Util.parseLngLatData(opts["waypoints"])})}else{_this3._onError(data,cbk)}})}},{key:"setPolicy",value:function setPolicy(policy){this.opt["policy"]=policy}},{key:"setLocation",value:function setLocation(city){this.opt["city"]=city}},{key:"_onError",value:function _onError(e,cbk){this.emit("error",e);if(cbk&&typeof cbk==="function"){cbk("error",e["info"])}}},{key:"_str2LngLat",value:function _str2LngLat(str){var arr=str.split(",");return new AMap.LngLat(+arr[0],+arr[1])}},{key:"_multi2Lnglat",value:function _multi2Lnglat(str){var result=[];var arr=str.split(";");for(var i=0;i<arr.length;i+=1){result[i]=this._str2LngLat(arr[i])}return result}},{key:"_parseString",value:function _parseString(v){var n=_typeof(v)==="object"||typeof v==="undefined"?"":v;return n}},{key:"_parseInt",value:function _parseInt(v){var n=parseInt(v,10);return isNaN(n)?0:n}},{key:"_parseRoutes",value:function _parseRoutes(data){var r=[];data=data["path"]?[data["path"]]:data;for(var i=0;i<data.length;i+=1){var t=data[i];r[i]={steps:this._parseStep(t["steps"]),restriction:this._parseInt(t["restriction"]),distance:this._parseInt(t["distance"]),time:this._parseInt(t["duration"]),policy:t["strategy"],tolls:this._parseInt(t["tolls"]),tolls_distance:this._parseInt(t["toll_distance"])}}return r}},{key:"_parseStep",value:function _parseStep(data){var _this4=this;var r=[];var that=this;for(var i=0;i<data.length;i+=1){var driveStep=data[i];var path=this._multi2Lnglat(driveStep["polyline"]);r[i]={start_location:path[0],end_location:path[path.length-1],instruction:this._parseString(driveStep["instruction"]),orientation:this._parseString(driveStep["orientation"]),road:this._parseString(driveStep["road"]),distance:this._parseInt(driveStep["distance"]),tolls:this._parseInt(driveStep["tolls"]),toll_distance:this._parseInt(driveStep["toll_distance"]),toll_road:this._parseString(driveStep["toll_road"]),time:this._parseInt(driveStep["duration"]),path:path,action:this._parseString(driveStep["action"]),assistant_action:this._parseString(driveStep["assistant_action"])};if(this._isArray(driveStep["cities"])){r[i]["cities"]=this._parseArray(driveStep["cities"],function(data,pro){var result;switch(pro){case"districts":result=that._parseArray(data);break;default:result=data}return result})}if(this._isArray(driveStep["tmcs"])){r[i]["tmcs"]=this._parseArray(driveStep["tmcs"],function(data,pro,arrItem){var result;switch(pro){case"distance":result=+data;break;case"polyline":arrItem["path"]=_this4._multi2Lnglat(data);result=data;break;default:result=data}return result});r[i]["tmcsPaths"]=this._mergeTmcs(r[i]["tmcs"])}}return r}},{key:"_mergeTmcs",value:function _mergeTmcs(tmcs){var paths=[],lastTail=null,i,len;var tmcsPathDistance=0;for(i=0,len=tmcs.length;i<len;i++){var path=tmcs[i]["path"];var status=tmcs[i]["status"];var tmcsStepDistance=tmcs[i]["distance"];if(!path||!path.length){return}var lastTailEndPos=lastTail&&lastTail.path[lastTail["path"].length-1];if(lastTail&&status===lastTail["status"]&&path[0].equals(lastTailEndPos)){lastTail["path"].push.apply(lastTail["path"],path);tmcsPathDistance+=tmcsStepDistance;lastTail.distance=tmcsPathDistance}else{paths.push({path:[].concat(path),status:status,distance:0});tmcsPathDistance=tmcsStepDistance;lastTail=paths[paths.length-1];lastTail.distance=tmcsPathDistance}}return paths}},{key:"_parseArray",value:function _parseArray(data,filter){var results=[];for(var i=0;i<data.length;i+=1){var result={};for(var pro in data[i]){if(data[i].hasOwnProperty(pro)){if(typeof filter==="function"&&(!data[i][pro]||data[i][pro].length>0)){result[pro]=filter.call(this,data[i][pro],pro,result)}else{result[pro]=data[i][pro]}}}results.push(result)}return results.length?results:null}},{key:"_isArray",value:function _isArray(array){if(Object.prototype.toString.call(array)==="[object Array]"){return true}return false}},{key:"close",value:function close(){this.closed=true}},{key:"open",value:function open(){this.closed=false}},{key:"_onComplete",value:function _onComplete(data,cbk,poiresult,extraOpts){if(this.closed){return}var result;var that=this;if(!parseInt(data["status"],10)){result={info:data["info"]};this.emit("error",result);if(cbk&&typeof cbk==="function"){cbk("error",data["info"])}}else{if(data["route"]){result={info:data["info"],origin:this._str2LngLat(data["route"]["origin"]),destination:this._str2LngLat(data["route"]["destination"]),routes:this._parseRoutes(data["route"]["paths"])};if(this.opt["extensions"]==="all"){result["taxi_cost"]=Math.ceil(data["route"]["taxi_cost"])}if(poiresult){result["start"]=poiresult[0];result["end"]=poiresult[poiresult.length-1];result["originName"]=result["start"].name;result["destinationName"]=result["end"].name;result["waypoints"]=poiresult.slice(1,poiresult.length-1);for(var i=0,len=result["waypoints"].length;i<len;i++){result["waypoints"][i]["isWaypoint"]=true}}else if(extraOpts){result["start"]={location:result["origin"],name:""};result["end"]={location:result["destination"],name:""};result["start"].type="start";result["end"].type="end";result["waypoints"]=[];if(extraOpts&&extraOpts["waypoints"]){var waypoints=extraOpts["waypoints"];for(var _i=0,_len=waypoints.length;_i<_len;_i++){result["waypoints"].push({isWaypoint:true,location:waypoints[_i],name:"",type:"waypoint"})}}}if(that.opt["map"]||that.opt["panel"]){if(!that.render){that.render=new DrivingRender({showTraffic:that.opt["showTraffic"],showDir:that.opt["showDir"],zIndex:that.opt["zIndex"],eventSelf:that})}that.render["autoRender"]({data:result,panel:that.opt["panel"],map:that.opt["map"],hideMarkers:that.opt["hideMarkers"]||false,isOutline:that.opt["isOutline"],outlineColor:that.opt["outlineColor"],autoFitView:that.opt["autoFitView"]},that)}this.emit("complete",result);if(cbk&&typeof cbk==="function"){cbk("complete",result)}}else{result={info:data["info"].toLowerCase()==="ok"?"NO_DATA":data["info"]};this.emit("complete",result);if(cbk&&typeof cbk==="function"){cbk("no_data",{})}}}}}]);return Driving}(AMap.Event);AMap.Driving=Driving;AMap.DrivingPolicy=DrivingPolicy}(window.AMap); '
);
_jsload_(
  "DomRender",
  '(function(){"use strict";var B=function(e,r){B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t))e[t]=r[t]};return B(e,r)};function f(e,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");B(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var E=function(){E=Object.assign||function e(r){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var f in t)if(Object.prototype.hasOwnProperty.call(t,f))r[f]=t[f]}return r};return E.apply(this,arguments)};function L(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;for(var i=Array(e),n=0,r=0;r<t;r++)for(var f=arguments[r],a=0,s=f.length;a<s;a++,n++)i[n]=f[a];return i}var R=typeof SuppressedError==="function"?SuppressedError:function(e,r,t){var i=new Error(t);return i.name="SuppressedError",i.error=e,i.S8t=r,i};var N=typeof global=="object"&&global&&global.Object===Object&&global;var P=typeof self=="object"&&self&&self.Object===Object&&self;var e=N||P||Function("return this")();var r=e.Symbol;var D=Object.prototype;var z=D.hasOwnProperty;var U=D.toString;var a=r?r.toStringTag:undefined;function W(e){var r=z.call(e,a),t=e[a];try{e[a]=undefined;var i=true}catch(e){}var n=U.call(e);if(i){if(r){e[a]=t}else{delete e[a]}}return n}var G=Object.prototype;var H=G.toString;function q(e){return H.call(e)}var J="[object Null]",Y="[object Undefined]";var K=r?r.toStringTag:undefined;function n(e){if(e==null){return e===undefined?Y:J}return K&&K in Object(e)?W(e):q(e)}function s(e){return e!=null&&typeof e=="object"}var b=Array.isArray;function Q(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}function Z(e){return e}var X="[object AsyncFunction]",ee="[object Function]",re="[object GeneratorFunction]",te="[object Proxy]";function fe(e){if(!Q(e)){return false}var r=n(e);return r==ee||r==re||r==X||r==te}var ae=e["__core-js_shared__"];var se=function(){var e=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.Xb||"");return e?"Symbol(src)_1."+e:""}();function ue(e){return!!se&&se in e}var oe=Function.prototype;var le=oe.toString;function u(e){if(e!=null){try{return le.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var ve=/[\\\\^$.*+?()[\\]{}|]/g;var ce=/^\\[object .+?Constructor\\]$/;var he=Function.prototype,de=Object.prototype;var ye=he.toString;var me=de.hasOwnProperty;var be=RegExp("^"+ye.call(me).replace(ve,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");function pe(e){if(!Q(e)||ue(e)){return false}var r=fe(e)?be:ce;return r.test(u(e))}function xe(e,r){return e==null?undefined:e[r]}function t(e,r){var t=xe(e,r);return pe(t)?t:undefined}var we=t(e,"WeakMap");function ke(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}var ge=800,Me=16;var Ie=Date.now;function Ae(t){var i=0,n=0;return function(){var e=Ie(),r=Me-(e-n);n=e;if(r>0){if(++i>=ge){return arguments[0]}}else{i=0}return t.apply(undefined,arguments)}}function Se(e){return function(){return e}}var $e=function(){try{var e=t(Object,"defineProperty");e({},"",{});return e}catch(e){}}();var Ce=!$e?Z:function(e,r){return $e(e,"toString",{configurable:true,enumerable:false,value:Se(r),writable:true})};var Fe=Ae(Ce);function Oe(e,r){var t=-1,i=e==null?0:e.length;while(++t<i){if(r(e[t],t,e)===false){break}}return e}var je=9007199254740991;var _e=/^(?:0|[1-9]\\d*)$/;function Be(e,r){var t=typeof e;r=r==null?je:r;return!!r&&(t=="number"||t!="symbol"&&_e.test(e))&&(e>-1&&e%1==0&&e<r)}function Te(e,r,t){if(r=="__proto__"&&$e){$e(e,r,{configurable:true,enumerable:true,value:t,writable:true})}else{e[r]=t}}function Ee(e,r){return e===r||e!==e&&r!==r}var Le=Object.prototype;var Re=Le.hasOwnProperty;function Ne(e,r,t){var i=e[r];if(!(Re.call(e,r)&&Ee(i,t))||t===undefined&&!(r in e)){Te(e,r,t)}}function Pe(e,r,t,i){var n=!t;t||(t={});var f=-1,a=r.length;while(++f<a){var s=r[f];var u=i?i(t[s],e[s],s,t,e):undefined;if(u===undefined){u=e[s]}if(n){Te(t,s,u)}else{Ne(t,s,u)}}return t}var De=Math.max;function ze(f,a,s){a=De(a===undefined?f.length-1:a,0);return function(){var e=arguments,r=-1,t=De(e.length-a,0),i=Array(t);while(++r<t){i[r]=e[a+r]}r=-1;var n=Array(a+1);while(++r<a){n[r]=e[r]}n[a]=s(i);return ke(f,this,n)}}function Ue(e,r){return Fe(ze(e,r,Z),e+"")}var We=9007199254740991;function Ge(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=We}function He(e){return e!=null&&Ge(e.length)&&!fe(e)}function Ve(e,r,t){if(!Q(t)){return false}var i=typeof r;if(i=="number"?He(t)&&Be(r,t.length):i=="string"&&r in t){return Ee(t[r],e)}return false}function qe(s){return Ue(function(e,r){var t=-1,i=r.length,n=i>1?r[i-1]:undefined,f=i>2?r[2]:undefined;n=s.length>3&&typeof n=="function"?(i--,n):undefined;if(f&&Ve(r[0],r[1],f)){n=i<3?undefined:n;i=1}e=Object(e);while(++t<i){var a=r[t];if(a){s(e,a,t,n)}}return e})}var Je=Object.prototype;function Ye(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||Je;return e===t}function Ke(e,r){var t=-1,i=Array(e);while(++t<e){i[t]=r(t)}return i}var Qe="[object Arguments]";function Ze(e){return s(e)&&n(e)==Qe}var Xe=Object.prototype;var er=Xe.hasOwnProperty;var rr=Xe.propertyIsEnumerable;var tr=Ze(function(){return arguments}())?Ze:function(e){return s(e)&&er.call(e,"callee")&&!rr.call(e,"callee")};function ir(){return false}var nr=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var fr=nr&&typeof module=="object"&&module&&!module.nodeType&&module;var ar=fr&&fr.exports===nr;var sr=ar?e.Zb:undefined;var ur=sr?sr.isBuffer:undefined;var or=ur||ir;var lr="[object Arguments]",vr="[object Array]",cr="[object Boolean]",hr="[object Date]",dr="[object Error]",yr="[object Function]",mr="[object Map]",br="[object Number]",pr="[object Object]",xr="[object RegExp]",wr="[object Set]",kr="[object String]",gr="[object WeakMap]";var Mr="[object ArrayBuffer]",Ir="[object DataView]",Ar="[object Float32Array]",Sr="[object Float64Array]",$r="[object Int8Array]",Cr="[object Int16Array]",Fr="[object Int32Array]",Or="[object Uint8Array]",jr="[object Uint8ClampedArray]",_r="[object Uint16Array]",Br="[object Uint32Array]";var i={};i[Ar]=i[Sr]=i[$r]=i[Cr]=i[Fr]=i[Or]=i[jr]=i[_r]=i[Br]=true;i[lr]=i[vr]=i[Mr]=i[cr]=i[Ir]=i[hr]=i[dr]=i[yr]=i[mr]=i[br]=i[pr]=i[xr]=i[wr]=i[kr]=i[gr]=false;function Tr(e){return s(e)&&Ge(e.length)&&!!i[n(e)]}function Er(r){return function(e){return r(e)}}var Lr=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var o=Lr&&typeof module=="object"&&module&&!module.nodeType&&module;var Rr=o&&o.exports===Lr;var Nr=Rr&&N.process;var Pr=function(){try{var e=o&&o.Qb&&o.Qb("util").types;if(e){return e}return Nr&&Nr.tg&&Nr.tg("util")}catch(e){}}();var Dr=Pr&&Pr.rg;var zr=Dr?Er(Dr):Tr;var Ur=Object.prototype;var Wr=Ur.hasOwnProperty;function Gr(e,r){var t=b(e),i=!t&&tr(e),n=!t&&!i&&or(e),f=!t&&!i&&!n&&zr(e),a=t||i||n||f,s=a?Ke(e.length,String):[],u=s.length;for(var o in e){if((r||Wr.call(e,o))&&!(a&&(o=="length"||n&&(o=="offset"||o=="parent")||f&&(o=="buffer"||o=="byteLength"||o=="byteOffset")||Be(o,u)))){s.push(o)}}return s}function Hr(r,t){return function(e){return r(t(e))}}var Vr=Hr(Object.keys,Object);var qr=Object.prototype;var Jr=qr.hasOwnProperty;function Yr(e){if(!Ye(e)){return Vr(e)}var r=[];for(var t in Object(e)){if(Jr.call(e,t)&&t!="constructor"){r.push(t)}}return r}function Kr(e){return He(e)?Gr(e):Yr(e)}var Qr=Object.prototype;var Zr=Qr.hasOwnProperty;var l=qe(function(e,r){if(Ye(r)||He(r)){Pe(r,Kr(r),e);return}for(var t in r){if(Zr.call(r,t)){Ne(e,t,r[t])}}});var v=t(Object,"create");function Xr(){this.ng=v?v(null):{};this.size=0}function et(e){var r=this.has(e)&&delete this.ng[e];this.size-=r?1:0;return r}var rt="__lodash_hash_undefined__";var tt=Object.prototype;var it=tt.hasOwnProperty;function nt(e){var r=this.ng;if(v){var t=r[e];return t===rt?undefined:t}return it.call(r,e)?r[e]:undefined}var ft=Object.prototype;var at=ft.hasOwnProperty;function st(e){var r=this.ng;return v?r[e]!==undefined:at.call(r,e)}var ut="__lodash_hash_undefined__";function ot(e,r){var t=this.ng;this.size+=this.has(e)?0:1;t[e]=v&&r===undefined?ut:r;return this}function c(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}c.prototype.clear=Xr;c.prototype["delete"]=et;c.prototype.get=nt;c.prototype.has=st;c.prototype.set=ot;function lt(){this.ng=[];this.size=0}function vt(e,r){var t=e.length;while(t--){if(Ee(e[t][0],r)){return t}}return-1}var ct=Array.prototype;var ht=ct.splice;function dt(e){var r=this.ng,t=vt(r,e);if(t<0){return false}var i=r.length-1;if(t==i){r.pop()}else{ht.call(r,t,1)}--this.size;return true}function yt(e){var r=this.ng,t=vt(r,e);return t<0?undefined:r[t][1]}function mt(e){return vt(this.ng,e)>-1}function bt(e,r){var t=this.ng,i=vt(t,e);if(i<0){++this.size;t.push([e,r])}else{t[i][1]=r}return this}function h(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}h.prototype.clear=lt;h.prototype["delete"]=dt;h.prototype.get=yt;h.prototype.has=mt;h.prototype.set=bt;var d=t(e,"Map");function pt(){this.size=0;this.ng={hash:new c,map:new(d||h),string:new c}}function xt(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function wt(e,r){var t=e.ng;return xt(r)?t[typeof r=="string"?"string":"hash"]:t.map}function kt(e){var r=wt(this,e)["delete"](e);this.size-=r?1:0;return r}function gt(e){return wt(this,e).get(e)}function Mt(e){return wt(this,e).has(e)}function It(e,r){var t=wt(this,e),i=t.size;t.set(e,r);this.size+=t.size==i?0:1;return this}function y(e){var r=-1,t=e==null?0:e.length;this.clear();while(++r<t){var i=e[r];this.set(i[0],i[1])}}y.prototype.clear=pt;y.prototype["delete"]=kt;y.prototype.get=gt;y.prototype.has=Mt;y.prototype.set=It;function At(e,r){var t=-1,i=r.length,n=e.length;while(++t<i){e[n+t]=r[t]}return e}function St(){this.ng=new h;this.size=0}function $t(e){var r=this.ng,t=r["delete"](e);this.size=r.size;return t}function Ct(e){return this.ng.get(e)}function Ft(e){return this.ng.has(e)}var Ot=200;function jt(e,r){var t=this.ng;if(t instanceof h){var i=t.ng;if(!d||i.length<Ot-1){i.push([e,r]);this.size=++t.size;return this}t=this.ng=new y(i)}t.set(e,r);this.size=t.size;return this}function p(e){var r=this.ng=new h(e);this.size=r.size}p.prototype.clear=St;p.prototype["delete"]=$t;p.prototype.get=Ct;p.prototype.has=Ft;p.prototype.set=jt;function _t(e,r){var t=-1,i=e==null?0:e.length,n=0,f=[];while(++t<i){var a=e[t];if(r(a,t,e)){f[n++]=a}}return f}function Bt(){return[]}var Tt=Object.prototype;var Et=Tt.propertyIsEnumerable;var Lt=Object.getOwnPropertySymbols;var Rt=!Lt?Bt:function(r){if(r==null){return[]}r=Object(r);return _t(Lt(r),function(e){return Et.call(r,e)})};function Nt(e,r,t){var i=r(e);return b(e)?i:At(i,t(e))}function Pt(e){return Nt(e,Kr,Rt)}var Dt=t(e,"DataView");var zt=t(e,"Promise");var Ut=t(e,"Set");var Wt="[object Map]",Gt="[object Object]",Ht="[object Promise]",Vt="[object Set]",qt="[object WeakMap]";var Jt="[object DataView]";var Yt=u(Dt),Kt=u(d),Qt=u(zt),Zt=u(Ut),Xt=u(we);var m=n;if(Dt&&m(new Dt(new ArrayBuffer(1)))!=Jt||d&&m(new d)!=Wt||zt&&m(zt.resolve())!=Ht||Ut&&m(new Ut)!=Vt||we&&m(new we)!=qt){m=function(e){var r=n(e),t=r==Gt?e.constructor:undefined,i=t?u(t):"";if(i){switch(i){case Yt:return Jt;case Kt:return Wt;case Qt:return Ht;case Zt:return Vt;case Xt:return qt}}return r}}var ei=m;var ri=e.Uint8Array;var ti="__lodash_hash_undefined__";function ii(e){this.ng.set(e,ti);return this}function ni(e){return this.ng.has(e)}function fi(e){var r=-1,t=e==null?0:e.length;this.ng=new y;while(++r<t){this.add(e[r])}}fi.prototype.add=fi.prototype.push=ii;fi.prototype.has=ni;function ai(e,r){var t=-1,i=e==null?0:e.length;while(++t<i){if(r(e[t],t,e)){return true}}return false}function si(e,r){return e.has(r)}var ui=1,oi=2;function li(e,r,t,i,n,f){var a=t&ui,s=e.length,u=r.length;if(s!=u&&!(a&&u>s)){return false}var o=f.get(e);if(o&&f.get(r)){return o==r}var l=-1,v=true,c=t&oi?new fi:undefined;f.set(e,r);f.set(r,e);while(++l<s){var h=e[l],d=r[l];if(i){var y=a?i(d,h,l,r,e,f):i(h,d,l,e,r,f)}if(y!==undefined){if(y){continue}v=false;break}if(c){if(!ai(r,function(e,r){if(!si(c,r)&&(h===e||n(h,e,t,i,f))){return c.push(r)}})){v=false;break}}else if(!(h===d||n(h,d,t,i,f))){v=false;break}}f["delete"](e);f["delete"](r);return v}function vi(e){var t=-1,i=Array(e.size);e.forEach(function(e,r){i[++t]=[r,e]});return i}function ci(e){var r=-1,t=Array(e.size);e.forEach(function(e){t[++r]=e});return t}var hi=1,di=2;var yi="[object Boolean]",mi="[object Date]",bi="[object Error]",pi="[object Map]",xi="[object Number]",wi="[object RegExp]",ki="[object Set]",gi="[object String]",Mi="[object Symbol]";var Ii="[object ArrayBuffer]",Ai="[object DataView]";var Si=r?r.prototype:undefined,$i=Si?Si.valueOf:undefined;function Ci(e,r,t,i,n,f,a){switch(t){case Ai:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset){return false}e=e.buffer;r=r.buffer;case Ii:if(e.byteLength!=r.byteLength||!f(new ri(e),new ri(r))){return false}return true;case yi:case mi:case xi:return Ee(+e,+r);case bi:return e.name==r.name&&e.message==r.message;case wi:case gi:return e==r+"";case pi:var s=vi;case ki:var u=i&hi;s||(s=ci);if(e.size!=r.size&&!u){return false}var o=a.get(e);if(o){return o==r}i|=di;a.set(e,r);var l=li(s(e),s(r),i,n,f,a);a["delete"](e);return l;case Mi:if($i){return $i.call(e)==$i.call(r)}}return false}var Fi=1;var Oi=Object.prototype;var ji=Oi.hasOwnProperty;function _i(e,r,t,i,n,f){var a=t&Fi,s=Pt(e),u=s.length,o=Pt(r),l=o.length;if(u!=l&&!a){return false}var v=u;while(v--){var c=s[v];if(!(a?c in r:ji.call(r,c))){return false}}var h=f.get(e);if(h&&f.get(r)){return h==r}var d=true;f.set(e,r);f.set(r,e);var y=a;while(++v<u){c=s[v];var m=e[c],b=r[c];if(i){var p=a?i(b,m,c,r,e,f):i(m,b,c,e,r,f)}if(!(p===undefined?m===b||n(m,b,t,i,f):p)){d=false;break}y||(y=c=="constructor")}if(d&&!y){var x=e.constructor,w=r.constructor;if(x!=w&&("constructor"in e&&"constructor"in r)&&!(typeof x=="function"&&x instanceof x&&typeof w=="function"&&w instanceof w)){d=false}}f["delete"](e);f["delete"](r);return d}var Bi=1;var Ti="[object Arguments]",Ei="[object Array]",Li="[object Object]";var Ri=Object.prototype;var Ni=Ri.hasOwnProperty;function Pi(e,r,t,i,n,f){var a=b(e),s=b(r),u=a?Ei:ei(e),o=s?Ei:ei(r);u=u==Ti?Li:u;o=o==Ti?Li:o;var l=u==Li,v=o==Li,c=u==o;if(c&&or(e)){if(!or(r)){return false}a=true;l=false}if(c&&!l){f||(f=new p);return a||zr(e)?li(e,r,t,i,n,f):Ci(e,r,u,t,i,n,f)}if(!(t&Bi)){var h=l&&Ni.call(e,"__wrapped__"),d=v&&Ni.call(r,"__wrapped__");if(h||d){var y=h?e.value():e,m=d?r.value():r;f||(f=new p);return n(y,m,t,i,f)}}if(!c){return false}f||(f=new p);return _i(e,r,t,i,n,f)}function Di(e,r,t,i,n){if(e===r){return true}if(e==null||r==null||!s(e)&&!s(r)){return e!==e&&r!==r}return Pi(e,r,t,i,Di,n)}function zi(u){return function(e,r,t){var i=-1,n=Object(e),f=t(e),a=f.length;while(a--){var s=f[u?a:++i];if(r(n[s],s,n)===false){break}}return e}}var Ui=zi();function Wi(e,r){return e&&Ui(e,r,Kr)}function Gi(f,a){return function(e,r){if(e==null){return e}if(!He(e)){return f(e,r)}var t=e.length,i=a?t:-1,n=Object(e);while(a?i--:++i<t){if(r(n[i],i,n)===false){break}}return e}}var Hi=Gi(Wi);function Vi(e){return typeof e=="function"?e:Z}function qi(e,r){var t=b(e)?Oe:Hi;return t(e,Vi(r))}function Ji(e,r){return Di(e,r)}function Yi(e){return e===undefined}var Ki=13;var V=[2,26];var ie={ID:"__id__",Rp:V[1],Mp:V[0],jp:.8,Pp:.2,YM:5,KM:{dom:"div",id:"_amap_custom_labellayer_div_",className:"amap-layer",style:{cssText:"position:absolute;top:0;left:0;",zIndex:"",width:"",height:"",visible:""}},Dp:{Op:180,Ad:70,Td:360,t1:300,e1:30,Bd:Math.PI/10},XM:{top:3,right:3,bottom:3,left:3},JM:{ZM:"top",QM:"right",tj:"bottom",LEFT:"left",nj:"middle",ij:"center",ej:"alphabetic"},oj:{CLICK:"click",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",aj:"touchstart",uj:"touchend"},sj:{rank:1,angle:0,opacity:1,offset:[0,0],zooms:V,icon:{type:"image",image:"://visuallocal.amap.com/public/poi-marker.png",clipOrigin:[0,0],clipSize:[36,36],size:[36,36],anchor:"bottom-center",angel:0,qq:true,zooms:V},text:{type:"billboard",direction:"top",offset:[0,0],zooms:V,style:{fj:6,fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fillColor:[0,0,0,1],strokeWidth:0,strokeColor:[.988,.988,.988,1],borderColor:"transparent",padding:[3,3,3,3],backgroundColor:""}}},hj:{cj:{opacity:.2},vj:"fadeIn",lj:"fadeOut",dj:{bj:"start",RUNNING:"running",pj:"complete"},yj:{mj:"opacity",gj:"size"}},_d:3,wj:"_AMap_sdf_com_words",Mj:128,pc:["://sdf.amap.com","://sdf01.amap.com","://sdf02.amap.com","://sdf03.amap.com","://sdf04.amap.com"],sp:4,Cd:200/256,Ld:205/256,Aj:{kj:"",Oj:""},xj:"bufferChanged",Ij:"frameBufferChanged",Tj:"combineFrameBufferChanged",ic:1,ud:13,Cj:12,Ej:"__icon_combination",Nj:"__text_combination",Lj:{file:{0:"://c-webapi.amap.com/style_icon/2.0/icon-normal-big.png",1:"://c-webapi.amap.com/style_icon/2.0/icon-biz-big.png"},size:[40,40],Rj:10},Kp:{buffer:3,family:"ios9",size:24},_n:{Uj:[0,0,0,1],Gp:[0,0,0,0]},gH:"sdf",RB:"sdfJson",FN:"version"};var Qi;(function(e){e["nebula"]="nebula";e["nebulaLabel"]="nebulaLabel"})(Qi||(Qi={}));var ne;(function(e){e[e["dynamic"]=0]="dynamic";e[e["icon"]=1]="icon"})(ne||(ne={}));var Zi;(function(e){e["BLOB"]="blob";e["TOLOAD"]="toload";e["LOADING"]="loading";e["LOADED"]="loaded";e["UNLOADED"]="unloaded";e["ERROR"]="error";e["RELOADING"]="reloading";e["UNCOMBINED"]="uncombined";e["COMBINING"]="combining";e["COMBINED"]="combined"})(Zi||(Zi={}));var Xi=function(){function e(e,r){this.Ci=e;this.mask=r}e.wi={ZERO:0,ONE:1,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771};e.tH=[true,true,true,true];e.iH=[false,false,false,false];e.disabled=new e([e.wi.ONE,e.wi.ZERO,e.wi.ONE,e.wi.ZERO],e.iH);e.Mi=new e([e.wi.ONE,e.wi.ZERO,e.wi.ONE,e.wi.ZERO],e.tH);e.Ri=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.zi=new e([e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.Si=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ONE_MINUS_SRC_ALPHA],e.tH);e.eee=new e([e.wi.SRC_ALPHA,e.wi.ONE_MINUS_SRC_ALPHA,e.wi.ONE,e.wi.ZERO],e.tH);return e}();var x=function(){function e(e,r,t){this.stencilFunc=e;this.stencilOp=r;this.stencilMask=t}e.wi={NOTEQUAL:517,ALWAYS:519,EQUAL:514,GEQUAL:518,GREATER:516,LESS:513,NEVER:512,KEEP:7680,REPLACE:7681,ZERO:0,INCR_WRAP:34055,INCR:7682,DECR:7683};e.disable=new e({test:e.wi.ALWAYS,Li:0,mask:0},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],0);e.Ai=new e({test:e.wi.ALWAYS,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);e.Ti=new e({test:e.wi.LESS,Li:240,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.nH=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.$H=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.DH=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.FH=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.DECR],255);e.PH=new e({test:e.wi.ALWAYS,Li:255,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR],255);e.HH=new e({test:e.wi.NOTEQUAL,Li:1,mask:1},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.js=new e({test:e.wi.NOTEQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.AY=new e({test:e.wi.EQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.SY=new e({test:e.wi.ALWAYS,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);e.TE=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR],255);e.FE=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.ZERO],255);e.test=new e({test:e.wi.NOTEQUAL,Li:254,mask:255},[e.wi.ZERO,e.wi.ZERO,e.wi.INCR],255);e.HE=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],0);e.ree=new e({test:e.wi.EQUAL,Li:0,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.iee=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.KEEP],255);e.nee=new e({test:e.wi.EQUAL,Li:1,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.INCR_WRAP],255);e.fee=new e({test:e.wi.NOTEQUAL,Li:254,mask:255},[e.wi.KEEP,e.wi.KEEP,e.wi.REPLACE],255);return e}();var w=typeof self===undefined?window:self;var en=function(e){var r=[];for(var t=1;t<arguments.length;t++){r[t-1]=arguments[t]}if(!Boolean(e)){console.log.apply(console,r)}};var rn=typeof window!=="undefined"?window.URL||window.webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}}:URL||webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}};var k=function(){function e(e){this.Oi=Nn;this.gl=e.gl;this.default=this.Fi();this.current=this.Fi();this.Pi=false}e.prototype.set=function(e){this.current=e};e.prototype.get=function(){return this.current};e.prototype.setDirty=function(){this.Pi=true};e.prototype.reset=function(){this.set(this.default)};e.prototype.ji=function(e){return this.Pi||!this.Oi(e,this.current)};return e}();var tn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.BLEND)}else{r.disable(r.BLEND)}this.current=e;this.Pi=false};return r}(k);var nn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};r.prototype.set=function(e){var r=this.current;if(e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&!this.Pi){return}this.gl.viewport(e[0],e[1],e[2],e[3]);this.current=e;this.Pi=false};return r}(k);var fn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.DEPTH_TEST);r.depthFunc(r.LEQUAL)}else{r.disable(r.DEPTH_TEST)}this.current=e;this.Pi=false};return r}(k);var an=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return{test:this.gl.DEPTH_TEST,aee:this.gl.LESS}};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.depthFunc(e.aee);this.current=e;this.Pi=false};return r}(k);var sn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.STENCIL_TEST)}else{r.disable(r.STENCIL_TEST)}this.current=e;this.Pi=false};return r}(k);var un=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return{test:this.gl.ALWAYS,Li:1,mask:65535}};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.stencilFunc(e.test,e.Li,e.mask);this.current=e;this.Pi=false};return r}(k);var on=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).stencilOp.apply(r,e);this.current=e;this.Pi=false};return r}(k);var ln=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;if(e){r.enable(r.CULL_FACE)}else{r.disable(r.CULL_FACE)}this.current=e;this.Pi=false};return r}(k);var vn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[this.gl.ONE,this.gl.ZERO]};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.blendFunc(e[0],e[1]);this.current=e;this.Pi=false};return r}(k);var cn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl.ONE;var r=this.gl.ZERO;return[e,r,e,r]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).blendFuncSeparate.apply(r,e);this.current=e;this.Pi=false};return r}(k);var hn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.FUNC_ADD};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.blendEquation(e);this.current=e;this.Pi=false};return r}(k);var dn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[this.gl.FUNC_ADD,this.gl.FUNC_ADD]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).blendEquationSeparate.apply(r,e);this.current=e;this.Pi=false};return r}(k);var yn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){var e=this.gl;return e.BACK};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.cullFace(e);this.current=e;this.Pi=false};return r}(k);var mn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.CCW};r.prototype.set=function(e){if(!this.ji(e)&&!this.Pi){return}this.gl.frontFace(e);this.current=e;this.Pi=false};return r}(k);var bn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 1};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.clearDepth(e);this.current=e;this.Pi=false};return r}(k);var pn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[0,0,0,0]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).clearColor.apply(r,e);this.current=e;this.Pi=false};return r}(k);var xn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 0};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.clearStencil(e);this.current=e;this.Pi=false};return r}(k);var wn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return[true,true,true,true]};r.prototype.set=function(e){var r;if(!this.ji(e)){return}(r=this.gl).colorMask.apply(r,e);this.current=e;this.Pi=false};return r}(k);var kn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return true};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.depthMask(e);this.current=e;this.Pi=false};return r}(k);var gn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return 65535};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.stencilMask(e);this.current=e;this.Pi=false};return r}(k);var Mn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,e);this.current=e;this.Pi=false};return r}(k);var In=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}if(this.current&&this.current!==e){this.current.Ni()}if(e){this.gl.useProgram(e.$i)}else{this.gl.useProgram(null)}this.current=e;this.Pi=false};return r}(k);var An=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return this.gl.TEXTURE0};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.activeTexture(this.gl.TEXTURE0+e);this.current=e;this.Pi=false};return r}(k);var Sn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}var r=this.gl;r.bindTexture(r.TEXTURE_2D,e);this.current=e;this.Pi=false};return r}(k);var $n=function(i){f(e,i);function e(e,r){var t=i.call(this,e)||this;t.context=e;t.parent=r;return t}return e}(k);var Cn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.set=function(e){if(!this.Pi&&!this.ji(e)){return}var r=this.gl;var t=this.context.bindFramebuffer.current;this.context.bindFramebuffer.set(this.parent.framebuffer);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);this.context.bindFramebuffer.set(t);this.current=e};r.prototype.Bi=function(){var e=this.current;var r=this.gl;if(e){r.deleteTexture(e);this.current=null}};r.prototype.Fi=function(){return null};return r}($n);var Fn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.set=function(e){if(!this.Pi&&!this.ji(e)){return}var r=this.gl;this.context.bindFramebuffer.set(this.parent.framebuffer);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e);this.current=e};r.prototype.Bi=function(){var e=this.current;var r=this.gl;if(e){r.deleteRenderbuffer(e);this.current=null}};r.prototype.Fi=function(){return null};return r}($n);var On=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(e&&e.xe){en(true,"WebGLBuffer deleted")}if(!this.ji(e)){return}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e);this.current=e;this.Pi=false};return r}(k);var jn=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return null};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e);this.current=e;this.Pi=false};return r}(k);var _n=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.Fi=function(){return false};r.prototype.set=function(e){if(!this.ji(e)){return}this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,e);this.current=e;this.Pi=false};return r}(k);var Bn=M["Support"];function Tn(e,r){if(e===r){return false}if(e.length!==r.length){return true}for(var t=0,i=e.length;t<i;t++){if(e[t]!==r[t]){return true}}return false}function En(e,r){if(typeof e!==typeof r){return true}if(typeof e==="object"){return Array.isArray(e)!==Array.isArray(r)}return false}function Ln(e,r){return e!==r}function Rn(e,r){if(En(e,r)){return true}switch(typeof e){case"boolean":case"number":case"string":return Ln(e,r);case"object":return Array.isArray(e)?Tn(e,r):Ln(e,r);default:return true}}function Nn(e,r){return!Rn(e,r)}var Pn=function(){function e(e,r,t){this.enable=e;this.mode=r;this.frontFace=t}e.wi={CW:2304,CCW:2305,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032};e.we=new e(false,e.wi.FRONT_AND_BACK,e.wi.CW);e._e=new e(true,e.wi.FRONT,e.wi.CW);e.back=new e(true,e.wi.BACK,e.wi.CW);return e}();var Dn=AMap["Util"];var zn=function(){function e(){this.hS=Dn.stamp(this)}e.prototype.destroy=function(){};e.prototype.fH=function(e){var r=e.Ro;var t=e.localCoord.center;var i=[r[0]-t[0],r[1]-t[1]];var n=[r[0]-t[0],r[3]-t[1]];var f=[r[2]-t[0],r[1]-t[1]];var a=[r[2]-t[0],r[3]-t[1]];return L(i,f,n,f,a,n)};e.prototype.OH=function(e,r){if(e===void 0){e=false}if(!r){return x.nH}if(r&&!e){return x.DH}if(r&&e){return x.HH}};e.prototype.BH=function(e,r){if(e===void 0){e=false}if(!r){return x.$H}if(r&&!e){return x.FH}if(r&&e){return x.PH}};return e}();var Un=M["Support"];var Wn=Un.scale;var Gn=function(){function e(){this.Lz={De:[],sizes:[]};this._f=null;this.CG=0}e.prototype.Mz=function(e){var r=e.map,t=e.R_,i=e.z_,n=e.$i;this._map=r;this.Mf=t;this.ac=i;this._f=n};e.prototype.Ce=function(e,r,t,i){if(t===void 0){t={}}var n=ie.ud,f=ie.sp;var a=this._f;var s=e.viewState,u=e.size;if(!s){return i.iterator}var L=s.mvpMatrix,R=s.zoom,N=s.viewMode;var o=u[0],l=u[1];var P=i.Sa,v=i.from,D=v===void 0?"inner":v,c=i.opacity,z=c===void 0?1:c,h=i.offset,U=h===void 0?[0,0]:h,W=i.Sz,d=i.LF,G=d===void 0?{}:d;var y=i.iterator;var m=1;if(N==="3D"){m=e.map.getView().EF()}var H=t.Rz,V=t.buffer,b=t.od,p=t.zz;r.bindFramebuffer.set(null);r.be.set([0,0,o*Wn,l*Wn]);var x=H.pp;var w=V;var k=this.fd(i.see),g=k.De,M=g===void 0?[]:g,I=k.sizes,A=I===void 0?[]:I;var S=n*f;var $=x.length;if(!w||!b){return y}if($){r.ge.set(a);a.Ae({a_vertex:{type:"vec2",buffer:w,Re:S,offset:0},a_texcoord:{type:"vec2",buffer:w,Re:S,offset:2*f},a_origin:{type:"vec2",buffer:w,Re:S,offset:4*f},a_texIndex:{type:"float",buffer:w,Re:S,offset:6*f},a_type:{type:"float",buffer:w,Re:S,offset:7*f},a_zooms:{type:"vec2",buffer:w,Re:S,offset:8*f},a_height:{type:"float",buffer:w,Re:S,offset:10*f},uee:{type:"float",buffer:w,Re:S,offset:11*f},a_highflag:{type:"float",buffer:w,Re:S,offset:12*f},a_visible:{type:"float",buffer:b,Re:0,offset:p[y]&&p[y].start}});var q=this.l_==="inner"?Xi.Ri:Xi.Si;for(var C=0;C<$;C++){var F=x[C];var O=F.start,j=O===void 0?0:O,_=F.end,J=_===void 0?0:_,Y=F.dp;y++;if(!(J-j)){continue}var B=void 0;if(D==="labelsLayer"&&F.pd){var K=this.ac.getImage(F.pd);if(K.img){var Q=this.dd(r,K),T=Q.texture,Z=Q.size;if(T&&T.context){M[ne.icon]=T;B=A.slice(0);B[ne.icon*2]=Z[0];B[ne.icon*2+1]=Z[1]}}}var E=F.vd;var X=E.GV("fillColor");var ee=E.GV("strokeColor");var re=E.GV("backgroundColor");var te=E.GV("borderColor");a.Le({u_matrix:L,u_texture:{De:M,count:4},u_gl_size:[o,l],u_texsize:B?B:A,u_color:X,u_strokeColor:ee,u_borderColor:te,u_gamma:E.GV("u_gamma"),u_borderBuffer:E.GV("u_borderBuffer"),u_buffer:E.GV("u_buffer"),u_backgroundColor:re,u_opacity:F.opacity*z,u_zoom:R,u_event:0,u_delta_center:P,u_offset:U,u_transform:[0,0,1,0],u_skyHeight:m,u_fontSizeFactor:E.GV("u_fontSizeFactor"),u_highlightFillColor:E.GV("u_highlightFillColor"),u_highlightStrokeColor:E.GV("u_highlightStrokeColor")});a.Pe((J-j)/n,j/n,undefined,undefined,G.depthTest,q)}}return y};e.prototype.Cz=function(e,r,t,i,n){var f=this._f;var a=ie.sp,s=ie.ud;var u=e.viewState,o=e.size;var l=u.zoom||V[1];var v=u.mvpMatrix||null;var L=o[0],R=o[1];var N=n.Az,c=n.Iz,P=n.centerCoord;var h=1;if(u.viewMode==="3D"){h=e.map.getView().EF()}if(!v){return}var d=i.$z||{};var y=d.pp,m=d.zs,b=d.od;var p=m&&m.buffer;var x=Math.pow(2,l-c);r.be.set([0,0,L*Wn,R*Wn]);var w=this.fd(n.see),k=w.De,g=k===void 0?[]:k,M=w.sizes,D=M===void 0?[]:M;var I=y.length;var A=s*a;var z;var U;var S;var $;var C;var F;var W;var G=c>=l?x:1;var H=[0,0,G,0];if(!p||!b){return}if(I){r.ge.set(this._f);f.Ae({a_vertex:{type:"vec2",buffer:p,Re:A,offset:0},a_texcoord:{type:"vec2",buffer:p,Re:A,offset:2*a},a_origin:{type:"vec2",buffer:p,Re:A,offset:4*a},a_texIndex:{type:"float",buffer:p,Re:A,offset:6*a},a_type:{type:"float",buffer:p,Re:A,offset:7*a},a_zooms:{type:"vec2",buffer:p,Re:A,offset:8*a},a_height:{type:"float",buffer:p,Re:A,offset:10*a},uee:{type:"float",buffer:p,Re:A,offset:11*a},a_highflag:{type:"float",buffer:p,Re:A,offset:12*a},a_visible:{type:"float",buffer:b,Re:0,offset:0}})}var O;for(var j=0;j<I;j++){var _=y[j];z=_[0];U=_[1];S=_[11];$=_[12];C=_[13];W=_[14];if(!($-S)){continue}for(var B=0,T=N;B<T.length;B++){var E=T[B];O=t[E];if(O&&E===C){F=O.Sa}}if(!F||x<.6){continue}if(!O){continue}F=[0,0];f.Le({u_matrix:v,u_delta_center:F,u_transform:H,u_texture:{De:g,count:g.length},u_gl_size:o,u_texsize:D,u_color:_[3],u_strokeColor:_[4],u_gamma:_[5],u_borderBuffer:_[7],u_buffer:_[8],u_backgroundColor:_[9],u_opacity:1,u_zoom:l,u_event:0,u_skyHeight:h,u_fontSizeFactor:1});f.Pe(($-S)/s,S/s,undefined,undefined,undefined,Xi.Si)}};e.prototype.gp=function(e,r){var t=e.context;var i=e.Jn();var n=r;var f=t.fe(new Uint16Array([0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0]),8);if(!n){return}i.Ce({u_texture:n},{a_pos:{type:"vec2",buffer:f,Re:8,offset:0},a_coord:{type:"vec2",buffer:f,Re:8,offset:4}},4,undefined,"TRIANGLE_FAN",undefined,Xi.Mi)};e.prototype.reset=function(){this.Df()};e.prototype.destroy=function(){if(this.Lz){for(var e=0,r=this.Lz.De;e<r.length;e++){var t=r[e];t.destroy()}delete this.Lz}};e.prototype.Dz=function(e,r,t){var i=t.start,n=i===void 0?0:i,f=t.dp,a=t.style;var s=6;var u=n;var o=0;var l;var v;for(var c=0,h=f;c<h.length;c++){var d=h[c];l=d.id;v=d.kd;var y=r[l];if(e.uf<n+o+v){e.ff(e.uf*2)}var m=e.value;if(y){var b=a[l]||{},p=b.showText,x=p===void 0?1:p,w=b.showIcon,k=w===void 0?true:w;var g=0;var M=Infinity;var I=-Infinity;var A=Infinity;var S=-Infinity;if(k){g=A=0;S=d.icon*s;while(g<S){m[u+o+g]=1;g++}}if(x){g=M=d.icon*s;I=(d.icon+d.Rd+d.bg)*s;while(g<I){m[u+o+g]=1;g++}}}o+=v}u+=o;return u};e.prototype.Df=function(){};e.prototype.fd=function(e){var r=[];var t=[];if(e){r[0]=e;t[0]=e.size[0];t[1]=e.size[1]}var i=this._map.so.texture;if(i){r.push(i);var n=i.size;t.push(n[0],n[1])}return{De:r,sizes:t}};e.prototype.dd=function(e,r){var t=e.gl;var i=r.img,n=r.width,f=r.height;var a=i;if(i&&!i.context){a=e.createTexture(i);a.bind(t.CLAMP_TO_EDGE,t.LINEAR,t.LINEAR);r.img=a}return{texture:a,size:[n,f]}};return e}();var Hn=M["transform"];var A=M["Support"];var Vn=M["LabelsRenderUtil"];var qn=function(){function e(){this._size=[0,0];this.Wz=1;var e=this.canvas=document.createElement("canvas");this.Nz=e.getContext("2d")}e.prototype.Ce=function(e,r,t,i,n){if(!e){return}this.wf=e;var L=e.size;this._size=L;var R=n.centerCoord,f=n.Uf,N=f===void 0?{}:f,P=n.$f,a=n.Sa,D=a===void 0?[0,0]:a;this.Tz();this.Pz();var s=e.viewState;var u=s.zoom;var z=s.viewMode;if(!this.Oz(u,r.zooms)){return}if(!this._map&&i){var U=s.projectionId;this._map=i;this.If=Hn[U];this._view=i.getView();this.ac=i.z_}if(!t["other"]){return}var o=t&&t.other,W=o.coords,G=o.style,H=o.Nf,l=o.Fz,V=l===void 0?[]:l;var v={viewState:s,size:this.wf.size,transform:this.If,view:this._view,viewMode:z,centerCoord:R};this.Bz(r);for(var c=0,h=V;c<h.length;c++){var q=h[c];for(var d=0;d<q.length;d++){var y=q[d];if(!N[y]){continue}var m=H[y]||{};var b=W[y]||{};var p=G[y]||{};var J=m.data.extData||{};var x=J.Sa||D||[0,0];var Y=m.data||{};var w=Y["txt"];var K=m.opts||{};var k=(p.icon||[])[0]||{};var Q=k.image;var Z=Yi(p.opacity)?1:K.opacity;var g=p.text;var M=m.data.richText||{};var X=M?M.hS:"";if(Q&&k&&this.Oz(u,p.icon&&p.icon.zooms)){var I={};var A=void 0;var S=void 0;var $=void 0;if(M&&M.image&&M.image.currentSrc){I=this.ac["getImage"]("rich-icon_"+X);A=I.img;S=I.width;$=I.height}else{I=this.ac["getImage"](Q);A=I.img;S=I.width;$=I.height}var ee={size:[S,$],opacity:Z};var C=b.icon.origin;var F=b.icon.anchorOffset;var re=Vn.wu(C[0]+x[0],C[1]+x[1],u,v);var te=[re[0]+F[0],re[1]+F[1]];if(A){this.drawImage(A,k,te,ee)}}if(w&&g&&this.Oz(u,p.text&&p.text.zooms)){var ie={opacity:Z,padding:b.padding};var C=b.text.origin;var F=b.text.offset;var O=Vn.wu(C[0]+x[0],C[1]+x[1],u,v);var ne=g.style;var fe=ne.fontSize||12;var j=[O[0]+F[0],O[1]+F[1]+fe];this.Ez(p.text,O,ie);var _=w.length;var ae=ne.fold===false?100:6;var B=Math.ceil(_/ae);var T=Math.floor(_/B);var se=3;for(var E=0;E<B;E++){var ue=E===B-1?_-E*T:T;var oe=w.substr(E*T,ue);this.gp(oe,g,j,ie);var le=fe*5/4+se;j[1]=j[1]+le}}}}};e.prototype.Ez=function(e,r,t){var i=this.Nz;var n=A.scale,f=n===void 0?1:n;var a=e.style.backgroundColor;var s=t.padding;var u=s.offsetX,o=s.offsetY,l=s.w,v=s.h;var c=r[0]+u;var h=r[1]+o;if(i&&a){i.fillStyle=a;i.fillRect(c*f,h*f,l*f,v*f)}};e.prototype.drawImage=function(e,r,t,i){var n=A.scale;var f=this.Nz;if(!f||!r){return}var a=r["image"];var s=r["size"];var u=r["clipOrigin"];var o=r["angel"];var l=r["clipSize"];var v=i.opacity,c=v===void 0?1:v;var h=s[0];var d=s[1];var y=e.width||h;var m=e.height||d;var b=l[0];var p=l[1];var x=u[0];var w=u[1];if(Yi(b)){b=h}if(Yi(p)){p=d}if(b>y){b=y}if(p>m){p=m}f.globalAlpha=c*this.Wz;f.drawImage(e,x,w,b,p,t[0]*n,t[1]*n,h*n,d*n)};e.prototype.gp=function(e,r,t,i){var n=A.scale,f=n===void 0?1:n;var a=this.Nz;if(!a){return}var s=r.style,u=s===void 0?{}:s;var o=i.opacity,l=o===void 0?1:o;var v=u.fontWeight,c=u.fontSize,h=u.fontFamily,d=h===void 0?"sans-serif":h,y=u.fillColor,m=u.strokeColor,b=u.strokeWidth,p=b===void 0?1:b,x=u.textAlign,w=x===void 0?"center":x,k=u.Gz,g=k===void 0?"Alphabetic":k;a.globalAlpha=l;a.globalAlpha=1;a.font=v+" "+c*f+"px "+d;a.textAlign=w;a.textBaseline=g;var M=t[0];var I=t[1];a.lineJoin="round";if(m&&p){a.strokeStyle=m;a.lineWidth=p;a.strokeText(e,M*f,I*f)}a.fillStyle=y;a.fillText(e,M*f,I*f)};e.prototype.Pz=function(){var e=this.canvas;var r=A.scale;var t=this._size||[0,0],i=t[0],n=t[1]};e.prototype.Tz=function(){this.canvas.width=this.canvas.width};e.prototype.reset=function(){this.Pz()};e.prototype.destroy=function(){this.Pz()};e.prototype.Oz=function(e,r){if(r===void 0){r=[]}var t=r[0]||V[0];var i=r[1]||V[1];if(e>=t&&e<=i){return true}return false};e.prototype.Bz=function(e){var r=this._container;if(!r){r=this._container=this.oee(this._map)}var t=A.scale;var i=e.zIndex,n=i===void 0?100:i,f=e.opacity,a=e.visible,s=e.zooms,u=s===void 0?V:s;var o=this.wf.viewState.zoom;var l=this.Oz(o,u);if(!a||!l||f===0){r.style.display="none"}else{r.style.display="block"}this.Wz=f;var v=this._size;r.setAttribute("width",v[0]*t+"px");r.setAttribute("height",v[1]*t+"px");r.style.width=v[0]+"px";r.style.height=v[1]+"px";r.style.zIndex=n+""};e.prototype.oee=function(e){var r=e.getContainer();var t=r.querySelector(".amap-layers");if(t){t.appendChild(this.canvas)}AMap.DomUtil.addClass(this.canvas,"amap-labellayers");return this.canvas};return e}();var Jn=M["SmartTypedArray"];var Yn=function(r){f(e,r);function e(){var e=r.call(this)||this;e.type="labelsLayer";e.wf=null;e.Ps={};e._viewMode="2D";e.Wf={};e.Bf={};e.TG={};e.uu=[0,0];return e}e.prototype.Hz=function(e,r,t,i,n,f){if(!this.ac){this._map=n;this._view=n.getView();this.ac=n.z_;this.Mf=n.R_;this._viewMode=r.viewState.viewMode;this.fz=n.fS();if(!this._map.isDOMMode()){if(!this.Zz){this.Zz=new Gn}}else{if(!this.Vz){this.Vz=new qn}}if(this.Zz){this.Zz.Mz({map:n,z_:n.z_,R_:n.R_,$i:e.Zn()})}}};e.prototype.Jz=function(){return{centerCoord:this.uu}};e.prototype.vi=function(e){if(this.fz){var r=this.fz.vi(e,"");return r}return null};e.prototype.destroy=function(){if(this.Zz){this.Zz.destroy();delete this.Zz}if(this.Vz){this.Vz.destroy();delete this.Vz}this.AG()};e.prototype.reset=function(){if(this.Zz){this.Zz.reset()}if(this.Vz){this.Vz.reset()}};e.prototype.Yz=function(e,r,t,i,n){this.Vz.Ce(e,r,t,i,n)};e.prototype.SG=function(){var e=typeof Int8Array!=="undefined";var r;if(e){r=new Jn("uint8",5e5);r.value.fill(0)}return r};e.prototype.zG=function(e){if(!this.TG[e]){this.TG[e]={iterator:0}}var r=this.TG[e];if(!r.LG){r.LG=this.SG()}if(!r.zz){r.zz=[]}return this.TG[e]};e.prototype.AG=function(){var e=this.TG||{};for(var r in e){if(e.hasOwnProperty(r)){var t=e[r];delete t.zz;if(t.od){t.od.destroy();delete t.od}t.iterator=0;if(t.LG){t.LG.value.fill(0)}}}};return e}(zn);var Kn=AMap["Util"];var Qn=M["transform"];var Zn=M["geo"]["lcs"];var Xn=M["SmartArrayBuffer"];var ef=function(y){f(e,y);function e(){var e=y.call(this)||this;e.type="labelsLayer";e.l_="labelsLayer";return e}e.prototype.Hz=function(e,r,t,i,n,f){if(!i||!r){return}y.prototype.Hz.call(this,e,r,t,i,n,f);this.wf=r;var a=r.viewState;var s=a.projectionId;this.If=Qn[s];var u=a.zoom;if(r&&f.visible&&f.opacity&&Kn.dS(u,f.zooms)){if(!i.Nf){return}if(!this._map.isDOMMode()){var o=e.context;i.upload(o)}if(!i){return}var l=i.rp,v=i.buffer,c=i.zo;var h=a.centerCoord;this.uu=Zn.getLocalByCoord([h[0],h[1]]).center||[0,0];var d=this.Ps=i;this.Ps.lp=l.up;return d}return null};e.prototype.renderFrame=function(e,r,t,i,n){var f=this.fz;if(f){this.Wf=f.Uf;this.Bf=f.$f}if(!this._map){return}if(!this._map.isDOMMode()){this.Jh(e,t,r,i,n)}else{var a=this.Ps.zo;var s=Kn.hp(a,this.wf);this.Yz(t,i,r,this._map,{Sa:s,centerCoord:this.uu,Uf:this.Wf,$f:this.Bf})}};e.prototype.Jz=function(){var e=this.Ps.zo;var r=Kn.hp(e,this.wf);var t={Sa:r,from:"labelsLayer",opacity:1,offset:[0,0],centerCoord:this.uu};return t};e.prototype.Jh=function(e,r,t,i,n){var f=this.Zz;var a=e.context;if(!t){return}if(!t["other"]){return}var s=t["other"],u=s.rp,o=s.buffer,l=s.zo;var v=Kn.hp(l,r);if(!u||!u.up){return}this.AG();var c=this.zG(this.l_);var h=c.LG,d=c.od;var y=ie.sp;var m=u&&u.pp;var b=m.length;var p=0;var x=0;var w=[];var k=this.Ps.style||{};for(var g=0;g<b;g++){var M=m[g];var I=M.dp||[];p=x;x=f.Dz(h,this.Wf,{start:p,dp:I,style:k});w.push({start:p,end:x})}if(d){d.update(h.value)}else{c.od=new Xn(a,h.value,y)}c.zz=w;if(i.ce){e.context.clear({depth:true})}f.Ce(r,a,{Rz:u,buffer:o,od:c.od.buffer,zz:c.zz},{from:this.type,Sz:true,Sa:v,oo:e,LF:i,yZ:true,see:n._textTexture})};return e}(Yn);var rf=typeof Float32Array!=="undefined";if(!rf){window["Float32Array"]=undefined;nf(Array)}var T=1e-6;var tf=typeof Float32Array!=="undefined"?Float32Array:Array;function nf(e){tf=e}if(!Math.hypot)Math.hypot=function(){var e=0,r=arguments.length;while(r--){e+=arguments[r]*arguments[r]}return Math.sqrt(e)};function ff(e,r){var t=e[0],i=e[1],n=e[2],f=e[3];var a=e[4],s=e[5],u=e[6],o=e[7];var l=e[8],v=e[9],c=e[10],h=e[11];var d=e[12],y=e[13],m=e[14],b=e[15];var p=r[0],x=r[1],w=r[2],k=r[3];var g=r[4],M=r[5],I=r[6],A=r[7];var S=r[8],$=r[9],C=r[10],F=r[11];var O=r[12],j=r[13],_=r[14],B=r[15];return Math.abs(t-p)<=T*Math.max(1,Math.abs(t),Math.abs(p))&&Math.abs(i-x)<=T*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(n-w)<=T*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(f-k)<=T*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(a-g)<=T*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-M)<=T*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-I)<=T*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(o-A)<=T*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(l-S)<=T*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(v-$)<=T*Math.max(1,Math.abs(v),Math.abs($))&&Math.abs(c-C)<=T*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(h-F)<=T*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(d-O)<=T*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(y-j)<=T*Math.max(1,Math.abs(y),Math.abs(j))&&Math.abs(m-_)<=T*Math.max(1,Math.abs(m),Math.abs(_))&&Math.abs(b-B)<=T*Math.max(1,Math.abs(b),Math.abs(B))}function af(){var e=new tf(3);if(tf!=Float32Array){e[0]=0;e[1]=0;e[2]=0}return e}function sf(e,r){e[0]=r[0];e[1]=r[1];e[2]=r[2];return e}function uf(e,r,t,i){e[0]=r;e[1]=t;e[2]=i;return e}function of(e,r,t){e[0]=r[0]-t[0];e[1]=r[1]-t[1];e[2]=r[2]-t[2];return e}var lf=function(){var u=af();return function(e,r,t,i,n,f){var a,s;if(!r){r=3}if(!t){t=0}if(i){s=Math.min(i*r+t,e.length)}else{s=e.length}for(a=t;a<s;a+=r){u[0]=e[a];u[1]=e[a+1];u[2]=e[a+2];n(u,u,f);e[a]=u[0];e[a+1]=u[1];e[a+2]=u[2]}return e}}();var vf=typeof Float64Array!=="undefined";var cf=typeof Float32Array!=="undefined";if(vf){nf(Float64Array)}else if(cf){nf(Float32Array)}else{window["Float32Array"]=undefined;nf(Array)}var hf=AMap["DomUtil"];var df=function(r){f(e,r);function e(){var e=r.call(this)||this;e.type="customLayer";e.OF=af();e.VM=af();return e}e.prototype.renderFrame=function(e,r,t,i){if(!i.alwaysRender&&this.OF&&this.EI&&this.BF&&this.NF&&(ff(this.NF,t.viewState.mvpMatrix)||t.map.TL())){var n=Math.pow(2,t.viewState.zoom-this.EI);of(this.VM,t.viewState.centerCoord,this.OF);uf(this.VM,-(this.VM[0]/this.BF)*n,this.VM[1]/this.BF*n,0);if(n!==1){i.kv.style[hf.kL]="scale3d("+n+","+n+",1)"}i.kv.style.top=this.VM[1]+"px";i.kv.style.left=this.VM[0]+"px"}else{var f=i.layer;sf(this.OF,t.viewState.centerCoord);this.EI=t.viewState.zoom;this.NF=t.viewState.mvpMatrix;this.BF=t.viewState.resolution;if(f["render"]){var a=f.getLayerConfig().zooms;if(t.viewState.zoom>=a[0]&&t.viewState.zoom<=a[1]){f.canvas.style.visibility="visible";f["render"]()}else{if(f&&f.canvas&&f.canvas){f.canvas.style.visibility="hidden"}}}i.kv.style[hf.kL]="";i.kv.style.top="";i.kv.style.left="";i.kv.style.height="";i.kv.style.visibility=""}};return e}(zn);var yf={PoiStyle:[{$:{mainkey:"10001",subkey:"1"},StyleItem:[{$:{level:"18,19,20",desc:"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"3"},StyleItem:[{$:{level:"19,20",desc:"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"4"},StyleItem:[{$:{level:"18",desc:"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"6"},StyleItem:[{$:{level:"18,19,20",desc:"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"7"},StyleItem:[{$:{level:"18,19,20",desc:"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"8"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,9,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"9"},StyleItem:[{$:{level:"18,19,20",desc:"50,10,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"10"},StyleItem:[{$:{level:"18,19,20",desc:"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"11"},StyleItem:[{$:{level:"18,19,20",desc:"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"12"},StyleItem:[{$:{level:"18,19,20",desc:"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"13"},StyleItem:[{$:{level:"18,19,20",desc:"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"14"},StyleItem:[{$:{level:"18,19,20",desc:"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"15"},StyleItem:[{$:{level:"18,19,20",desc:"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"16"},StyleItem:[{$:{level:"20",desc:"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"17"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"18"},StyleItem:[{$:{level:"18,19,20",desc:"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"19"},StyleItem:[{$:{level:"18,19,20",desc:"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"20"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,39,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"21"},StyleItem:[{$:{level:"18,19",desc:"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"22"},StyleItem:[{$:{level:"18,19",desc:"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"23"},StyleItem:[{$:{level:"18,19",desc:"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"24"},StyleItem:[{$:{level:"18,19",desc:"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"25"},StyleItem:[{$:{level:"18,19",desc:"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"26"},StyleItem:[{$:{level:"18,19",desc:"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"27"},StyleItem:[{$:{level:"18,19",desc:"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"28"},StyleItem:[{$:{level:"18,19",desc:"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"29"},StyleItem:[{$:{level:"18,19",desc:"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"30"},StyleItem:[{$:{level:"18,19",desc:"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"31"},StyleItem:[{$:{level:"18,19",desc:"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"32"},StyleItem:[{$:{level:"18,19",desc:"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"33"},StyleItem:[{$:{level:"18,19",desc:"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"34"},StyleItem:[{$:{level:"18,19",desc:"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"35"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"36"},StyleItem:[{$:{level:"18,19,20",desc:"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"37"},StyleItem:[{$:{level:"19,20",desc:"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"38"},StyleItem:[{$:{level:"18,19,20",desc:"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"39"},StyleItem:[{$:{level:"17",desc:"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"40"},StyleItem:[{$:{level:"17",desc:"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"41"},StyleItem:[{$:{level:"20",desc:"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"42"},StyleItem:[{$:{level:"18,19,20",desc:"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"43"},StyleItem:[{$:{level:"18,19,20",desc:"50,31,1,1,12,0xff000000,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"44"},StyleItem:[{$:{level:"18,19,20",desc:"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"45"},StyleItem:[{$:{level:"18,19,20",desc:"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"46"},StyleItem:[{$:{level:"18",desc:"50,34,2,1,0,0xff935676,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,34,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"47"},StyleItem:[{$:{level:"18,19,20",desc:"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"48"},StyleItem:[{$:{level:"19,20",desc:"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"49"},StyleItem:[{$:{level:"18,19,20",desc:"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"50"},StyleItem:[{$:{level:"18,19,20",desc:"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"51"},StyleItem:[{$:{level:"18,19,20",desc:"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"52"},StyleItem:[{$:{level:"20",desc:"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"53"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"54"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"55"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"56"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff000000,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"57"},StyleItem:[{$:{level:"18,19,20",desc:"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"58"},StyleItem:[{$:{level:"18,19,20",desc:"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"59"},StyleItem:[{$:{level:"18,19,20",desc:"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"60"},StyleItem:[{$:{level:"16,17",desc:"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"62"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"63"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"64"},StyleItem:[{$:{level:"17",desc:"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"65"},StyleItem:[{$:{level:"17",desc:"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"66"},StyleItem:[{$:{level:"17",desc:"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"67"},StyleItem:[{$:{level:"17",desc:"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"68"},StyleItem:[{$:{level:"17",desc:"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"69"},StyleItem:[{$:{level:"17",desc:"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"70"},StyleItem:[{$:{level:"17",desc:"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"71"},StyleItem:[{$:{level:"17",desc:"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"72"},StyleItem:[{$:{level:"17",desc:"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"73"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"74"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"75"},StyleItem:[{$:{level:"18,19",desc:"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"76"},StyleItem:[{$:{level:"18,19",desc:"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"77"},StyleItem:[{$:{level:"18,19",desc:"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"78"},StyleItem:[{$:{level:"18,19",desc:"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"79"},StyleItem:[{$:{level:"19,20",desc:"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"80"},StyleItem:[{$:{level:"19,20",desc:"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"81"},StyleItem:[{$:{level:"19,20",desc:"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"82"},StyleItem:[{$:{level:"19,20",desc:"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"83"},StyleItem:[{$:{level:"19,20",desc:"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"84"},StyleItem:[{$:{level:"19,20",desc:"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"85"},StyleItem:[{$:{level:"19,20",desc:"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"86"},StyleItem:[{$:{level:"19,20",desc:"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"87"},StyleItem:[{$:{level:"19,20",desc:"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"88"},StyleItem:[{$:{level:"19,20",desc:"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"89"},StyleItem:[{$:{level:"19,20",desc:"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"90"},StyleItem:[{$:{level:"19,20",desc:"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"91"},StyleItem:[{$:{level:"19,20",desc:"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"92"},StyleItem:[{$:{level:"19,20",desc:"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"93"},StyleItem:[{$:{level:"19,20",desc:"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"94"},StyleItem:[{$:{level:"19,20",desc:"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"95"},StyleItem:[{$:{level:"19,20",desc:"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"96"},StyleItem:[{$:{level:"19,20",desc:"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"97"},StyleItem:[{$:{level:"18,19,20",desc:"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"98"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"99"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1"}}]},{$:{mainkey:"10001",subkey:"105"},StyleItem:[{$:{level:"16,17,18",desc:"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"106"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"107"},StyleItem:[{$:{level:"16,17,18,19,20",desc:"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]}],LineStyle:[{$:{mainkey:"20001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00"}}]},{$:{mainkey:"20001",subkey:"2"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080"}}]}],RegionStyle:[{$:{mainkey:"30001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"90,1,0xfffcfbed"}}]},{$:{mainkey:"30001",subkey:"99"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x1a151b2b"}}]},{$:{mainkey:"30001",subkey:"98"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x8c151b2b"}}]}],BuildingStyle:[{$:{mainkey:"30001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"3"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"4"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255"}}]},{$:{mainkey:"30001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"6"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"7"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255"}}]},{$:{mainkey:"30001",subkey:"8"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255"}}]},{$:{mainkey:"30001",subkey:"9"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255"}}]},{$:{mainkey:"30001",subkey:"10"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255"}}]},{$:{mainkey:"30001",subkey:"11"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255"}}]},{$:{mainkey:"30001",subkey:"12"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255"}}]},{$:{mainkey:"30001",subkey:"13"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255"}}]},{$:{mainkey:"30001",subkey:"14"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255"}}]},{$:{mainkey:"30001",subkey:"15"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255"}}]},{$:{mainkey:"30001",subkey:"16"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255"}}]},{$:{mainkey:"30001",subkey:"17"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255"}}]}]};var mf=["strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","strokeStyle","strokeDasharray","fontSize"];var bf={setOptions:function(e){},init:function(){this.NC={};this.UC(yf);this.WC=[];return this.NC},GC:function(e){var r=AMap.getConfig()["protocol"]+"://webapi.amap.com"+"/images/indoor_icon/"+("36/"+e+"@2x")+".png";return r},HC:function(e){var r=true;for(var t=13;t<=22;t++){var i=this.VC(e,t);if(i&&(i.fontSize>0||i.iconId)){r=false;break}}return r},VC:function(e,r){return this.Tn(e,r)},ZC:function(e,r){return this.Tn(e,r)},Pr:function(e,r){return this.Tn(e,r)},YC:function(e,r){var t=mf;if(r){for(var i in r){if(r.hasOwnProperty(i)&&t.indexOf(i)>=0&&e[i]===void 0){e[i]=r[i]}}}return e},JC:function(e,r){if(!e){return null}var t=mf;var i={};for(var n=0,f=t.length;n<f;n++){var a=t[n];if(e.hasOwnProperty(a)&&e[a]!==void 0){i[a]=e[a]}}this.YC(i,r);return i},Tn:function(e,r){var t=e[0];var i=e[1];var n=t+"_"+i;r=Math.round(r);var f=this.NC[n];if(!f){if(this.WC.indexOf(n)<0){this.WC.push(n)}return null}for(var a=0,s=f.length;a<s;a++){if(f[a].levels.indexOf(""+r)>=0){return f[a].styleOpts}}if(r>20){var u=f[f.length-1];if(u.levels.indexOf("20")>=0){u.levels.push(""+r);return u.styleOpts}}return null},UC:function(e){for(var r in e){if(e.hasOwnProperty(r)){this.XC(e[r],r)}}},XC:function(e,r){for(var t=0,i=e.length;t<i;t++){this.qC(e[t],r)}},qC:function(e,r){var t=e["$"];if(!t){return}var i=t["mainkey"];var n=t["subkey"];var f=e["StyleItem"];var a=i+"_"+n;if(this.NC[a]);this.NC[a]=this.QC(f,r)},QC:function(e,r){var t=[];for(var i=0,n=e.length;i<n;i++){var f=this.KC(e[i],r);if(!f){continue}t.push(f)}return t},KC:function(e,r){var t=e["$"];if(!t){return}var i={};i["levels"]=t["level"].split(",");i["desc"]=t["desc"].split(",");i["styleOpts"]=this.$I(i,i.desc,r);i["styleOpts"]["levels"]=i.levels;return i},BI:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push(r.shift());r=r.slice(0,3);var n="rgb("+r.join(",")+")";return n},WI:function(e){if(e.trim){e=e.trim()}var r=this.BI(e.substr(2,8));return r},GI:function(){return this.HI++},$I:function(e,r,t){var i;switch(t){case"PoiStyle":i={iconId:parseInt(r[1],10),fontSize:Math.min(15,parseInt(r[4],10)||0),fillColor:this.WI(r[5]),strokeColor:this.WI(r[6]),VI:parseInt(r[8],10)===0};if(i.iconId===1){i.iconId=0}break;case"LineStyle":i={fillColor:"rgb(252, 249, 242)",strokeColor:this.WI(r[7]),strokeWeight:Math.max(2,Math.round(parseInt(r[2],10)/3))};break;case"RegionStyle":i={fillColor:this.WI(r[2])};break;case"BuildingStyle":i={fillColor:this.WI(r[1]),strokeColor:this.WI(r[2])};break;default:return null}i["_uid"]=this.GI();return i}};var pf=M["assign"];var xf={high:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(230,142,0)"},unHigh:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(171,171,171)"}};var wf=M["TileState"];var kf=function(r){f(e,r);function e(){var e=r.call(this)||this;e._config=AMap["getConfig"]();e.YI=[17,22];e.l$=bf.init();e.a$=new M["LabelsLayer"]({opacity:1,collision:true,allowCollision:true,zIndex:9,zooms:[17,22],visible:false});e.GL=false;e.i$=false;e.WL="";e._map=null;e.f$=false;e.UL=null;e.pD=false;e.t$();e.sZ=false;return e}e.prototype["getContainer"]=function(){return document.createElement("div")};e.prototype.renderFrame=function(e,r,t,i,n){};e.prototype.render=function(e){var r=this;var t=e.data;if(!t||t.length<1||!this.gs){return false}this._map=this.gs.map;if(!this.sZ){this.sZ=true;this._map.on("click",function(e){if(r.e$){r.e$.hide()}r.gs.oZ()})}var i=this.gs.ZI();var n=i.indoor,f=i.floorInfo;if(i&&i["visible"]===false){return false}var a=this.qI(t);this.UL=t;if(!a){return false}if(!i["changeFloor"]){var s={centerId:a};this.gs.setRenderData(s)}var u=Object.keys(t);for(var o=0;o<u.length;o++){var l=u[o];var v=t[l];var c=v["building"];if(!c||!c["properties"]){continue}var h=c["properties"]["outside_outline"];var d=this.gs.getIntersect(h)||this.gs.getRingInRing(h);if(!d){continue}if(!n[l]){var y="1";if(f[l]){y=f[l]}this.gS(v,y)}else{var m=n[l]["curFloor"];var y=f[l];if(m!==y){this.gS(v,y)}}}};e.prototype.HF=function(e){this.gs=e};e.prototype.t$=function(){var e=this;if(!this.i$){AMap["plugin"]("AMap.IndoorMapFloorBar",function(){e.i$=true})}};e.prototype.QI=function(e,r){var a=this;var t=this.gs.ZI();var i=t.floorInfo,n=t.showId,f=t.centerId,s=t.hideFloorBar;var u=null;var o=null;var l=Number(i[r])||1;var v=e.properties;if(v&&v["floor_nonas"]){u=v["floor_nonas"];o=v["floor_indexs"]}if(!u||!o){return false}if(o.length>1){if(o[0]>o[1]){u=u.reverse();o=o.reverse()}}if(!this.e$&&this.i$){if(M&&M.module){this.e$=new M["IndoorMapFloorBar"]({floors:u,floorIndexs:o,currentFloor:l});this.WL=f;this.gs.setBar(this.e$);this.gs.setRenderData({barCenterId:this.WL})}if(!this.e$){return false}this._map.addControl(this.e$);this.e$.on("floorchange",function(e){a.pD=true;var r=e["currentIndex"];var t=a.gs.ZI();var i=r;var n=t.centerId;a.gs.n$(n,i);var f=a._map.Mv.getSource(a.gs.co());if(n){a.gs.setRenderData({changeFloor:true});f.JR(n,i)}})}else if(this.e$){this.WL=f;this.e$["setOption"]({floors:u,floorIndexs:o,currentFloor:l});this.gs.setRenderData({barCenterId:this.WL})}if(s&&this.e$){this.e$.hide()}if(!this.GL&&this._map){this.GL=true;this._map.on("moveend",function(){var e=a.vD();if(e){var r={centerId:e};a.gs.setRenderData(r)}a.gs.setRenderData({changeFloor:false});a.lee();a.gs.uD()})}};e.prototype.lee=function(){var e=1;var r=this.gs.ZI();var t=r.centerId;if(t===this.WL){return false}if(r["floorInfo"][t]){e=r["floorInfo"][t]}if(this.UL&&this.UL[t]&&this.UL[t]["building"]){var i=this.UL[t]["building"];var n=i.properties;var f=null;var a=null;if(n&&n["floor_nonas"]){f=n["floor_nonas"];a=n["floor_indexs"]}if(!f||!a){return false}if(a.length>1){if(a[0]>a[1]){f=f.reverse();a=a.reverse()}}if(this.e$){this.e$["setOption"]({floors:f,floorIndexs:a,currentFloor:Number(e)});this.WL=t;this.gs.setRenderData({barCenterId:this.WL})}}};e.prototype.qI=function(e){var r=this._map.getCenter().toJSON();var t=null;var i="";var n=Object.keys(e);for(var f=0;f<n.length;f++){var a=n[f];var s=e[a];if(s["building"]&&s["building"]["properties"]&&s["building"]["properties"]["centerPoint"]){var u=s["building"]["properties"]["centerPoint"];var o=new AMap["LngLat"](u[0],u[1]);var l=AMap["GeometryUtil"]["distance"](r,o);if(t){if(l<t){t=l;i=a}}else{t=l;i=a}}}return i};e.prototype.vD=function(){var e=this._map.getCenter().toJSON();var r=null;var t="";var i=this.gs.ZI();var n=i["indoor"];var f=Object.keys(n);for(var a=0;a<f.length;a++){var s=f[a];var u=n[s];if(u["buildingCenter"]){var o=u["buildingCenter"];var l=new AMap["LngLat"](o[0],o[1]);var v=AMap["GeometryUtil"]["distance"](e,l);if(r){if(v<r){r=v;t=s}}else{r=v;t=s}}}return t};e.prototype.fD=function(e,r){var t=this.gs.ZI();if(!t["floorInfo"]){t["floorInfo"]={}}t["floorInfo"][e]=r;this.gs.setRenderData(t)};e.prototype.gS=function(e,r){var t=Object.keys(e["data"])[0];if(r){t=r}if(!e["data"][t]){return false}var i=e["data"][t]["floor"];var n=e["data"][t]["id"];if(!i||!n){return false}var f=this.gs.ZI();this.fD(n,r);var a=f["centerId"];if(a===n){this.QI(e["building"],n)}this.o$(i,n,e["building"],r);this.gs.mD(true)};e.prototype.ar=function(e){var r=this.gs.ZI();var t=r.indoor;if(t&&t[e]){if(t[e]["polygons"]){this.gs.$F.remove(t[e]["polygons"])}if(t[e]&&t[e]["markers"]&&t[e]["markers"].length>0){this.a$.remove(t[e]["markers"])}}};e.prototype.h$=function(e){var r=this;if(!e||!e["properties"]){return null}var t=e["properties"]["poitype"];var i=e["position"];var n=t.join("_");var f=this.l$[n]&&this.l$[n][0];var a=this.gs.ZI();if(f&&f["styleOpts"]&&f["styleOpts"]["iconId"]){var s=f["styleOpts"]["iconId"];var u=bf.GC(s);var o={position:i,zooms:e["zooms"],opacity:a["opacity"],rank:3e5,icon:{size:[18,18],image:u,anchor:"center"},extData:e["properties"],innerOverlay:true,bubble:true};if(e["text"]){var l=f["styleOpts"]["fillColor"]||"rgb(132,99,142)";var v=f["styleOpts"]["strokeColor"]||"#FFFFFF";o=pf(o,{text:{content:e["text"],direction:"bottom",style:{fillColor:l,strokeColor:v,fontSize:12}}})}var c=new AMap["LabelMarker"](o);c.on("click",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi("click",e)}});c.on("mousemove",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi("mousemove",e)}});c.on("mouseout",function(e){if(r._map&&r._map.getStatus().isHotspot){r.bi("mousemove",e)}});return c}return null};e.prototype.bi=function(e,r){var t="hotspot";var i;var n=r.target.getExtData();switch(e){case"click":i=t+e;break;case"mouseover":i=t+"over";break;case"mouseout":i=t+"out";break}if(i){var f=this._map.getProjection();var a=f["unproject"](r["lnglat"]["lng"],r["lnglat"]["lat"]),s=a[0],u=a[1];var o={type:i,id:n["pid"],name:n["name"],lnglat:r["lnglat"],originEvent:r["originEvent"]};this._map.emit(i,o)}};e.prototype.o$=function(e,r,t,i){var u=this;if(!this._map||!r){return false}var n=this.gs.ZI();this.ar(r);var L=this._map["getZoom"]();var f=[];var a=[];var s=e["shops"];var o=e["floor"];var l=e["cons"];var R={building_id:r,floor:o};var N=s.length;var v=[];var c=[];var h=[];var d=[];var y=[];for(var m=0;m<N;m++){var b=s[m];var p=b.properties,x=b.geometry;var P=pf({shop:{id:p["cpid"],name:p["name"]}},R);var w="#FFFFFF";var k="#FE9A2E";if(p&&p["regiontype"]){var g=p["regiontype"].join("_");var M=this.l$[g]&&this.l$[g][0];if(M&&M["styleOpts"]){w=M["styleOpts"]["fillColor"];k=M["styleOpts"]["strokeColor"]}}c.push(w);h.push(k);y.push(n["opacity"]);d.push({indoorPolygon:true,indoorData:P,id:r});v.push(x.coordinates);if(p["zoom_min"]&&p["zoom_max"]&&p["font_anthor_point"]){var I=p["font_anthor_point"];var A={position:[I[0],I[1]],text:p["name"],properties:p,zooms:[p["zoom_min"],p["zoom_max"]]};var S=this.h$(A);if(S){a.push(S)}}}var $=new AMap["Polygon"]({bubble:true,path:v,innerOverlay:true,cursor:n["cursor"],zooms:this.YI,async:true,fillColor:function(e){return c[e]},strokeColor:function(e){return h[e]},fillOpacity:function(e){return y[e]},strokeOpacity:n["opacity"],strokeWeight:1,zIndex:n["zIndex"]+2});$.on("click",function(e){var r=d[e.vectorIndex];var t=r.id;if(u.e$){u.e$.show()}if(t){var i={centerId:t,changeFloor:true};u.gs.setRenderData(i);u.lee();u.gs.uD()}r["indoorData"]["ext"]={type:"polygon",data:e};u.gs.emit("click",r["indoorData"])});$.on("mouseover",function(e){for(var r=0,t=d.length;r<t;r++){var i=d[r];if(i["originFillOpacity"]&&i["originFillColor"]){c[r]=i["originFillColor"];y[r]=i["originFillOpacity"]}}var n=d[e.vectorIndex];var f=e.lnglat;n["originFillOpacity"]=y[e.vectorIndex];n["originFillColor"]=c[e.vectorIndex];c[e.vectorIndex]="#B45F04";y[e.vectorIndex]=.4;if(n["indoorData"]&&n["indoorData"]["shop"]&&n["indoorData"]["shop"]["name"]){var a=n["indoorData"]["shop"]["name"];var s="<div style="+\'"padding: 5px; border: 1px solid rgba(41,38,36,0.87);; white-space:nowrap; border-radius: 2px;color: #000000; background: #FBF5EF; font-size:12px;">\'+a+"</div>";u.JT=new AMap["Marker"]({position:f,content:s,anchor:"bottom-left",map:u._map,noSelect:true})}$.to()});$.on("mouseout",function(e){for(var r=0,t=d.length;r<t;r++){var i=d[r];if(i["originFillOpacity"]&&i["originFillColor"]){c[r]=i["originFillColor"];y[r]=i["originFillOpacity"]}}if(u.JT){u._map.remove(u.JT)}$.to()});f.push($);var C=null;var D=[];if(o["geometry"]&&o["geometry"]["coordinates"]){var w=xf["unHigh"]["fillColor"];var k=xf["unHigh"]["strokeColor"];if(n["centerId"]===r){k=xf["high"]["strokeColor"]}var F=o["geometry"]["coordinates"];if(o["geometry"]["type"]&&o["geometry"]["type"]==="MultiPolygon"){if(F[0]&&F[0].length>1){var z=[];for(var O=0;O<F[0].length;O++){z.push(F[0][O])}F=z}}for(var j=0;j<F.length;j++){var _=new AMap["Polygon"]({bubble:true,async:true,strokeWeight:3,innerOverlay:true,zooms:this.YI,path:F[j],fillColor:w,strokeColor:k,zIndex:n["zIndex"]+1,fillOpacity:n["opacity"],strokeOpacity:n["opacity"],extData:{indoorPolygon:true,id:r}});C=true;_.on("click",function(e){var r=e.target.getExtData();var t=r.id;if(u.e$){u.e$.show()}if(t){var i={centerId:t,changeFloor:true};u.gs.setRenderData(i)}u.lee();u.gs.uD()});D.push(_);f.push(_)}}if(n["showId"]){this.gs.setRenderData({centerId:n["showId"]})}this.gs.uD();this.gs.$F.add(f);if(!n["indoor"][r]){n["indoor"][r]={}}n["indoor"][r]["curFloor"]=i;n["indoor"][r]["polygons"]=f;n["indoor"][r]["outline"]=D;if(t&&t["properties"]&&t["properties"]["centerPoint"]){n["indoor"][r]["buildingCenter"]=t["properties"]["centerPoint"]}if(n&&n["showId"]===r&&C){if(n["animateState"]!=="undefined"){this._map.setStatus({animateEnable:n["animateState"]})}}var U=l.length;for(var B=0;B<U;B++){var W=l[B];var x=W.geometry,p=W.properties;var G=p.zoom_min,H=p.zoom_max;var A={properties:p,position:[x["coordinates"][0],x["coordinates"][1]],zooms:[G,H]};var S=this.h$(A);if(S){a.push(S)}}if(!this.f$){this._map.add(this.a$);this.gs.setRenderData({labelsLayer:this.a$});this.f$=true}n["indoor"][r]["markers"]=a;if(typeof n["zIndex"]!=="undefined"){this.a$.setzIndex(n["zIndex"]+9)}this.a$.add(a);var V=this._map&&this._map["showLabel"];if(n["showLabels"]&&V){this.a$.show()}this.gs.KI(n);var T={status:0,id:r,building:{id:r}};if(t["properties"]){var E=t["properties"];T["building"]["name"]=E["name_cn"];T["building"]["lnglat"]=E["centerPoint"];T["building"]["floor"]=i||1;T["building"]["floor_details"]={floor_indexs:E["floor_indexs"],floor_nonas:E["floor_nonas"],floor_names:E["floor_names"]};this.gs.setRenderData(T)}if(!n["complete"]){n["complete"]={}}if(!n["complete"][r]){n["complete"][r]={}}if(!n["complete"][r][i]){this.gs.emit("floor_complete",T);n["complete"][r][i]=true}else if(this.pD){this.gs.emit("floor_complete",T);this.pD=false}this.gs.setRenderData(n["complete"])};return e}(zn);var gf=function(){function e(){}e.prototype.destroy=function(){if(this.wo&&this.wo.parentNode){this.wo.parentNode.removeChild(this.wo)}};return e}();var Mf=M["transform"];var g=function(i){f(e,i);function e(e,r){var t=i.call(this)||this;t.Co={};t.bo=0;t.GT(e,r);return t}e.prototype.renderFrame=function(e,r,t,i,n,f){var a=n.map;var s=t.viewState;var u=f.getLayerConfig();var o=u.zooms||V;var l=s.boundsCoord;var v=[0,0];this.wo.style.zIndex=u.zIndex+"";this.wo.style.opacity=u.opacity+"";this.wo.style.visibility=u.visible?"visible":"hidden";if(this.bo!==s.zoom){this.xo()}if(r["tiles"].length<=0){return}if(s.optimalZoom<o[0]||s.optimalZoom>o[1]){return}this.mo=[l[0],l[3]];var c=r["tiles"]||[];this.ko(c);for(var h=0,d=c.length;h<d;h+=1){var y=c[h];for(var m=0,b=y.length;m<b;m+=1){var p=y[m];if(p.status==="loaded"){var x=p.Ro;v[0]=x[0]-this.mo[0];v[1]=x[3]-this.mo[1];var w={center:s.centerCoord,rotation:s.rotation,size:t.size,viewState:s};var k=Mf[s.projectionId].yo(v[0],v[1],p.zo.z,w);if(p.data){var g=Math.pow(2,s.zoom-p.zo.z);var M=Math.ceil(256*g)+"px";var I=p.data;if(this.So.contains){if(this.So.contains(p.data)){var A=new Image;A.src=p.data.src;I=A}}else{if(p.data.parentNode===this.So){var A=new Image;A.src=p.data.src;I=A}}if(p.data.tagName==="CANVAS"){I=new Image;I.src=p.data.toDataURL()}this.Co[p.zo.key]=p;I.className="xyz-"+p.zo.x+"-"+p.zo.y+"-"+p.zo.z;I.style.width=I.style.height=M;I.width=I.height=Math.ceil(256*g);I.style.left=Math.ceil(k[0]*g)+"px";I.style.top=Math.ceil(k[1]*g)+"px";if(this.Co[p.zo.key]&&this.bo===s.zoom){this.Co[p.zo.key].data=p.data;var A=this.wo.querySelector(".xyz-"+p.zo.x+"-"+p.zo.y+"-"+p.zo.z);if(A){this.wo.removeChild(A)}}this.So.appendChild(I)}}}}this.wo.appendChild(this.So);this.bo=s.zoom;return};e.prototype["getContainer"]=function(){return this.wo};e.prototype.destroy=function(){if(this.wo&&this.wo.parentNode){this.wo.parentNode.removeChild(this.wo)}};e.prototype.GT=function(e,r){this.wo=document.createElement("div");this.wo.className="amap-layer amap-layer-tile amap-"+r.co();this.wo.style.zIndex=r.getLayerConfig().zIndex+"";this.wo.style.opacity=r.getLayerConfig().opacity+"";this.wo.style.visibility=r.getLayerConfig().visible?"visible":"hidden";this.So=document.createDocumentFragment();e.do.appendChild(this.wo)};e.prototype.xo=function(){this.wo.innerHTML="";this.Co={}};e.prototype.ko=function(e){var r=Object.keys(this.Co);for(var t=0,i=r.length;t<i;t++){var n=r[t];var f=false;for(var a=0,s=e.length;a<s;a++){var u=e[a];for(var o=0,l=u.length;o<l;o++){if(u[o].zo.key===n){f=true;break}}}if(!f){var v=this.Co[n].zo;var c=this.wo.querySelector(".xyz-"+v.x+"-"+v.y+"-"+v.z);delete this.Co[n];if(c){this.wo.removeChild(c)}}}};return e}(gf);var If=function(){function e(e){this.map=e}e.prototype.lS=function(e,r){var t=this.map.fS();var i=t.uS();var n={};for(var f in i){if(i.hasOwnProperty(f)){var a=i[f];var s=r.uo.getData(a.co(),r.viewState,this.context||null);n[f]=s}}t.cS(e,r,n)};return e}();var Af=function(i){f(e,i);function e(e,r){var t=i.call(this)||this;t.GT(e,r);return t}e.prototype.renderFrame=function(e,r,t,i,n,f){var a=n.map;var s=r.Ro;var u=f.getLayerConfig();this.wo.style.zIndex=u.zIndex+"";this.wo.style.opacity=u.opacity+"";this.wo.style.visibility=u.visible?"visible":"hidden";var o=a.coordToContainer([s[0],s[3]]);var l=a.coordToContainer([s[2],s[1]]);r.image.style.top=o[1]+"px";r.image.style.left=o[0]+"px";r.image.style.width=l[0]-o[0]+"px";r.image.style.height=l[1]-o[1]+"px";this.wo.appendChild(r.image);return};e.prototype["getContainer"]=function(){return this.wo};e.prototype.GT=function(e,r){this.wo=document.createElement("div");this.wo.className="amap-layer amap-layer-image amap-"+r.co();this.wo.style.zIndex=r.getLayerConfig().zIndex+"";this.wo.style.opacity=r.getLayerConfig().opacity+"";this.wo.style.visibility=r.getLayerConfig().visible?"visible":"hidden";e.do.appendChild(this.wo)};e.prototype.xo=function(){this.wo.innerHTML=""};return e}(gf);var Sf=function(){function e(){this.vI={}}e["addListener"]=function(e,r,t){e.on(r,t)};e["trigger"]=function(e,r,t){e.emit(r,t)};e["clearListeners"]=function(e,r){e.clearEvents(r)};e["addDomListener"]=function(e,r,t){e.addEventListener(r,t)};e.extend=function(e,t,i){if(typeof e==="string"){e=[e]}qi(e,function(r){t.on(r,function(e){i.emit(r,e)})})};e.prototype["on"]=function(e,r,t,i){if(t===void 0){t=this}if(i===void 0){i=false}var n;if(!Array.isArray(e)){n=[e]}else{n=e}for(var f=0,a=n;f<a.length;f++){var s=a[f];this._on(s,r,t,i)}return this};e.prototype["off"]=function(e,r,t){if(t===void 0){t=this}var i=this.vI;if(e in i){for(var n=0;n<i[e].length;n+=1){if(i[e][n].fn===r&&i[e][n].context===t){i[e].splice(n,1);return this}}}return this};e.prototype["hasEvents"]=function(e,r,t){if(t===void 0){t=this}var i=this.vI;if(e&&r&&e in i){for(var n=0;n<i[e].length;n+=1){if(i[e][n].fn===r&&i[e][n].context===t){return true}}}return false};e.prototype["clearEvents"]=function(e){if(e){if(this.vI[e]){delete this.vI[e]}}else{this.vI={}}return this};e.prototype["emit"]=function(e,r){if(r===void 0){r={}}if(!(e in this.vI)){return this}var t=E(E({},r),{type:e});var i=this.vI[e];for(var n=0,f=i.length;n<f;n+=1){var a=i[n];if(!a||!a.fn){continue}a.fn.call(a.context,t);if(a.once){this.vI[e].splice(n,1);n-=1;f-=1}}if(i.length===0){delete this.vI[e]}return this};e.prototype["getEvents"]=function(){return this.vI};e.prototype["_on"]=function(e,r,t,i){if(t===void 0){t=this}if(i===void 0){i=false}if(this.hasEvents(e,r,t)){return this}var n=this.vI;n[e]=n[e]||[];n[e].push({fn:r,context:t||this,once:i});return this};return e}();var $f={};var Cf=function(){function e(e,r,t,i){this.project=r;this.unproject=t;this.getResolution=i;$f[e]=this}e.prototype.Sq=function(e,r,t){var i=this.getResolution(t);var n=r[0]*i;var f=r[1]*i;var a=this.project(e[0],e[1]);return this.unproject(a[0]+n,a[1]+f)};e.prototype.wq=function(e,r){var t=this.project(e[0],e[1]);var i=[t[0]+r[0],t[1]+r[1]];return this.unproject(i[0],i[1])};return e}();var I={getProjection:function(e){return $f[e]}};var Ff=function(){var e=function(e,r){return[e,r]};var r=function(e,r){return[e,r]};var t=function(e){return 180/256/Math.pow(2,e)};return new Cf("EPSG:4326",e,r,t)}();var Of=function(){var f=Math.PI/180;var n=180/Math.PI;var a=6378137;var s=85.0511287798;var e=function(e,r){var t=s;r=Math.max(Math.min(t,r),-t);var i=e*f;var n=r*f;n=Math.log(Math.tan(Math.PI/4+n/2));return[i*a,n*a]};var r=function(e,r){var t=e/a*n;var i=(2*Math.atan(Math.exp(r/a))-Math.PI/2)*n;return[t,i]};var t=function(e){return 20037508.342789244*2/256/Math.pow(2,e)};return new Cf("EPSG:3857",e,r,t)}();var jf=function(){function e(e,r,t){if(t===void 0){t=false}this.className="AMap.Size";if(isNaN(e)||isNaN(r)){throw new Error("Invalid Object: Pixel("+e+", "+r+")")}this["width"]=t?Math.round(e):Number(e);this["height"]=t?Math.round(r):Number(r)}e.prototype["getWidth"]=function(){return this.width};e.prototype["getHeight"]=function(){return this.height};e.prototype["toString"]=function(){return this.width+","+this.height};e.prototype["toArray"]=function(){return[this.width,this.height]};return e}();var _f=function(e){var r=[];for(var t=1;t<arguments.length;t++){r[t-1]=arguments[t]}var i=Array.prototype.slice.call(arguments,1);var n;var f;var a;for(n=0,f=i.length;n<f;n=n+1){a=i[n]||{};for(var s in a){if(a.hasOwnProperty(s)){var u=a[s];if(typeof u!=="function"||!e.prototype){e[s]=u}else{e.prototype[s]=u}}}}return e};function Bf(){return typeof window!=="undefined"&&typeof document!=="undefined"}function Tf(){try{if(typeof WebAssembly==="object"&&typeof WebAssembly.instantiate==="function"&&TextDecoder&&TextEncoder){var e=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(e instanceof WebAssembly.Module){return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}}catch(e){}return false}var Ef=function(e){var r=new Image;r.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMw"+"AgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA";r.onload=r.onerror=function(){e(r.height===2)}};function Lf(){try{var e=!!document;return false}catch(e){return true}}function Rf(e){var r={runSupport:(new Date).getTime()};var L=false;var R=false;var N=false;var P=false;var D=false;var t=Tf();var i=navigator.userAgent.toLowerCase();var n=function(e){return i.indexOf(e)!==-1};var s=true;var f=n("macintosh");var a=n("ipad;")||n("ipad "),z=n("ipod touch;"),u=n("iphone;")||n("iphone "),o=u||a||z,l=(f||o)&&n("safari")&&n("version/"),U=n("macwechat"),W=n("windowswechat");var v={YV:D,WV:f,Ue:L,g:P,$e:R,scale:1,HV:N,DW:Lf(),AJ:t,safari:l,AQ:U,gQ:W,amapRunTime:r};if(Bf()){var c=window,h=document,d=h.documentElement,y=/([a-z0-9]*\\d+[a-z0-9]*)/,G=function(e){if(!e){return null}e=e.toLowerCase();var r=null;var t=e.match(/angle \\((.*)\\)/);if(t){e=t[1];e=e.replace(/\\s*direct3d.*$/,"")}e=e.replace(/\\s*\\([^\\)]*wddm[^\\)]*\\)/,"");if(e.indexOf("intel")>=0){r=["Intel"];if(0<=e.indexOf("mobile")){r.push("Mobile")}if(0<=e.indexOf("gma")||0<=e.indexOf("graphics media accelerator")){r.push("GMA")}if(0<=e.indexOf("haswell")){r.push("Haswell")}else if(0<=e.indexOf("ivy")){r.push("HD 4000")}else if(0<=e.indexOf("sandy")){r.push("HD 3000")}else if(0<=e.indexOf("ironlake")){r.push("HD")}else{if(0<=e.indexOf("hd")){r.push("HD")}var i=e.match(y);if(i){r.push(i[1].toUpperCase())}}r=r.join(" ");return r}if(e.indexOf("nvidia")>=0||e.indexOf("quadro")>=0||e.indexOf("geforce")>=0||e.indexOf("nvs")>=0){r=["nVidia"];if(0<=e.indexOf("geforce")){r.push("geForce")}if(0<=e.indexOf("quadro")){r.push("Quadro")}if(0<=e.indexOf("nvs")){r.push("NVS")}if(e.match(/\\bion\\b/)){r.push("ION")}if(e.match(/gtx\\b/)){r.push("GTX")}else if(e.match(/gts\\b/)){r.push("GTS")}else if(e.match(/gt\\b/)){r.push("GT")}else if(e.match(/gs\\b/)){r.push("GS")}else if(e.match(/ge\\b/)){r.push("GE")}else if(e.match(/fx\\b/)){r.push("FX")}var i=e.match(y);if(i){r.push(i[1].toUpperCase().replace("GS",""))}if(0<=e.indexOf("titan")){r.push("TITAN")}else if(0<=e.indexOf("ti")){r.push("Ti")}r=r.join(" ");return r}if(e.indexOf("amd")>=0||e.indexOf("ati")>=0||e.indexOf("radeon")>=0||e.indexOf("firegl")>=0||e.indexOf("firepro")>=0){r=["AMD"];if(0<=e.indexOf("mobil")){r.push("Mobility")}var n=e.indexOf("radeon");if(0<=n){r.push("Radeon")}if(0<=e.indexOf("firepro")){r.push("FirePro")}else if(0<=e.indexOf("firegl")){r.push("FireGL")}if(0<=e.indexOf("hd")){r.push("HD")}if(n>=0){e=e.substring(n)}var i=e.match(y);if(i){r.push(i[1].toUpperCase().replace("HD",""))}r=r.join(" ");return r}return e.substring(0,100)},H="google swiftshader;microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965".split(";"),m="ActiveXObject"in c,b=window["detectRetina"]==false?false:"devicePixelRatio"in c&&c["devicePixelRatio"]>1||m&&"matchMedia"in c&&c.matchMedia("(min-resolution:144dpi)")&&c.matchMedia("(min-resolution:144dpi)").matches,p=n("windows nt"),V=i.search(/windows nt [1-5]\\./)!==-1,q=i.search(/windows nt 5\\.[12]/)!==-1,J=n("windows nt 10"),Y=n("windows phone"),K=n("Mb2345Browser"),Q=o&&i.search(/ os [456]_/)!==-1,Z=o&&i.search(/ os [4-8]_/)!==-1,X=o&&i.search(/ os [78]_/)!==-1,ee=o&&n("os 8_"),re=o&&n("os 10_"),x=n("android");var w=0;if(x){w=parseInt(i.split("android")[1])||0}var te=x&&w<4,ie=x&&w>=5,ne=ie||i.search(/android 4.4/)!==-1,k=x?"android":o?"ios":p?"windows":f?"mac":"other",fe=m&&!c["XMLHttpRequest"],ae=m&&!h.querySelector,g=m&&!h.addEventListener,M=m&&n("msie 9"),se=m&&n("msie 10"),ue=m&&n("rv:11"),oe=g||M,I=n("edge"),le=n("qtweb"),A=n("ucbrowser"),ve=n("alipay")||x&&A,ce=n("miuibrowser"),he=n("micromessenger"),de=n("dingtalk"),ye=n("mqqbrowser"),me=n("baidubrowser"),be=n("crios/"),S=n("chrome/"),pe=(S||be)&&n("chromium"),xe=!pe&&(S&&parseInt(i.split("chrome/")[1])>30||be&&parseInt(i.split("crios/")[1])>30),we=n("firefox"),ke=we&&parseInt(i.split("firefox/")[1])>27,ge=l&&parseInt(i.split("version/")[1])>7,Me=o&&n("aliapp"),$=x||o||Y||n("mobile"),Ie="ontouchstart"in h,Ae=c["navigator"]&&c["navigator"]["msPointerEnabled"]&&!!c["navigator"]["msMaxTouchPoints"],Se=c["navigator"]&&!!c["navigator"]["maxTouchPoints"],$e=!Ie&&(Se||Ae),Ce=Ie||$e,Fe=function(){if(!$){return c.devicePixelRatio||1}var e=document.getElementsByTagName("meta");if(window.parent&&window.parent!==window){try{if(window.parent.location.origin===window.location.origin){e=window.parent.document.getElementsByTagName("meta")}else{return 1}}catch(e){return 1}}for(var r=e.length-1;r>=0;r-=1){if(e[r].name==="viewport"){var t=e[r].content;var i=void 0,n=void 0,f=void 0;if(t.indexOf("initial-scale")!==-1){i=parseFloat(t.split("initial-scale=")[1])}if(t.indexOf("minimum-scale")!==-1){n=parseFloat(t.split("minimum-scale=")[1])}else{n=0}if(t.indexOf("maximum-scale")!==-1){f=parseFloat(t.split("maximum-scale=")[1])}else{f=Infinity}if(i){if(f>=n){if(i>f){return f}else if(i<n){return n}else{return i}}else{console&&console.log&&console.log("viewport");return null}}else{if(f>=n){if(n>=1){return 1}else{return Math.min(f,1)}}else{console&&console.log&&console.log("viewport");return null}}}}return undefined},C=Fe(),Oe=b&&(!$||!!C&&C>=1),je=m&&"transition"in d.style,_e=!!h.createElementNS&&!!h.createElementNS("http://www.w3.org/2000/svg","svg")["createSVGRect"],F=h.createElement("canvas"),Be=!!(F&&F.getContext),Te=window["URL"]||window["webkitURL"],Ee=false;var Le=window["disableWorker"]!==true&&!m&&!(A&&x&&!xe)&&window["Worker"]&&Te&&Te["createObjectURL"]&&window["Blob"],O="",j="",_=0,Re=window["higtQualityRender"]==false?b?false:true:true,Ne=window["movingDraw"],B=window["forceWebGL"]?{alpha:true,antialias:Re,depth:true,stencil:true}:{alpha:true,antialias:Re,depth:true,stencil:true},Pe=function(){if(!Be||!Le){return false}var e=["webgl","experimental-webgl","moz-webgl"];var r=null;for(var t=0;t<e.length;t+=1){try{var i=B;r=F.getContext(e[t],i)}catch(e){}if(!r){continue}else{if(r.drawingBufferWidth!==F.width||r.drawingBufferHeight!==F.height){return false}if(!r.getShaderPrecisionFormat||!r.getParameter||!r.getExtension){return false}_=r.getParameter(r.MAX_RENDERBUFFER_SIZE);var n=r.getParameter(r.MAX_VIEWPORT_DIMS);if(!n){return false}_=Math.min(_,n[0],n[1]);if(l&&k==="mac"){_=Math.min(_,4096)}var f=Math.max(screen.width,screen.height);if(Oe){f*=Math.min(2,window.devicePixelRatio||1)}if(f>_){return false}if(23>r.getShaderPrecisionFormat(35632,36338).precision||23>r.getShaderPrecisionFormat(35633,36338).precision){return false}j=r.getExtension("WEBGL_debug_renderer_info")?r.getParameter(37446):null;var a=G(j);if(a){if(a.indexOf("google swiftshader")>-1){s=false;return false}if(-1!==H.indexOf(a)){return false}}O=e[t];return true}}return false},De=Pe(),ze=e[8]!==undefined?e[8]:true,Ue=window["Uint8Array"]&&ze&&!window["forbidenWebGL"]&&De&&(window["forceWebGL"]||(xe||ke||ge||I||he||de)&&k!=="other"),We=window["forceWebGLBaseRender"]?"w":Ue?"w":"d",Ge=n("webkit"),T="WebKitCSSMatrix"in c&&"m11"in new window["WebKitCSSMatrix"],He="MozPerspective"in d.style,Ve="vV"in d.style,qe=je||T||He||Ve,Je=false,Ye=e[12]!==undefined?e[12]:null;var E=true;try{if(typeof c.localStorage==="undefined"){E=false}else{var Ke=(new Date).getTime()+"";c.localStorage.setItem("_test",Ke);if(c.localStorage.getItem("_test")!==Ke){E=false}c.localStorage.removeItem("_test")}}catch(e){E=false}var Qe=function(e,r){var t={};_f(t,B);_f(t,r);return e.getContext(O,t)};var Ze=parseInt(i.split("chrome/")[1]);v={qV:a,KV:u,size:u?100:x?200:500,WV:f,ZV:p,JV:o,uT:re,HV:x,QV:te,cT:ve,eq:k,rq:me,nq:ye,safari:l,iq:he,ie:m,aq:fe,oq:ae,sq:M,uq:se,xv:g,fT:oe,cq:ue,fq:I,hT:m&&!ue,lT:K,RL:E,vT:Ye,geolocation:$||m&&!g||I,SL:A,uc:A&&!S,chrome:S,gT:true,hq:we,vee:s,$e:$,lq:$&&Ge,dq:$&&T,vq:$&&c.opera,Ue:b,bT:C,Mr:Oe,YV:Ce,gq:Ae,pq:Se,yT:$e,pT:S&&Ze>=57,mT:!$&&S&&Ze>=64,g:Ge,bq:je,yq:T,mq:He,Tq:Ve,Mq:qe,Aq:_e,xq:Be,Eb:Le,TT:Je,Tm:Ue,AT:O,xT:B,ST:j,wT:_,MT:Ee,movingDraw:Ne,baseRender:ze?We:"d",scale:b?2:1,getContext:Qe,mH:false,AJ:t,amapRunTime:r,sY:Pe};Ef(function(e){v.mH=e})}return v}var $=Rf(typeof config==="undefined"?[]:config);if(typeof createImageBitmap!=="undefined"&&typeof ImageBitmap!=="undefined"){$.imageBitmap=true}var Nf=Boolean($.DW?!$.safari&&!$.AQ&&!$.gQ&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"):!$.safari&&!$.AQ&&!$.gQ&&window.fetch&&window.Request&&window.AbortController&&window.Request.prototype.hasOwnProperty("signal"));$.LZ=Nf;$["amapRunTime"]={workerTime:{}};var Pf=function(){function t(e,r,t){if(t===void 0){t=false}this.className="AMap.Pixel";if(isNaN(e)||isNaN(r)){if(!window._AMapConfig){throw Error("Invalid Object: Pixel("+e+", "+r+")")}}this["x"]=t?Math.round(e):Number(e);this["y"]=t?Math.round(r):Number(r)}t.prototype["getX"]=function(){return this.x};t.prototype["round"]=function(){return new t(Math.round(this.x),Math.round(this.y))};t.prototype["getY"]=function(){return this.y};t.prototype["toString"]=function(){return this.x+","+this.y};t.prototype["equals"]=function(e){if(!(e instanceof t)){return false}var r=Math.max(Math.abs(this.x-e.x),Math.abs(this.y-e.y));return r<=1e-9};t.prototype["toArray"]=function(){return[this.x,this.y]};t.prototype["subtract"]=function(e,r){return new t(this.x-e.x,this.y-e.y,r)};t.prototype["multiplyBy"]=function(e,r){return new t(this.x*e,this.y*e,r)};t.prototype["direction"]=function(){var e=this.x;var r=this.y;if(e===0&&r===0){return null}if(e===0){return r>0?90:270}var t=Math.atan(r/e)*180/Math.PI;if(e<0&&r>0){return t+180}else if(e<0&&r<0){return t+180}else if(e>0&&r<0){return t+360}else{return t}};t.prototype.toJSON=function(){return[this.x,this.y]};return t}();var Df=function(){var a={};var s=4;var l=.001;var u=1e-7;var o=10;var v=11;var c=1/(v-1);var h=typeof Float32Array==="function";function i(e,r){return 1-3*r+3*e}function n(e,r){return 3*r-6*e}function f(e){return 3*e}function d(e,r,t){return((i(r,t)*e+n(r,t))*e+f(r))*e}function y(e,r,t){return 3*i(r,t)*e*e+2*n(r,t)*e+f(r)}function m(e,r,t,i,n){var f,a,s=0;do{a=r+(t-r)/2;f=d(a,i,n)-e;if(f>0){t=a}else{r=a}}while(Math.abs(f)>u&&++s<o);return a}function b(e,r,t,i){for(var n=0;n<s;++n){var f=y(r,t,i);if(f===0){return r}var a=d(r,t,i)-e;r-=a/f}return r}function p(e){return e}return function(s,r,u,t){if(!(0<=s&&s<=1&&0<=u&&u<=1)){throw new Error("bezier x values must be in [0, 1] range")}var e=arguments.toString();if(a[e]){return a[e]}if(s===r&&u===t){return p}var o=h?new Float32Array(v):new Array(v);for(var i=0;i<v;++i){o[i]=d(i*c,s,u)}function n(e){var r=0;var t=1;var i=v-1;for(;t!==i&&o[t]<=e;++t){r+=c}--t;var n=(e-o[t])/(o[t+1]-o[t]);var f=r+n*c;var a=y(f,s,u);if(a>=l){return b(e,f,s,u)}else if(a===0){return f}else{return m(e,r,r+c,s,u)}}var f=function(e){if(e===0){return 0}if(e===1){return 1}return d(n(e),r,t)};a[e]=f;return f}}();function zf(e,r,t,i){if(e>=1){return i}var n=1-e;return n*n*r+2*n*e*t+e*e*i}function Uf(e,r,t,i,n){if(e>=1){return n}var f=3*(t.pos[0]-r.pos[0]),a=3*(i.pos[0]-t.pos[0])-f,s=n.pos[0]-r.pos[0]-f-a;var u=3*(t.pos[1]-r.pos[1]),o=3*(i.pos[1]-t.pos[1])-u,l=n.pos[1]-r.pos[1]-u-o;var v=s*Math.pow(e,3)+a*Math.pow(e,2)+f*e+r.pos[0];var c=l*Math.pow(e,3)+o*Math.pow(e,2)+u*e+r.pos[1];return I.getProjection("EPSG:3857").unproject(v,c)}function Wf(e,r,t,i){return I.getProjection("EPSG:3857").unproject(zf(e,r.pos[0],t.pos[0],i.pos[0]),zf(e,r.pos[1],t.pos[1],i.pos[1]))}function Gf(e,r){if(Array.isArray(r)){r=new Pf(r[0],r[1])}return e.ai(r,20)}function Hf(e,r){var t={tolerance:4,interpolateNumLimit:[3,300]};var i=t["tolerance"],n=t["interpolateNumLimit"];i=Math.max(2,i);var f=0,a=0;for(var s=0,u=e.length;s<u-1;s++){var o=e[s],l=e[s+1];f+=Math.abs(l.pos[0]-o.pos[0]);a+=Math.abs(l.pos[1]-o.pos[1])}return Math.min(n[1],Math.max(n[0],Math.round(Math.max(f,a)/r/i)))}function Vf(e,r){var t=null;switch(r.length){case 3:t=Wf;break;case 4:t=Uf;break;default:return null}var i=[];var n=[0].concat(r);for(var f=1;f<e-2;f++){n[0]=f/e;i.push(t.apply(null,n))}i.push(r[r.length-1]);return i}function qf(e,r,t,i){var n=null;if(e&&t&&t.length){var f=[e];f.push.apply(f,t);f.push(r);var a=f.length;var s=Hf(f,i);n=Vf(s,f)}return n||[r]}var Jf={ag:Wf,ug:Uf,sg:Df,xb:function(e,r){var t,i,n=[];for(t=0,i=e.length;t<i;t+=1){n.push.apply(n,qf(e[t-1],e[t],e[t]["controlPoints"],r))}return n},fg:function(e,r,t,i){var n=this.xb(e,r,t,i);var f=[];for(var a=0,s=n.length;a<s;a++){f.push(Gf(r,n[a]))}return f}};var Yf=function(){function e(){this.hg=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244];this.cg=128;this.vg=128;this.lg=(this.hg[2]-this.hg[0])/this.cg;this.dg=(this.hg[3]-this.hg[1])/this.vg}e.prototype.setMap=function(e){this.map=e};e.prototype.getSize=function(){return[this.lg,this.dg]};e.prototype.getNum=function(){return[this.cg,this.vg]};e.prototype.getLocalByLnglat=function(e){var r;var t=(r=I.getProjection("EPSG:3857")).project.apply(r,e);return this.getLocalByCoord(t)};e.prototype.getLocalByCoord=function(e){var r=Math.floor(e[0]/this.lg);var t=Math.floor(e[1]/this.dg);var i=this.getLocalCenterByXY(r,t);var n=[e[0]-i.center[0],e[1]-i.center[1]];return{Sa:n,x:r,y:t,center:i.center,Ro:i.Ro}};e.prototype.getLocalCenterByXY=function(e,r){var t={x:e,y:r,center:[0,0],Ro:[0,0,0,0]};t.center=[(e+.5)*this.lg,(r+.5)*this.dg];t.Ro=[e*this.lg,r*this.dg,(e+1)*this.lg,(r+1)*this.dg];return t};e.prototype.getDeltaCoord=function(e){var r=this.getLocalByCoord(e);return[e[0]-r.center[0],e[1]-r.center[1]]};return e}();var Kf=new Yf;var Qf;(function(e){e["LITE"]="lite";e["LEFT"]="left";e["ALL"]="all";e["NONE"]=""})(Qf||(Qf={}));var Zf={2:"all",3:"all",4:"all",5:"all",6:"lite",7:"all",8:"lite",9:"all",10:"lite",11:"lite",12:"all",13:"all",14:"all",15:"lite",16:"lite",17:"all",18:"all",19:"all",20:"all"};var Xf={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",grey:"#808080",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var S=function(){var u={CLASS_NAME:"AMap.Util",WorldAxesCenter:{x:0,y:0},Single:{},stamp:function(){var r=$.DW===true;var t=1e5;var i="_amap_id";return function(e){e[i]=r?++t:--t;return e[i]}}(),singlton:function(e){var r=c.Single;var t=r[e];if(!t){t=new e}return t},getOptimalZoom:function(e){return e<Math.floor(e)+.8?Math.floor(e):Math.ceil(e)},join:function(e,r){if(e.join){return e.join(r)}else{var t=[];for(var i in e){if(e.hasOwnProperty(i)){t.push(i+"="+(e[i]||""))}}return t.join(r)}},getGuid:function(e,r){if(r===void 0){r=10}return(e||"")+Math.round(Math.random()*Math.pow(10,r))+"_"+(new Date).getTime()},uuid:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(e,r){if(e===void 0){e=0}if(r===void 0){r=62}var t=a;var i=[];var n;r=r||t.length;if(e){for(n=0;n<e;n++){i[n]=t[0|Math.random()*r]}}else{var f=void 0;i[8]=i[13]=i[18]=i[23]="-";i[14]="4";for(n=0;n<36;n++){if(!i[n]){f=0|Math.random()*16;i[n]=t[n===19?f&3|8:f]}}}return i.join("")}}(),endsWith:function(e,r){if(e["endsWith"]){return e["endsWith"](r)}if(e.length<r.length){return false}if(e.substr(e.length-r.length)===r){return true}return false},mg:[],gg:268435456,wg:[215440491,106744817],Mg:{start:function(r){r.startTime=new Date;r.jg=[];var t=(new Date).getTime();var i=function(){var e=(new Date).getTime();r.jg.push(e-t);t=e;r.id=c.requestAnimFrame(i)};r.id=c.requestAnimFrame(i)},cancel:function(e){if(e.id){c.cancelAnimFrame(e.id)}},stop:function(e){e.Ag=Date.now()-e.startTime;this.cancel(e);e.Mg=Math.round(1e3/(e.Ag/(e.jg.length+1)))}},kg:function(e,r,t,i,n){if(i===void 0){i="linear"}if(n===void 0){n=false}if(e===r){return r}else{switch(i){case"ease":t=Jf.sg(.25,.1,.25,1)(t);break;case"ease-in":t=Jf.sg(.42,0,1,1)(t);break;case"ease-out":t=Jf.sg(0,0,.58,1)(t);break;case"ease-in-out":t=Jf.sg(.42,0,.58,1)(t);break}var f=e+(r-e)*t;if(n){f=f>>0}return f}},createObjectURL:function(e,r){if(r===void 0){r="text/javascript; charset=utf-8"}var t=null;try{var i=w["URL"]||w["webkitURL"];t=i["createObjectURL"](new Blob([e],{type:r}))}catch(e){t=null}return t},revokeObjectURL:function(e){try{var r=w["URL"]||w["webkitURL"];r["revokeObjectURL"](e)}catch(e){}},Og:function(e){var r={};for(var t=0,i=e.length;t<i;t++){r[e[t]]=t}return r},EV:function(e,r){var t=Math.pow(2,r);var i=360/t;var n=180/t;var f=Math.floor(e[0]/i)+t/2;var a=t/2-Math.ceil(e[1]/n);return[f,a]},WY:function(e,r,t){if(t===void 0){t=false}var i=[e[0],e[3]];var n=[e[2],e[1]];var f=this.EV(i,r);var a=this.EV(n,r);var s=f[0];var u=f[1];var o=a[0];var l=a[1];if(t){return{ja:s,Fa:u,Oa:o,Ea:l,z:r}}this.Pa={ja:s,Fa:u,Oa:o,Ea:l,z:r};var v=[];for(var c=s;c<=o;c+=1){for(var h=u;h<=l;h+=1){v.push([r,c,h])}}return v},xg:function(e){var r={};if(c.is(e,"object")){for(var t in e){if(e.hasOwnProperty(t)){r[e[t]]=t}}}return r},Ig:function(e,r){if(r.length<5e4){e.push.apply(e,r);return}for(var t=0,i=r.length;t<i;t+=1){e.push(r[t])}},clone:function(e){if(typeof e==="object"&&e!==null){if(e.Tg||this.is(e,"Float32Array")||this.is(e,"Uint16Array")){return e}else{var r=this.isArray(e)?[]:{};for(var t in e){if(e.hasOwnProperty(t)){r[t]=c.clone(e[t])}}return r}}else{return e}},isInteger:function(e){return(e|0)===e},vB:function(e){return!isNaN(e)},setPrototypeOf:function(){if(typeof Object["setPrototypeOf"]==="function"){return Object["setPrototypeOf"]}else{return function(e,r){for(var t in r){e[t]=r[t]}}}}(),isFunction:function(e){return typeof e==="function"},_g:function(e,r){if(r===void 0){r="webgl"}if(!e){return e}var t=[];for(var i=0,n=e.length;i<n;i+=2){var f=parseInt(e.substr(i,2),16);if(r==="webgl"||r==="rgba"&&i===0){f=this.format(f/255,3)}t.push(f)}t.push(t.shift());return t},Sg:function(){},keys:function(){if(typeof Object.keys==="function"){return Object.keys}else{return function(e){var r=[];for(var t in e){if(e.hasOwnProperty(t)){r.push(t)}}return r}}}(),map:function(i,n,f){if(f===void 0){f=null}var a=[];if(i&&i.length){c.Cg(i,function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var t=e[1];a[t]=n.apply(f||i,e)})}else{return i}return a},forEach:function(e,r){if(e&&e.length){var t=e.length;if(t>0){r(e[0],0);if(t>1){r(e[1],1);for(var i=2;i<t;i++){r(e[i],i)}}}}},Cg:function(e,r,t){if(t===void 0){t=null}if(e&&e.length){for(var i=0,n=e.length;i<n;i++){if(r.call(t,e[i],i,e)===false){break}}}},find:function(e,r,t){if(t===void 0){t=null}for(var i=0,n=e.length;i<n;i++){if(typeof r==="function"){if(r.call(t,e[i],i,e)){return e[i]}}else{if(e[i]===r){return e[i]}}}return null},isDOM:function(e){if(typeof HTMLElement==="object"){return e instanceof HTMLElement}else{return e&&typeof e==="object"&&e.nodeType===1&&typeof e.nodeName==="string"}},Eg:function(e,r){var t="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";r=r||"v5";var i,n;if(r>"v5"){i=t.length;n=512}else{i=27;t=t.substr(0,27);n=333}var f,a,s,u,o;a=[];s=NaN;for(u=0,o=e.length;u<o;u++){f=e[u];f=t.indexOf(f);if(isNaN(s)){s=f*i}else{a.push(s+f-n);s=NaN}}return a},Ng:function(e,r){var t=1;if(r.length>512){t=Math.round(Math.pow(r.length,.5))}else{t=r.length}var i=Math.ceil(r.length/t);for(var n=0;n<i;n+=1){var f=t*n;var a=f+t;if(a>r.length){a=r.length}for(var s=f;s<a;s+=1){e(r[s])}}},Lg:function(e){if(/^rgba\\(/.test(e)){return this.Dg(e)}else{var r=this.colorNameToHex(e);var t=r;if(r[0]==="#"){r=r.substring(1);if(r.length===3){r=r.replace(/./g,function(e){return e+e})}t=this.argbHex2Rgba(r.length===8?r:"ff"+r)}return this.Dg(t)}},colorNameToHex:function(e){if(e===void 0){e=""}e=e.toLowerCase();if(typeof e==="string"){if(Xf[e]){return Xf[e]}else{return e}}else{return e}},Rg:function(e,r,t){var i,n,f,a,s,u;a=Math.floor(t/2);f=t-a;i=(1<<a)-1<<f;n=(1<<f)-1;u=r&i|e&n;s=e&i|r&n;return[t,s,u]},Pg:function(e){if(e){return encodeURIComponent(e)}return""},getStyle:function(e,r,t,i){var n,f,a;a=e[r]["i"][t];if(typeof a==="undefined"){return null}f=e[r]["s"];if(typeof a==="number"){return f[a]}while(typeof a[i.toString()]==="undefined"){i-=1;if(i<3){break}}n=a[i.toString()];if(typeof n==="number"){return f[n]}else{return null}},Dg:function(e){var r=e.split(",");r[0]=parseFloat(r[0].split("rgba(")[1])/255;r[1]=parseFloat(r[1])/255;r[2]=parseFloat(r[2])/255;r[3]=parseFloat(r[3]);return r},Ug:function(e){var r=e.split(",");r[0]=parseFloat(r[0].split("rgb(")[1])/255;r[1]=parseFloat(r[1])/255;r[2]=parseFloat(r[2])/255;return r},Bg:function(e){return"rgba("+e[0]*255+","+e[1]*255+","+e[2]*255+","+e[3]+")"},color2Rgba:function(e){return this.Bg(this.color2RgbaArray(e))},color2RgbaArray:function(e){if(e instanceof Array){if(e.length==3){e.push(1)}return e}var r=this.colorNameToHex(e);if(r.indexOf("rgb(")==0){var t=this.Ug(r);t.push(1);return t}else if(r.indexOf("rgba(")==0){return this.Dg(r)}else if(r.indexOf("#")==0){if(r.length===4){var i=r.substr(1);var n=i.replace(/./g,function(e){return e+e});return this.zg(n)}else if(r.length==7){return this.zg(r.substr(1))}else if(r.length==9){var f=r.substr(1);return this.qg(f)}}else if(r.indexOf("hsla")===0){var a=e.substr(5).split(",");var s=parseInt(a[0],10)/360;var u=parseInt(a[1],10)/100;var o=parseInt(a[2],10)/100;var l=parseFloat(a[3]);return this.GQ(s,u,o,l)}else if(r.indexOf("hsl")===0){var a=e.substr(4).split(",");var s=parseInt(a[0],10)/360;var u=parseInt(a[1],10)/100;var o=parseInt(a[2],10)/100;return this.GQ(s,u,o,1)}else{if(r.length===3){var n=r.replace(/./g,function(e){return e+e});return this.zg(n)}else if(r.length==6){return this.zg(r)}else if(r.length==8){return this.qg(r)}}},GQ:function(e,r,t,i){var n;var f;var a;if(r===0){n=f=a=t}else{var s=t<.5?t*(1+r):t+r-t*r;var u=2*t-s;n=this.uQ(u,s,e+1/3);f=this.uQ(u,s,e);a=this.uQ(u,s,e-1/3)}return[n,f,a,i]},uQ:function(e,r,t){if(t<0){t+=1}if(t>1){t-=1}if(t<1/6){return e+(r-e)*6*t}if(t<1/2){return r}if(t<2/3){return e+(r-e)*(2/3-t)*6}return e},rgbHex2Rgba:function(e){if(e.startsWith("#")){e=e.slice(1)}return c.argbHex2Rgba("ff"+e)},argbHex2Rgba:function(e){if(e.startsWith("#")){e=e.slice(1)}var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push((r.shift()/255).toFixed(2));return"rgba("+r.join(",")+")"},Opacity2Rgba:function(e,r){var t=r;if(r&&r[3]&&e){r[3]=Math.floor(255*e)}return t},Hex2Rgba:function(e){if(typeof e!=="string"){return false}var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16))}r.push(parseInt(r.shift()));return r},zg:function(e){return this.uE(e+"ff")},qg:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=2){r.push(parseInt(e.substr(t,2),16)/255)}r.push(r.shift());return r},uE:function(e){var r=parseInt(e,16);var t=[(r>>24&255)/255,(r>>16&255)/255,(r>>8&255)/255,(r&255)/255];return t},isEmpty:function(e){for(var r in e){if(e.hasOwnProperty(r)){return false}}return true},Wg:function(e,r){if(r>=0){e.splice(r,1)}return e},startsWith:function(e,r){if(e["startsWith"]){return e["startsWith"](r)}else{return e.substr(0,r.length)===r}},deleteItemFromArray:function(e,r){var t=c.indexOf(e,r);return c.Wg(e,t)},deleteItemFromArrayByIndex:function(e,r){return c.Wg(e,r)},filter:function(e,t,i){var n=[];c.Cg(e,function(e,r){if(t.call(i,e,r)){n.push(e)}});return n},indexOf:function(e,r){if(!e||!e.length){return-1}if(e["indexOf"]){return e["indexOf"](r)}else{for(var t=0;t<e.length;t+=1){if(e[t]===r){return t}}return-1}},Gg:function(e,r){if(e["endsWith"]){return e["endsWith"](r)}if(e.length<r.length){return false}if(e.substr(e.length-r.length)==r){return true}return false},bind:function(){var i=false;if(Boolean(Function.prototype.bind)){i=true}return function(e,r){var t=arguments.length>2?Array.prototype.slice.call(arguments,2):null;if(i){if(t){t.unshift(r);return e.bind.apply(e,t)}else{return e.bind(r)}}else{return function(){return e.apply(r,t||arguments)}}}}(),setOptions:function(e,r){r=r||{};e.opts=l({},e.opts,r);return e.opts},yn:function(e,r,t){return typeof r=="function"?this.Hg(e,true,this.Vg(r,t,1)):this.Hg(e,true)},Hg:function(t,i,n,e,r,f,a){var s;if(n){s=r?n(t,e,r):n(t)}if(s!==undefined){return s}if(!this.$g(t)){return t}var u=this.isArray(t);if(u){s=this.Yg(t);if(!i){return this.Kg(t,s)}}else{var o=Object.prototype.toString.call(t),l=o=="[object Function]";if(o=="[object Object]"||o=="[object Arguments]"||l&&!r){s=this.Xg(l?{}:t);if(!i){return this.baseAssign(s,t)}}else{return r?t:{}}}f||(f=[]);a||(a=[]);var v=f.length;while(v--){if(f[v]==t){return a[v]}}f.push(t);a.push(s);(u?this.Zg:this.Qg)(t,function(e,r){s[r]=c.Hg(e,i,n,r,t,f,a)});return s},baseAssign:function(e,r){return r==null?e:this.tM(r,Object.keys(r),e)},$g:function(e){var r=typeof e;return!!e&&(r=="object"||r=="function")},rM:function(e){return!!e&&typeof e=="object"},nM:function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},Yg:function(e){var r=e.length,t=new Array(r);if(r&&typeof e[0]=="string"&&Object.hasOwnProperty.call(e,"index")){t.index=e.index;t.input=e.input}return t},Kg:function(e,r){var t=-1,i=e.length;r||(r=Array(i));while(++t<i){r[t]=e[t]}return r},Xg:function(e){var r=e.constructor;if(!(typeof r=="function"&&r instanceof r)){r=Object}return new r},Vg:function(f,a,e){if(typeof f!="function"){return this.identity}if(a===undefined){return f}switch(e){case 1:return function(e){return f.call(a,e)};case 3:return function(e,r,t){return f.call(a,e,r,t)};case 4:return function(e,r,t,i){return f.call(a,e,r,t,i)};case 5:return function(e,r,t,i,n){return f.call(a,e,r,t,i,n)}}return function(){return f.apply(a,arguments)}},Zg:function(e,r){var t=-1,i=e.length;while(++t<i){if(r(e[t],t,e)===false){break}}return e},identity:function(e){return e},iM:function(u){return function(e,r,t){var i=c.eM(e),n=t(e),f=n.length,a=u?f:-1;while(u?a--:++a<f){var s=n[a];if(r(i[s],s,i)===false){break}}return e}},Qg:function(e,r){var t=c.iM();return t(e,r,Object.keys)},eM:function(e){return c.$g(e)?e:Object(e)},tM:function(e,r,t){t||(t={});var i=-1,n=r.length;while(++i<n){var f=r[i];t[f]=e[f]}return t},oM:function(){return false},aM:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",uM:function(){return Date.now?function(){return Date.now()}:function(){return(new Date).getTime()}}(),sM:function(e,r,t,i){var n;if(i){var f=0,a,s=this.uM;n=function(){a=s();if(a-f<r){return false}f=a;e.apply(t,arguments)}}else{var u,o,l;l=function(){u=false;if(o){n.apply(t,o);o=false}};n=function(){if(u){o=arguments}else{u=true;e.apply(t,arguments);setTimeout(l,r)}}}return n},format:function(e,r){if(e===e<<0){return e}return+parseFloat(e+"").toFixed(r||0)},isArray:function(){if(Array.isArray){return Array.isArray}else{return function(e){return this.is(e,"array")}}}(),is:function(e,r){return Object.prototype.toString.call(e).split(" ")[1].slice(0,-1).toLowerCase()===r.toLowerCase()},includes:function(){if(typeof Array.prototype.includes==="function"){return function(e,r){return e.includes(r)}}else{return function(e,r){return this.indexOf(e,r)!==-1}}}(),fM:function(e){var r=0;if(e.length===0){return r}var t;for(var i=0,n=e.length;i<n;i+=1){t=e.charCodeAt(i);r=(r<<5)-r+t;r=r&r}return r},hM:function(e,r){r=r?Math.ceil(parseInt(r.substr(6))/24):1;var t="";for(var i=0,n=e.length;i<n;i++){t+=String.fromCharCode((e.charCodeAt(i)-256-r+65535)%65535)}return t},cM:function(e,r){var t=(e+"").slice(-2);var i=(r+"").slice(-2);e=e.slice(0,-2);r=r.slice(0,-2);var n=parseInt((i+t).slice(1));var f=Math.ceil(n/250)%2?1:-1;var a=n/500>1?1:-1;var s=parseInt("1"+t)/3e3;var u=parseInt("1"+i)/3e3;e-=s*f;r-=u*a;return new j(parseFloat(e).toFixed(5),parseFloat(r).toFixed(5))},vM:function(e){if(typeof JSON!=="undefined"&&JSON.stringify){return c.fM(JSON.stringify(e))}return null},lM:function(e,r){var t="_amap_hash";if(r||!e.hasOwnProperty(t)){var i=c.vM(e);if(i){e[t]=i}}return e[t]},parseLngLatData:function(e){if(c.isArray(e)){if(c.isArray(e[0])){for(var r=0;r<e.length;r+=1){e[r]=c.parseLngLatData(e[r])}}else{var t=typeof e[0];if(t==="string"||t==="number"){return new j(e[0],e[1])}else{return e}}}return e},dM:function(e){var r=[];for(var t=0,i=e.length;t<i;t+=1){r[t]=[e[t].x,e[t].y]}return r},bM:function(e){if(c.isArray(e)){return new jf(e[0],e[1])}return e},hp:function(e,r){var t=[0,0];var i=c.getOptimalZoom(r.viewState.zoom);if(e&&i>=Ki){var n=Kf.getSize();var f=r.viewState.centerCoord;var a=Kf.getLocalByCoord([f[0],f[1]]);var s=e.x-a.x;var u=e.y-a.y;if(s!==0){s*=n[0];t[0]=s}if(u!==0){u*=n[1];t[1]=u}}else if(e){t[0]+=e.center[0];t[1]+=e.center[1]}return t},dS:function(e,r){return e>=r[0]&&e<=r[1]},kD:function(e,r,t){if(e===void 0){e=""}if(t===void 0){t=false}var i=e.split(",")[0]||"";if(t){return"all"}if(i&&r){return Zf[r]||"all"}return"all"},VF:function(e,r,t){if(t===void 0){t=false}if(t){return"all"}if(e&&r){return Zf[r]||"all"}return"all"},LD:function(e,r){var t=false;if(!e||!r){return t}var i=this.iN(e);var n=this.iN(r);return i>=n},SD:function(e){if(e===void 0){e="all"}var r;switch(e){case"lite":{r=0;break}case"left":{r=1;break}case"all":default:{r=2}}return r},pW:function(e){if(e===void 0){e=2}var r;switch(e){case 0:{r=Qf.LITE;break}case 1:{r=Qf.LEFT;break}case 2:default:{r=Qf.ALL}}return r},iN:function(e){var r=0;switch(e){case"lite":{r=0;break}case"left":{r=1;break}case"all":{r=2;break}}return r},loadBaxia:function(r){if(!window){r({code:"0",I8t:""})}if(window["__AMap_web_baxia__"]){r({code:"2",I8t:""})}else{window["__AMap_web_baxia__"]=true;var e=document.body||document.head;var t=document.createElement("script");t.type="text/javascript";t.src="//g.alicdn.com/??AWSC/AWSC/awsc.js,sd/baxia-entry/baxiaCommon.js";t.onerror=function(e){window["__AMap_web_baxia__"]=false;r({code:"0",I8t:""})};t.onload=function(){r({code:"1",I8t:""})};e.appendChild(t)}},A8t:function(){var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAS1BMVEVHcEyWlpaOjo6NjY2QkJCPj4+SkpKNjY2Ojo6Ojo6YmJiZmZmOjo6Ojo6MjIyLi4uFhYWxsbGurq6rq6ugoKDMzMyMjIyIiIh/f3+kL2ynAAAAFnRSTlMACImbKUo47150Ehzdrcy731qBodA76gxQtQAACo1JREFUeNrt3FlyIysQBdDLPENJsm/W/lf6QiCpvYRXNuejI2r4yS5IZwI2tm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btm3btv875ZPHn5Xd/SAN/hhV5r8udcoZGgf+GBMskCvJnixQK/6YxAjAkBZPPeBvsHeHybIBQJSEpxEUfj8Vh5wGSyVKKiow/5ERoJwh2QqWPFhJjcT0F/4DimuBcsQM8wCg0iDJES0UCfzmJJgS4LsIe/IAslQAmRyaDU+RGlAc+KV4KnwfD6cQ6zfgqQHAFxTylf/EwZ4P/FKP0wOITcHL6RHFYnEkg1vDIXtJv27SJ0yOCUA8Q4ENCY2pGTwl0ozTZMDL0ejxeyivB4UWTyVUEyxujICPhqQwA0AbYeBxOgCRrPgtbGwiZGuSAFgTSHYLuHjvQnbtNCMAhGTOjFjWaAgOv0CJJpDSjcvIbAAia2UE4jgooSWLd8b/Pq1jxKJFaBQuLXvdecpxMGGqogBlYSUBTWry79a/JgB3UVYapiLVDjkcrsyTHDePIgaTllfE7ICTCAA2NXK+oM4DYMDUzhugKT0qXJZiVXg6ZlQ5DkmYGpEde17zo2kaADkYoJ0WAOx5AIBvpMF1FCz2NtKKM+NJ0/lUSeHAlJhCS5/k4OhmuB6IKwnU84bJj4TLaMED2ekqJ82M8zXKDUmGEW2XjKdMoYPv7Hg6qPBiOQCY0+CCHKseJNmixxrIjxxNEJIr32mZH1ZpCfM6slsgScJHoEKUqnA5NhmS7OwKb3Xe0e4ImBwNABsYQnnXfsmx4x9DBz++cS3FmUpyaJctNQClVjQyYgGgxeFJSQXwHWKUiMkPksYqvDkmXIjPgNKdQpFbAYCbuBLHsaKIdCsqMUC5mUpaAAqFA4sKp5Ch9hHXtVcXKvKqJEAFjuSTGADIDwkiZF+vsGOSoLsI+2DEVLni9PW822gCed5xIWruXLBLA2DzSnDJpy5Su3bq68yvOAH4NIQMJhZYNkzm/H7lgNeHL1bhKp5x8qzGZXyJwmIThawmxRmYODxpakNK6EzrxRAwufMO+C7V4VrsbQSRrxYLnu6nn+GYKqyzsUmsUaFQf5Y4qvawojF9unx22Mu1O96slbzkAZQUAb9mbpMjOWAkwGsypBwqnix7Wek/YFqL/lkPdiBGXEuSqp0CgnGPgxyvtuZdwBqmlR8Ck2YB1vNpiH8NGQNAVRqLi7DD4cWLXuFSDhOpAQxmAFka8H12TN7rT2Mffn55HxvX/VxwGV4apk84VaIC1jdOdO89HZE8EyQlAYUNTzUoPFkZwP2UHnE5NeCtiV3LdUk5xhWYefV7hyRngjC00D8tsArhR42fo8VFFOM+O/aGFoCLr7nuZHgTAhmdtSV/rcad2uhMjuSBxgI8ZmNfZGDxHldipa8V/LKmbzbzRmFbTb5m7SR5ft/FAlAyPl8ds9C/nWkWxhrXdFC9G/osw4XzDHlNh5yR25zmLqb0XsGYFdFDMpTXde7psAOIweEqsis/hqqmB1BoAAzKebuf7n07CVPJWOzZAGA+vp2t8WTQHipKBYCicBWWWsXHcVY8OUl4DeoU2Cy+T72a1RI4yu0kj0f5N1YsDVBIaTcLQJMh4lJUJCnnSBZT6MpZaMbBc/Z80gFkDmXiHP66n3b1/H6+XwFErzClkQouQh8Z36lTGIzHm68MHHCkpMz6nuXoVPj4OVbaWXBNB5FOCcbVDpTUawF8ELIm7yqrBWZzm8S/5zpi0trolKL/7ONHueGSChv8HPeDrQqDRMBWnUQDQY76LvcSI7BSgapcxMyLlQQaLkmLW6d1jsDKI6vTYOIB3EoSv/KjIT0AJV+AKjlnBWTvUhOuajhaXIF1n76eK3kdAEoQVkaYAIyAqbEAcKLXS/VweBpSsGRnKoVNS8JlqCp+ruGKsFsA+rwh2ywVOO8ovPlO/+PY4kqAjUUBfvg11z/BV+0V4BWuIzIMklW7jDmlD0BLNgFoX1bzlNAK8P7J/kqAUVYRoOdte/8SMuiYcTE+DZLBOLwlsUA9cTtjrKdwaA/g3/KdRTpvQBlrNDQAlRQxsVzwmEYgZczPFlv1r3m88ncRymHcvNNE48mwROYiBm/s87ax6lJfPQPwVU45kgXgdSWDJLxp8UC6FQB+zuwvhyfPgz0jHJiKGzQA3Mi4ihJbEEYA/njcMlDuXydDixmh4yUHzoDXzK46loIp8tUKWSh//xJhK7iOHE2lBBPZ8HI/eI67XV9XChYz49Rr68IpwK62Z7BGAHAMjRRpyeIirLYwgVzzPQS8PM40H6cRpJqM6Xa2GgDdZ3yhF6jHeQMM3280smuvcB2JNzTGdSolkBaLY1S3FsgZrE3DrVbAvN4YUSWhA4ZYFIc3W3AtR5jB+rldkxITlkwKq3Ez2x0UMQC+3VrCMqvp893ppIQZl5ItPla/kgMZmpthd7zoFucU6CRH8l8HpiINkIq2wq4CpxUupTFDOd3U6m/zSt7vYDs+ShwUdm2B51y3mL4ECH3t5ivHgOsoCk+appGsGUA671iNuxuBrNr+KIXedaBN8XMiay1hc6Cw6k6RiMtIwQNlBnaO5AHAswKpKS/vYOFaLQAGOZIF1Hy/rqE/ufNWTg0YMrRYcB1RHveD5JCQsXSxQCCgkwLgdQ9kL8Crqted7Npq2pktJyWtjBsA53ElLlWKzIMKo0JFBQC3tFaz3wlADmnq39Zm4nAZgJW0Frmnzoyr8SNQaqB7zW/lGBwWTb+ev6teq91r7aMwAeXWAs2PE1lRZ1xNZE8eWgqePBPcu8NRgRmOq7ZDOXicr63sAtSgj5PVuJJ9Z8SFxJbxj5oX1rmMzyakXvFo0n0agkCRr7tVeGV9zeNxK1iVglG4kCZuRu60waQ+C1dA51znawA81+ac05VkT1HumGZrX6zCklLBpXhq2DiCvFJ+CdWCYcVj2KoIG6CEtgZ4inTtfrZDqAFXZkOYWV27gqfSyDmLszOdInWFq74SjJTcovWYGi0mQ4+Lyu7e+Tps+E/unImdDI2hYFHvs1hWDgesq8kx4Yp8GiInzWAEfsqd5wPKaIscOPBR5kWOgSb/OOWjfMYVGZEv7fPPXyZ1ds4Jen1GPGUG0fioVPNuP31sct5xaTYWfE4bvmr/DtiTEajM8x3qJBHLjxqv5JM94pcw4l65QDsgPyJgKfG9Sf2jrvmWhJdS8Eso10hZv2v4cYTQ36eTVZdWMCmp+F38bZBkkI6fjPhE/zm4YITJ4qlVhV+jxFnk9NprdTT4UEYMrOh1EPMpBmnrEX6RJKsA6FqzeFaPl8QBZA6gfar/5PHr2GQVgELvmeADdXk/UKvA9ez4/TRfR7Ua5W7xESoGPX49xfZeunFVpKe8WsMweyT8fpoW0HR4ip20AFRnSAp/wcrzTgwWl9Ztiz+iSgGgeOBvMpLwNMTiD1KaHVM6E/4gy5Ax2fsfHQFu/5nVbdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2bdu2a/gPlTyc0gUolCIAAAAASUVORK5CYII=";return e}};(function(){var i=0;function e(e){var r=+new Date,t=Math.max(0,($.HV?50:20)-(r-i));i=r+t;return w.setTimeout(e,50)}var r=function(e){w.clearTimeout(e)};if($.DW){var n=e;var t=r;u["requestAnimFrame"]=function(e,r,t,i){if(t){if(r){c.bind(e,r).call(r,i)}else{e()}}else{return n(function(){if(r){c.bind(e,r).call(r,i)}else{e()}})}};u["cancelAnimFrame"]=function(e){if(e){t.call(w,e)}};return}function f(e){var r,t,i=["webkit","moz","o","ms"];for(r=0;r<i.length&&!t;r+=1){t=w[i[r]+e]}return t}var a=w.requestAnimationFrame||f("RequestAnimationFrame")||e;var s=w.cancelAnimationFrame||f("CancelAnimationFrame")||f("CancelRequestAnimationFrame")||r;u["requestAnimFrame"]=function(e,r,t,i){if(t){if(r){c.bind(e,r).call(r,i)}else{e()}}else{return a(function(){if(r){c.bind(e,r).call(r,i)}else{e()}})}};u["cancelAnimFrame"]=function(e){if(e){s.call(w,e)}}})();(function(){if($.DW){return}u["requestIdleCallback"]=w["requestIdleCallback"]?function(e,r){return w["requestIdleCallback"](e,r)}:function(e,r){if(r===void 0){r={}}var t=c.uM();return setTimeout(function(){e({didTimeout:false,timeRemaining:function(){return Math.max(0,70-(c.uM()-t))}})},r.timeout||0)};u["cancelIdleCallback"]=w["cancelIdleCallback"]?function(e){return w["cancelIdleCallback"](e)}:function(e){clearTimeout(e)}})();var c=u;return c}();function ea(e){return e&&e.className==="AMap.LngLat"}function ra(e){var r=+e;return typeof+r==="number"&&!isNaN(r)}function ta(e){return Array.isArray(e)&&ra(e[0])}function ia(e){if(Array.isArray(e)){if(Array.isArray(e[0])){for(var r=0;r<e.length;r+=1){e[r]=ia(e[r])}}else{var t=typeof e[0];if(t==="string"||t==="number"){return new j(e[0],e[1])}else{return e}}}return e}var na={lr:function(e,r){var t=Infinity;for(var i=0,n=1,f=r.length;n<f;i=n,n+=1){t=Math.min(t,this.ur(e,[r[i],r[n]]))}return Math.sqrt(t)},ur:function(e,r){return this.cr(e,this.closestOnSegment(e,r))},cr:function(e,r){var t=e[0]-r[0];var i=e[1]-r[1];return t*t+i*i},pr:function(e,r,t,i){i=i||1e-6;if(t[0]===r[0]){var n=Math.min(r[1],t[1]);var f=Math.max(r[1],t[1]);return Math.abs(e[0]-t[0])<i&&e[1]>=n&&e[1]<=f}var a=Math.min(r[0],t[0]);var s=Math.max(r[0],t[0]);var u=(t[1]-r[1])/(t[0]-r[0])*(e[0]-r[0])+r[1];return Math.abs(u-e[1])<i&&e[0]>=a&&e[0]<=s},closestOnSegment:function(e,r){var t=e[0];var i=e[1];var n=r[0];var f=r[1];var a=n[0];var s=n[1];var u=f[0];var o=f[1];var l=u-a;var v=o-s;var c=l===0&&v===0?0:(l*(t-a)+v*(i-s))/(l*l+v*v||0);var h;var d;if(c<=0){h=a;d=s}else if(c>=1){h=u;d=o}else{h=a+c*l;d=s+c*v}return[h,d]},isClockwise:function(e){var r=e.length;var t=0;var i=e[r-1];var n=i[0];var f=i[1];var a;var s;var u;for(var o=0;o<r;o+=1){u=e[o];a=u[0];s=u[1];t+=(a-n)*(s+f);n=a;f=s}return t>0},ss:function(e,r,t){var i=e[0];var n=e[1];var f=false;var a;var s;var u;var o;var l=r.length;for(var v=0,c=l-1;v<l;c=v,v+=1){var h=false;a=r[v][0];s=r[v][1];u=r[c][0];o=r[c][1];if(a===i&&s===n||u===i&&o===n){return t?true:false}if(s<n===o>=n){var d=(u-a)*(n-s)/(o-s)+a;if(i===d){return t?true:false}else{h=i<d}}if(h){f=!f}}return f},dr:function(e,r){var t=function(e,r,t){return(t[0]-r[0])*(e[1]-r[1])>(t[1]-r[1])*(e[0]-r[0])};var i=function(e,r,t,i){var n=[e[0]-r[0],e[1]-r[1]],f=[t[0]-i[0],t[1]-i[1]],a=e[0]*r[1]-e[1]*r[0],s=t[0]*i[1]-t[1]*i[0],u=1/(n[0]*f[1]-n[1]*f[0]);return[(a*f[0]-s*n[0])*u,(a*f[1]-s*n[1])*u]};var n,f,a,s;var u=e;n=r[r.length-2];for(var o=0,l=r.length-1;o<l;o++){f=r[o];var v=u;u=[];a=v[v.length-1];for(var c=0,h=v.length;c<h;c++){s=v[c];if(t(s,n,f)){if(!t(a,n,f)){u.push(i(n,f,a,s))}u.push(s)}else if(t(a,n,f)){u.push(i(n,f,a,s))}a=s}n=f}if(u.length<3){return[]}u.push(u[0]);return u}};var fa=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function aa(e){return e&&e.gP&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function sa(e,r){return r={exports:{}},e(r,r.exports),r.exports}var ua=sa(function(e,t){(function(e,r){r(t)})(fa,function(e){function O(e,r){return e>r?1:e<r?-1:0}var m=function e(r,t){if(r===void 0)r=O;if(t===void 0)t=false;this.bP=r;this.yP=null;this._size=0;this.mP=!!t};var r={size:{configurable:true}};m.prototype.TP=function e(r){var t=r.right;if(t){r.right=t.left;if(t.left){t.left.parent=r}t.parent=r.parent}if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.left=r}r.parent=t};m.prototype.wP=function e(r){var t=r.left;if(t){r.left=t.right;if(t.right){t.right.parent=r}t.parent=r.parent}if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.right=r}r.parent=t};m.prototype.AP=function e(r){while(r.parent){var t=r.parent;if(!t.parent){if(t.left===r){this.wP(t)}else{this.TP(t)}}else if(t.left===r&&t.parent.left===t){this.wP(t.parent);this.wP(t)}else if(t.right===r&&t.parent.right===t){this.TP(t.parent);this.TP(t)}else if(t.left===r&&t.parent.right===t){this.wP(t);this.TP(t)}else{this.TP(t);this.wP(t)}}};m.prototype.xP=function e(r){var t,i,n,f,a;while(r.parent){t=r.parent;i=t.parent;if(i&&i.parent){n=i.parent;if(n.left===i){n.left=r}else{n.right=r}r.parent=n}else{r.parent=null;this.yP=r}f=r.left;a=r.right;if(r===t.left){if(i){if(i.left===t){if(t.right){i.left=t.right;i.left.parent=i}else{i.left=null}t.right=i;i.parent=t}else{if(f){i.right=f;f.parent=i}else{i.right=null}r.left=i;i.parent=r}}if(a){t.left=a;a.parent=t}else{t.left=null}r.right=t;t.parent=r}else{if(i){if(i.right===t){if(t.left){i.right=t.left;i.right.parent=i}else{i.right=null}t.left=i;i.parent=t}else{if(a){i.left=a;a.parent=i}else{i.left=null}r.right=i;i.parent=r}}if(f){t.right=f;f.parent=t}else{t.right=null}r.left=t;t.parent=r}}};m.prototype.replace=function e(r,t){if(!r.parent){this.yP=t}else if(r===r.parent.left){r.parent.left=t}else{r.parent.right=t}if(t){t.parent=r.parent}};m.prototype.MP=function e(r){if(r===void 0)r=this.yP;if(r){while(r.left){r=r.left}}return r};m.prototype.SP=function e(r){if(r===void 0)r=this.yP;if(r){while(r.right){r=r.right}}return r};m.prototype.Xc=function e(r,t){var i=this.yP;var n=null;var f=this.bP;var a;if(this.mP){while(i){n=i;a=f(i.key,r);if(a===0){return}else if(f(i.key,r)<0){i=i.right}else{i=i.left}}}else{while(i){n=i;if(f(i.key,r)<0){i=i.right}else{i=i.left}}}i={key:r,data:t,left:null,right:null,parent:n};if(!n){this.yP=i}else if(f(n.key,i.key)<0){n.right=i}else{n.left=i}this.xP(i);this._size++;return i};m.prototype.find=function e(r){var t=this.yP;var i=this.bP;while(t){var n=i(t.key,r);if(n<0){t=t.right}else if(n>0){t=t.left}else{return t}}return null};m.prototype.contains=function e(r){var t=this.yP;var i=this.bP;while(t){var n=i(r,t.key);if(n===0){return true}else if(n<0){t=t.left}else{t=t.right}}return false};m.prototype.remove=function e(r){var t=this.find(r);if(!t){return false}this.xP(t);if(!t.left){this.replace(t,t.right)}else if(!t.right){this.replace(t,t.left)}else{var i=this.MP(t.right);if(i.parent!==t){this.replace(i,i.right);i.right=t.right;i.right.parent=i}this.replace(t,i);i.left=t.left;i.left.parent=i}this._size--;return true};m.prototype.removeNode=function e(r){if(!r){return false}this.xP(r);if(!r.left){this.replace(r,r.right)}else if(!r.right){this.replace(r,r.left)}else{var t=this.MP(r.right);if(t.parent!==r){this.replace(t,t.right);t.right=r.right;t.right.parent=t}this.replace(r,t);t.left=r.left;t.left.parent=t}this._size--;return true};m.prototype.$P=function e(r){var t=this.find(r);if(!t){return}this.xP(t);var i=t.left;var n=t.right;var f=null;if(i){i.parent=null;f=this.SP(i);this.xP(f);this.yP=f}if(n){if(i){f.right=n}else{this.yP=n}n.parent=f}this._size--};m.prototype.pop=function e(){var r=this.yP,t=null;if(r){while(r.left){r=r.left}t={key:r.key,data:r.data};this.remove(r.key)}return t};m.prototype.next=function e(r){var t=r;if(t){if(t.right){t=t.right;while(t&&t.left){t=t.left}}else{t=r.parent;while(t&&t.right===r){r=t;t=t.parent}}}return t};m.prototype.NM=function e(r){var t=r;if(t){if(t.left){t=t.left;while(t&&t.right){t=t.right}}else{t=r.parent;while(t&&t.left===r){r=t;t=t.parent}}}return t};m.prototype.forEach=function e(r){var t=this.yP;var i=[],n=false,f=0;while(!n){if(t){i.push(t);t=t.left}else{if(i.length>0){t=i.pop();r(t,f++);t=t.right}else{n=true}}}return this};m.prototype.range=function e(r,t,i,n){var f=[];var a=this.bP;var s=this.yP,u;while(f.length!==0||s){if(s){f.push(s);s=s.left}else{s=f.pop();u=a(s.key,t);if(u>0){break}else if(a(s.key,r)>=0){if(i.call(n,s)){return this}}s=s.right}}return this};m.prototype.keys=function e(){var r=this.yP;var t=[],i=[],n=false;while(!n){if(r){t.push(r);r=r.left}else{if(t.length>0){r=t.pop();i.push(r.key);r=r.right}else{n=true}}}return i};m.prototype.values=function e(){var r=this.yP;var t=[],i=[],n=false;while(!n){if(r){t.push(r);r=r.left}else{if(t.length>0){r=t.pop();i.push(r.data);r=r.right}else{n=true}}}return i};m.prototype.at=function e(r){var t=this.yP;var i=[],n=false,f=0;while(!n){if(t){i.push(t);t=t.left}else{if(i.length>0){t=i.pop();if(f===r){return t}f++;t=t.right}else{n=true}}}return null};m.prototype.load=function e(r,t,i){if(r===void 0)r=[];if(t===void 0)t=[];if(i===void 0)i=false;if(this._size!==0){throw new Error("bulk-load: tree is not empty")}var n=r.length;if(i){o(r,t,0,n-1,this.bP)}this.yP=l(null,r,t,0,n);this._size=n;return this};m.prototype.min=function e(){var r=this.MP(this.yP);if(r){return r.key}else{return null}};m.prototype.max=function e(){var r=this.SP(this.yP);if(r){return r.key}else{return null}};m.prototype.isEmpty=function e(){return this.yP===null};r.size.get=function(){return this._size};m.LP=function e(r,t,i,n,f){return new m(i,f).load(r,t,n)};Object.defineProperties(m.prototype,r);function l(e,r,t,i,n){var f=n-i;if(f>0){var a=i+Math.floor(f/2);var s=r[a];var u=t[a];var o={key:s,data:u,parent:e};o.left=l(o,r,t,i,a);o.right=l(o,r,t,a+1,n);return o}return null}function o(e,r,t,i,n){if(t>=i){return}var f=e[t+i>>1];var a=t-1;var s=i+1;while(true){do{a++}while(n(e[a],f)<0);do{s--}while(n(e[s],f)>0);if(a>=s){break}var u=e[a];e[a]=e[s];e[s]=u;u=r[a];r[a]=r[s];r[s]=u}o(e,r,t,s,n);o(e,r,s+1,i,n)}var a=0;var u=1;var v=2;var c=3;var b=0;var s=1;var p=2;var h=3;function x(e,r,t){if(r===null){e.PP=false;e.OP=true}else{if(e._P===r._P){e.PP=!r.PP;e.OP=r.OP}else{e.PP=!r.OP;e.OP=r.NP()?!r.PP:r.PP}if(r){e.CP=!n(r,t)||r.NP()?r.CP:r}}var i=n(e,t);if(i){e.hN=j(e,t)}else{e.hN=0}}function n(e,r){switch(e.type){case a:switch(r){case b:return!e.OP;case s:return e.OP;case p:return e._P&&e.OP||!e._P&&!e.OP;case h:return true}break;case v:return r===b||r===s;case c:return r===p;case u:return false}return false}function j(e,r){var t=!e.PP;var i=!e.OP;var n;switch(r){case b:n=t&&i;break;case s:n=t||i;break;case h:n=t^i;break;case p:if(e._P){n=t&&!i}else{n=i&&!t}break}return n?+1:-1}var d=function e(r,t,i,n,f){this.left=t;this.kP=r;this.IP=i;this._P=n;this.type=f||a;this.PP=false;this.OP=false;this.CP=null;this.hN=0;this.lN=-1;this.dN=-1;this.DP=true};var t={EP:{configurable:true}};d.prototype.FP=function e(r){var t=this.kP,i=this.IP.kP;return this.left?(t[0]-r[0])*(i[1]-r[1])-(i[0]-r[0])*(t[1]-r[1])>0:(i[0]-r[0])*(t[1]-r[1])-(t[0]-r[0])*(i[1]-r[1])>0};d.prototype.RP=function e(r){return!this.FP(r)};d.prototype.NP=function e(){return this.kP[0]===this.IP.kP[0]};t.EP.get=function(){return this.hN!==0};d.prototype.clone=function e(){var r=new d(this.kP,this.left,this.IP,this._P,this.type);r.UP=this.UP;r.hN=this.hN;r.CP=this.CP;r.DP=this.DP;r.PP=this.PP;r.OP=this.OP;return r};Object.defineProperties(d.prototype,t);function y(e,r){if(e[0]===r[0]){if(e[1]===r[1]){return true}else{return false}}return false}var i=11102230246251565e-32;var T=134217729;var D=(3+8*i)*i;function E(e,r,t,i,n){var f,a,s,u;var o=r[0];var l=i[0];var v=0;var c=0;if(l>o===l>-o){f=o;o=r[++v]}else{f=l;l=i[++c]}var h=0;if(v<e&&c<t){if(l>o===l>-o){a=o+f;s=f-(a-o);o=r[++v]}else{a=l+f;s=f-(a-l);l=i[++c]}f=a;if(s!==0){n[h++]=s}while(v<e&&c<t){if(l>o===l>-o){a=f+o;u=a-f;s=f-(a-u)+(o-u);o=r[++v]}else{a=f+l;u=a-f;s=f-(a-u)+(l-u);l=i[++c]}f=a;if(s!==0){n[h++]=s}}}while(v<e){a=f+o;u=a-f;s=f-(a-u)+(o-u);o=r[++v];f=a;if(s!==0){n[h++]=s}}while(c<t){a=f+l;u=a-f;s=f-(a-u)+(l-u);l=i[++c];f=a;if(s!==0){n[h++]=s}}if(f!==0||h===0){n[h++]=f}return h}function z(e,r){var t=r[0];for(var i=1;i<e;i++){t+=r[i]}return t}function f(e){return fa.Float64Array?new Float64Array(e):new Array(e)}var _=(3+16*i)*i;var U=(2+12*i)*i;var W=(9+64*i)*i*i;var L=f(4);var R=f(8);var N=f(12);var G=f(16);var P=f(4);function B(e,r,t,i,n,f,a){var s,u,o,l;var v,c,h,d,y,m,b,p,x,w,k,g,M,I;var A=e-n;var S=t-n;var $=r-f;var C=i-f;w=A*C;c=T*A;h=c-(c-A);d=A-h;c=T*C;y=c-(c-C);m=C-y;k=d*m-(w-h*y-d*y-h*m);g=$*S;c=T*$;h=c-(c-$);d=$-h;c=T*S;y=c-(c-S);m=S-y;M=d*m-(g-h*y-d*y-h*m);b=k-M;v=k-b;L[0]=k-(b+v)+(v-M);p=w+b;v=p-w;x=w-(p-v)+(b-v);b=x-g;v=x-b;L[1]=x-(b+v)+(v-g);I=p+b;v=I-p;L[2]=p-(I-v)+(b-v);L[3]=I;var F=z(4,L);var O=U*a;if(F>=O||-F>=O){return F}v=e-A;s=e-(A+v)+(v-n);v=t-S;o=t-(S+v)+(v-n);v=r-$;u=r-($+v)+(v-f);v=i-C;l=i-(C+v)+(v-f);if(s===0&&u===0&&o===0&&l===0){return F}O=W*a+D*Math.abs(F);F+=A*l+C*s-($*o+S*u);if(F>=O||-F>=O){return F}w=s*C;c=T*s;h=c-(c-s);d=s-h;c=T*C;y=c-(c-C);m=C-y;k=d*m-(w-h*y-d*y-h*m);g=u*S;c=T*u;h=c-(c-u);d=u-h;c=T*S;y=c-(c-S);m=S-y;M=d*m-(g-h*y-d*y-h*m);b=k-M;v=k-b;P[0]=k-(b+v)+(v-M);p=w+b;v=p-w;x=w-(p-v)+(b-v);b=x-g;v=x-b;P[1]=x-(b+v)+(v-g);I=p+b;v=I-p;P[2]=p-(I-v)+(b-v);P[3]=I;var j=E(4,L,4,P,R);w=A*l;c=T*A;h=c-(c-A);d=A-h;c=T*l;y=c-(c-l);m=l-y;k=d*m-(w-h*y-d*y-h*m);g=$*o;c=T*$;h=c-(c-$);d=$-h;c=T*o;y=c-(c-o);m=o-y;M=d*m-(g-h*y-d*y-h*m);b=k-M;v=k-b;P[0]=k-(b+v)+(v-M);p=w+b;v=p-w;x=w-(p-v)+(b-v);b=x-g;v=x-b;P[1]=x-(b+v)+(v-g);I=p+b;v=I-p;P[2]=p-(I-v)+(b-v);P[3]=I;var _=E(j,R,4,P,N);w=s*l;c=T*s;h=c-(c-s);d=s-h;c=T*l;y=c-(c-l);m=l-y;k=d*m-(w-h*y-d*y-h*m);g=u*o;c=T*u;h=c-(c-u);d=u-h;c=T*o;y=c-(c-o);m=o-y;M=d*m-(g-h*y-d*y-h*m);b=k-M;v=k-b;P[0]=k-(b+v)+(v-M);p=w+b;v=p-w;x=w-(p-v)+(b-v);b=x-g;v=x-b;P[1]=x-(b+v)+(v-g);I=p+b;v=I-p;P[2]=p-(I-v)+(b-v);P[3]=I;var B=E(_,N,4,P,G);return G[B-1]}function H(e,r,t,i,n,f){var a=(r-f)*(t-n);var s=(e-n)*(i-f);var u=a-s;if(a===0||s===0||a>0!==s>0){return u}var o=Math.abs(a+s);if(Math.abs(u)>=_*o){return u}return-B(e,r,t,i,n,f,o)}function w(e,r,t){var i=H(e[0],e[1],r[0],r[1],t[0],t[1]);if(i>0){return-1}if(i<0){return 1}return 0}function k(e,r){var t=e.kP;var i=r.kP;if(t[0]>i[0]){return 1}if(t[0]<i[0]){return-1}if(t[1]!==i[1]){return t[1]>i[1]?1:-1}return V(e,r,t)}function V(e,r,t,i){if(e.left!==r.left){return e.left?1:-1}if(w(t,e.IP.kP,r.IP.kP)!==0){return!e.FP(r.IP.kP)?1:-1}return!e._P&&r._P?1:-1}function g(e,r,t){var i=new d(r,false,e,e._P);var n=new d(r,true,e.IP,e._P);if(y(e.kP,e.IP.kP)){console.warn("what is that, a collapsed segment?",e)}i.UP=n.UP=e.UP;if(k(n,e.IP)>0){e.IP.left=true;n.left=false}e.IP.IP=n;e.IP=i;t.push(n);t.push(i);return t}function M(e,r){return e[0]*r[1]-e[1]*r[0]}function I(e,r){return e[0]*r[0]+e[1]*r[1]}function q(e,r,t,i,n){var f=[r[0]-e[0],r[1]-e[1]];var a=[i[0]-t[0],i[1]-t[1]];function s(e,r,t){return[e[0]+r*t[0],e[1]+r*t[1]]}var u=[t[0]-e[0],t[1]-e[1]];var o=M(f,a);var l=o*o;var v=I(f,f);if(l>0){var c=M(u,a)/o;if(c<0||c>1){return null}var h=M(u,f)/o;if(h<0||h>1){return null}if(c===0||c===1){return n?null:[s(e,c,f)]}if(h===0||h===1){return n?null:[s(t,h,a)]}return[s(e,c,f)]}o=M(u,f);l=o*o;if(l>0){return null}var d=I(f,u)/v;var y=d+I(f,a)/v;var m=Math.min(d,y);var b=Math.max(d,y);if(m<=1&&b>=0){if(m===1){return n?null:[s(e,m>0?m:0,f)]}if(b===0){return n?null:[s(e,b<1?b:1,f)]}if(n&&m===0&&b===1){return null}return[s(e,m>0?m:0,f),s(e,b<1?b:1,f)]}return null}function A(e,r,t){var i=q(e.kP,e.IP.kP,r.kP,r.IP.kP);var n=i?i.length:0;if(n===0){return 0}if(n===1&&(y(e.kP,r.kP)||y(e.IP.kP,r.IP.kP))){return 0}if(n===2&&e._P===r._P){return 0}if(n===1){if(!y(e.kP,i[0])&&!y(e.IP.kP,i[0])){g(e,i[0],t)}if(!y(r.kP,i[0])&&!y(r.IP.kP,i[0])){g(r,i[0],t)}return 1}var f=[];var a=false;var s=false;if(y(e.kP,r.kP)){a=true}else if(k(e,r)===1){f.push(r,e)}else{f.push(e,r)}if(y(e.IP.kP,r.IP.kP)){s=true}else if(k(e.IP,r.IP)===1){f.push(r.IP,e.IP)}else{f.push(e.IP,r.IP)}if(a&&s||a){r.type=u;e.type=r.PP===e.PP?v:c;if(a&&!s){g(f[1].IP,f[0].kP,t)}return 2}if(s){g(f[0],f[1].kP,t);return 3}if(f[0]!==f[3].IP){g(f[0],f[1].kP,t);g(f[1],f[2].kP,t);return 3}g(f[0],f[1].kP,t);g(f[3].IP,f[2].kP,t);return 3}function J(e,r){if(e===r){return 0}if(w(e.kP,e.IP.kP,r.kP)!==0||w(e.kP,e.IP.kP,r.IP.kP)!==0){if(y(e.kP,r.kP)){return e.FP(r.IP.kP)?-1:1}if(e.kP[0]===r.kP[0]){return e.kP[1]<r.kP[1]?-1:1}if(k(e,r)===1){return r.RP(e.kP)?-1:1}return e.FP(r.kP)?-1:1}if(e._P===r._P){var t=e.kP,i=r.kP;if(t[0]===i[0]&&t[1]===i[1]){t=e.IP.kP;i=r.IP.kP;if(t[0]===i[0]&&t[1]===i[1]){return 0}else{return e.UP>r.UP?1:-1}}}else{return e._P?-1:1}return k(e,r)===1?1:-1}function Y(e,r,t,i,n,f){var a=new m(J);var s=[];var u=Math.min(i[2],n[2]);var o,l,v;while(e.length!==0){var c=e.pop();s.push(c);if(f===b&&c.kP[0]>u||f===p&&c.kP[0]>i[2]){break}if(c.left){l=o=a.Xc(c);v=a.MP();if(o!==v){o=a.NM(o)}else{o=null}l=a.next(l);var h=o?o.key:null;var d=void 0;x(c,h,f);if(l){if(A(c,l.key,e)===2){x(c,h,f);x(c,l.key,f)}}if(o){if(A(o.key,c,e)===2){var y=o;if(y!==v){y=a.NM(y)}else{y=null}d=y?y.key:null;x(h,d,f);x(c,h,f)}}}else{c=c.IP;l=o=a.find(c);if(o&&l){if(o!==v){o=a.NM(o)}else{o=null}l=a.next(l);a.remove(c);if(l&&o){A(o.key,l.key,e)}}}}return s}var K=function e(){this.points=[];this.vN=[];this.gN=null;this.depth=null};K.prototype.pN=function e(){return this.gN==null};function Q(e){var r,t,i,n;var f=[];for(t=0,i=e.length;t<i;t++){r=e[t];if(r.left&&r.EP||!r.left&&r.IP.EP){f.push(r)}}var a=false;while(!a){a=true;for(t=0,i=f.length;t<i;t++){if(t+1<i&&k(f[t],f[t+1])===1){n=f[t];f[t]=f[t+1];f[t+1]=n;a=false}}}for(t=0,i=f.length;t<i;t++){r=f[t];r.lN=t}for(t=0,i=f.length;t<i;t++){r=f[t];if(!r.left){n=r.lN;r.lN=r.IP.lN;r.IP.lN=n}}return f}function Z(e,r,t,i){var n=e+1,f=r[e].kP,a;var s=r.length;if(n<s){a=r[n].kP}while(n<s&&a[0]===f[0]&&a[1]===f[1]){if(!t[n]){return n}else{n++}a=r[n].kP}n=e-1;while(t[n]&&n>i){n--}return n}function X(e,r,t){var i=new K;if(e.CP!=null){var n=e.CP;var f=n.dN;var a=n.hN;if(a>0){var s=r[f];if(s.gN!=null){var u=s.gN;r[u].vN.push(t);i.gN=u;i.depth=r[f].depth}else{r[f].vN.push(t);i.gN=f;i.depth=r[f].depth+1}}else{i.gN=null;i.depth=r[f].depth}}else{i.gN=null;i.depth=0}return i}function ee(e){var a,r;var s=Q(e);var u={};var o=[];var t=function(){if(u[a]){return}var r=o.length;var e=X(s[a],o,r);var t=function(e){u[e]=true;s[e].dN=r};var i=a;var n=a;var f=s[a].kP;e.points.push(f);while(true){t(i);i=s[i].lN;t(i);e.points.push(s[i].kP);i=Z(i,s,u,n);if(i==n){break}}o.push(e)};for(a=0,r=s.length;a<r;a++)t();return o}var re=S;var te=S;function S(e,r){if(!(this instanceof S)){return new S(e,r)}this.data=e||[];this.length=this.data.length;this.compare=r||ie;if(this.length>0){for(var t=(this.length>>1)-1;t>=0;t--){this.zP(t)}}}function ie(e,r){return e<r?-1:e>r?1:0}S.prototype={push:function(e){this.data.push(e);this.length++;this.El(this.length-1)},pop:function(){if(this.length===0){return undefined}var e=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this.zP(0)}this.data.pop();return e},GP:function(){return this.data[0]},El:function(e){var r=this.data;var t=this.compare;var i=r[e];while(e>0){var n=e-1>>1;var f=r[n];if(t(i,f)>=0){break}r[e]=f;e=n}r[e]=i},zP:function(e){var r=this.data;var t=this.compare;var i=this.length>>1;var n=r[e];while(e<i){var f=(e<<1)+1;var a=f+1;var s=r[f];if(a<this.length&&t(r[a],s)<0){f=a;s=r[a]}if(t(s,n)>=0){break}r[e]=s;e=f}r[e]=n}};re.default=te;var ne=Math.max;var fe=Math.min;var $=0;function ae(e,r,t,i,n,f){var a,s,u,o,l,v;for(a=0,s=e.length-1;a<s;a++){u=e[a];o=e[a+1];l=new d(u,false,undefined,r);v=new d(o,false,l,r);l.IP=v;if(u[0]===o[0]&&u[1]===o[1]){continue}l.UP=v.UP=t;if(!f){l.DP=false;v.DP=false}if(k(l,v)>0){v.left=true}else{l.left=true}var c=u[0],h=u[1];n[0]=fe(n[0],c);n[1]=fe(n[1],h);n[2]=ne(n[2],c);n[3]=ne(n[3],h);i.push(l);i.push(v)}}function se(e,r,t,i,n){var f=new re(null,k);var a,s,u,o,l,v;for(u=0,o=e.length;u<o;u++){a=e[u];for(l=0,v=a.length;l<v;l++){s=l===0;if(s){$++}ae(a[l],true,$,f,t,s)}}for(u=0,o=r.length;u<o;u++){a=r[u];for(l=0,v=a.length;l<v;l++){s=l===0;if(n===p){s=false}if(s){$++}ae(a[l],false,$,f,i,s)}}return f}var C=[];function ue(e,r,t){var i=null;if(e.length*r.length===0){if(t===b){i=C}else if(t===p){i=e}else if(t===s||t===h){i=e.length===0?r:e}}return i}function oe(e,r,t,i,n){var f=null;if(t[0]>i[2]||i[0]>t[2]||t[1]>i[3]||i[1]>t[3]){if(n===b){f=C}else if(n===p){f=e}else if(n===s||n===h){f=e.concat(r)}}return f}function F(e,r,t){if(typeof e[0][0][0]==="number"){e=[e]}if(typeof r[0][0][0]==="number"){r=[r]}var i=ue(e,r,t);if(i){return i===C?null:i}var n=[Infinity,Infinity,-Infinity,-Infinity];var f=[Infinity,Infinity,-Infinity,-Infinity];var a=se(e,r,n,f,t);i=oe(e,r,n,f,t);if(i){return i===C?null:i}var s=Y(a,e,r,n,f,t);var u=ee(s);var o=[];for(var l=0;l<u.length;l++){var v=u[l];if(v.pN()){var c=[v.points];for(var h=0;h<v.vN.length;h++){var d=v.vN[h];c.push(u[d].points)}o.push(c)}}return o}function le(e,r){return F(e,r,s)}function ve(e,r){return F(e,r,p)}function ce(e,r){return F(e,r,h)}function he(e,r){return F(e,r,b)}var de={VP:s,BP:p,HP:b,WP:h};e.ZP=ve;e.qP=he;e.YP=de;e.$q=le;e.xor=ce;Object.defineProperty(e,"gP",{value:true})})});var oa=aa(ua);var C={vr:Math.PI/180,mr:180/Math.PI,yr:6378137};function la(e,r){function t(e){switch(e){case"EPSG3857":return I.getProjection("EPSG:3857");case"EPSG4326":return I.getProjection("EPSG:4326")}return I.getProjection("EPSG3857")}var i=t(e);return{project:function(e){if(S.isArray(e)){e=new j(e[0],e[1])}return i.project(e.lng,e.lat)},unproject:function(e){if(S.isArray(e)){e=new Pf(e[0],e[1])}return i.unproject(e.x,e.y)},normalizePoint:function(e){return S.parseLngLatData(e)},distance:function(e,r){r=this["normalizePoint"](r);if(S.isArray(r)){return this["distanceToLine"](e,r)}e=this["normalizePoint"](e);var t=C.vr;var i=Math.cos;var n=e.lat*t,f=e.lng*t,a=r.lat*t,s=r.lng*t;var u=C.yr*2;var o=a-n;var l=s-f;var v=(1-i(o)+(1-i(l))*i(n)*i(a))/2;return u*Math.asin(Math.sqrt(v))},ringArea:function(e){e=this["normalizeLine"](e);var r=C.yr*C.vr;var t=0,i=e,n=i.length;if(n<3){return 0}var f=0;for(;f<n-1;f+=1){var a=i[f];var s=i[f+1];var u=a.lng*r*Math.cos(a.lat*C.vr);var o=a.lat*r;var l=s.lng*r*Math.cos(s.lat*C.vr);var v=s.lat*r;t+=u*v-l*o}var c=i[f];var h=i[0];var d=c.lng*r*Math.cos(c.lat*C.vr);var y=c.lat*r;var m=h.lng*r*Math.cos(h.lat*C.vr);var b=h.lat*r;t+=d*b-m*y;var p=.5*Math.abs(t);return p},sphericalCalotteArea:function(e){var r=C.yr;var t=e/r;var i=r-r*Math.cos(t);return 2*Math.PI*r*i}}}function va(){return{normalizePoint:function(e){if(e&&e["x"]&&e["y"]){return[e["x"],e["y"]]}return e},distance:function(e,r){var t=e[0]-r[0],i=e[1]-r[1];return Math.sqrt(t*t+i*i)},project:function(e){return e},unproject:function(e){return e},ringArea:function(e){var r=[0,0];var t=[0,0];var i=0;var n=e[0];var f=e.length;for(var a=2;a<f;a++){var s=e[a-1];var u=e[a];r[0]=n[0]-u[0];r[1]=n[1]-u[1];t[0]=n[0]-s[0];t[1]=n[1]-s[1];i+=r[0]*t[1]-r[1]*t[0]}return i/2}}}function ca(e){var r=0;var t=e.length;for(var i=0;i<t-1;i++){var n=e[i],f=e[i+1];r+=(f[0]-n[0])*(f[1]+n[1])}if(e[t-1][0]!==e[0][0]||e[t-1][1]!==e[0][1]){var n=e[t-1],f=e[0];r+=(f[0]-n[0])*(f[1]+n[1])}return r>0}var ha=function(){function r(e){this.CLASS_NAME="AMap.GeometryUtil";this._opts=l({onSegmentTolerance:5,crs:"EPSG3857",maxZoom:V[1]},e);this["setCrs"](this._opts["crs"])}r.prototype["clone"]=function(e){return new r(l({},this._opts,e))};r.prototype["isPoint"]=function(e){return e&&(e instanceof j||S.isArray(e)&&!isNaN(e[0]))};r.prototype["normalizePoint"]=function(e){return e};r.prototype["normalizeLine"]=function(e){var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this["normalizePoint"](e[t]))}return r};r.prototype["normalizeMultiLines"]=function(e){if(S.isArray(e)&&this["isPoint"](e[0])){e=[e]}var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this["normalizeLine"](e[t]))}return r};r.prototype["setCrs"]=function(e){var r;if(e&&e["project"]&&e["unproject"]){r=e}else if(e==="plane"){r=va()}else{r=la(e,this._opts["maxZoom"])}l(this,r);return};r.prototype["distance"]=function(e,r){throw new Error("distance Not implemented!")};r.prototype.xr=function(e,r){e=this["normalizeLine"](e);if(!this["isPoint"](e[0])){e=e[0]}var t=[];for(var i=0,n=e.length;i<n;i++){t.push(this["project"](e[i]))}if(r===true){t=this["makesureClockwise"](t)}else if(r===false){t=this["makesureClockwise"](t);t.reverse()}return t};r.prototype.br=function(e){var r=[];for(var t=0,i=e.length;t<i;t++){r.push(this["unproject"](e[t]))}return r};r.prototype["closestOnSegment"]=function(e,r,t){var i=na.closestOnSegment(this["project"](e),this.xr([r,t]));return this["unproject"](i)};r.prototype["closestOnLine"]=function(e,r){r=this["normalizeLine"](r);var t=Infinity,i;for(var n=0,f=r.length;n<f-1;n++){var a=this["closestOnSegment"](e,r[n],r[n+1]),s=this["distance"](e,a);if(s<t){t=s;i=a}}return i};r.prototype["distanceToSegment"]=function(e,r,t){return this["distanceToLine"](e,[r,t])};r.prototype["distanceToLine"]=function(e,r){r=this["normalizeLine"](r);if(!this["isPoint"](r[0])){r=r[0]}var t=Infinity;for(var i=0,n=r.length;i<n-1;i++){var f=this["closestOnSegment"](e,r[i],r[i+1]);t=Math.min(t,this["distance"](e,f))}return t};r.prototype["distanceToPolygon"]=function(e,r){if(this["isPointInRing"](e,r)){return 0}else{return this["distanceToLine"](e,r)}};r.prototype["isPointOnSegment"]=function(e,r,t,i){if(!i&&i!==0||i<0){i=this._opts["onSegmentTolerance"]}return this["distanceToSegment"](e,r,t)<=i};r.prototype["isPointOnLine"]=function(e,r,t){r=this["normalizeLine"](r);for(var i=0,n=r.length;i<n-1;i++){if(this["isPointOnSegment"](e,r[i],r[i+1],t)){return true}}return false};r.prototype["isPointOnRing"]=function(e,r,t){r=this["normalizeLine"](r);for(var i=0,n=r.length;i<n;i++){if(this["isPointOnSegment"](e,r[i],r[i===n-1?0:i+1],t)){return true}}return false};r.prototype["isPointOnPolygon"]=function(e,r,t){r=this["normalizeMultiLines"](r);for(var i=0,n=r.length;i<n;i++){if(this["isPointOnRing"](e,r[i],t)){return true}}return false};r.prototype["makesureClockwise"]=function(e){if(!ca(e)){e=[].concat(e);e.reverse()}return e};r.prototype["makesureAntiClockwise"]=function(e){if(ca(e)){e=[].concat(e);e.reverse()}return e};r.prototype["pointInRing"]=function(e,r,t){var i=false;for(var n=0;n<r.length&&!i;n++){if(s(e,r[n][0],t)){var f=false;var a=1;while(a<r[n].length&&!f){if(s(e,r[n][a],!t)){f=true}a++}if(!f){i=true}}}function s(e,r,t){var i=false;if(r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]){r=r.slice(0,r.length-1)}for(var n=0,f=r.length-1;n<r.length;f=n++){var a=r[n][0];var s=r[n][1];var u=r[f][0];var o=r[f][1];var l=e[1]*(a-u)+s*(u-e[0])+o*(e[0]-a)===0&&(a-e[0])*(u-e[0])<=0&&(s-e[1])*(o-e[1])<=0;if(l){return!t}var v=s>e[1]!==o>e[1]&&e[0]<(u-a)*(e[1]-s)/(o-s)+a;if(v){i=!i}}return i}return i};r.prototype["isPointInBbox"]=function(e,r){var t=Infinity;var i=Infinity;var n=-Infinity;var f=-Infinity;for(var a=0;a<r.length;a++){var s=r[a];t=Math.min(t,s[0]);n=Math.max(n,s[0]);i=Math.min(i,s[1]);f=Math.max(f,s[1])}return e[0]>t&&e[0]<n&&e[1]>i&&e[1]<f};r.prototype["isPointInRing"]=function(e,r){r=this["normalizeLine"](r);var t=this.xr(r,true);var i=na.ss(this["project"](e),t,false);return i};r.prototype["isRingInRing"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(!this["isPointInRing"](e[t],r)){return false}}return true};r.prototype["isRingInRingByOutsea"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(this["isPointInRing"](e[t],r)){return true}}for(var t=0,i=r.length;t<i;t++){if(this["isPointInRing"](r[t],e)){return true}}return false};r.prototype["isRingInRingByMapbox"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(!this["isPointInRing"](e[t],r)){return false}}return true};r.prototype["isRingInRingByMapboxB"]=function(e,r){for(var t=0,i=e.length;t<i;t++){if(this["isPointInRing"](e[t],r)){return true}}return false};r.prototype["isPixelRingInRing"]=function(e,r){for(var t=0,i=e.length;t<i;t++){var n=na.ss(e[t],r,false);if(n){return true}}return false};r.prototype["isPointInPolygon"]=function(e,r){r=this["normalizeMultiLines"](r);var t;for(var i=0,n=r.length;i<n;i+=1){t=this["isPointInRing"](e,r[i]);if(i>0){t=!t}if(!t){break}}return Boolean(t)};r.prototype["isPointInPolygons"]=function(e,r){for(var t=0;t<r.length;t++){var i=r[t];i=this["normalizeMultiLines"](i);var n=void 0;for(var f=0,a=i.length;f<a;f+=1){n=this["isPointInRing"](e,i[f]);if(f>0){n=!n}if(!n){break}}if(n){return true}}return false};r.prototype["doesSegmentsIntersect"]=function(e,r,t,i){var n=this.xr([e,r,t,i]);e=n[0];r=n[1];t=n[2];i=n[3];var f=false;var a=(i[0]-t[0])*(e[1]-t[1])-(i[1]-t[1])*(e[0]-t[0]);var s=(r[0]-e[0])*(e[1]-t[1])-(r[1]-e[1])*(e[0]-t[0]);var u=(i[1]-t[1])*(r[0]-e[0])-(i[0]-t[0])*(r[1]-e[1]);if(u!==0){var o=a/u;var l=s/u;if(0<=o&&o<=1&&0<=l&&l<=1){f=true}}return f};r.prototype["doesSegmentLineIntersect"]=function(e,r,t){t=this["normalizeLine"](t);for(var i=0,n=t.length;i<n-1;i++){if(this["doesSegmentsIntersect"](e,r,t[i],t[i+1])){return true}}return false};r.prototype["doesSegmentRingIntersect"]=function(e,r,t){t=this["normalizeLine"](t);for(var i=0,n=t.length;i<n;i++){if(this["doesSegmentsIntersect"](e,r,t[i],t[i===n-1?0:i+1])){return true}}return false};r.prototype["doesSegmentPolygonIntersect"]=function(e,r,t){t=this["normalizeMultiLines"](t);for(var i=0,n=t.length;i<n;i++){if(this["doesSegmentRingIntersect"](e,r,t[i])){return true}}return false};r.prototype["doesLineLineIntersect"]=function(e,r){e=this["normalizeLine"](e);for(var t=0,i=e.length;t<i-1;t++){if(this["doesSegmentLineIntersect"](e[t],e[t+1],r)){return true}}return false};r.prototype["doesLineRingIntersect"]=function(e,r){e=this["normalizeLine"](e);for(var t=0,i=e.length;t<i-1;t++){if(this["doesSegmentRingIntersect"](e[t],e[t+1],r)){return true}}return false};r.prototype["doesPolygonPolygonIntersect"]=function(e,r){if(this["doesRingRingIntersect"](r,e)||this["isRingInRing"](e,r)||this["isRingInRing"](r,e)){return true}return false};r.prototype["doesRingRingIntersect"]=function(e,r){e=this["normalizeLine"](e);for(var t=0,i=e.length;t<i;t++){if(this["doesSegmentRingIntersect"](e[t],e[t===i-1?0:t+1],r)){return true}}return false};r.prototype["along"]=function(e,r){var t=0;for(var i=0;i<e.length-1;i+=1){var n=this["distance"](e[i],e[i+1]);if(n+t<r){t+=n;continue}var f=(r-t)/n;return[e[i][0]+f*(e[i+1][0]-e[i][0]),e[i][1]+f*(e[i+1][1]-e[i][1]),i]}return null};r.prototype.gr=function(e,r){e=this["makesureAntiClockwise"](e);r=this["makesureClockwise"](r);var f,a,s,u;var t=function(e){return(a[0]-f[0])*(e[1]-f[1])>(a[1]-f[1])*(e[0]-f[0])};var i=function(){var e=[f[0]-a[0],f[1]-a[1]],r=[s[0]-u[0],s[1]-u[1]],t=f[0]*a[1]-f[1]*a[0],i=s[0]*u[1]-s[1]*u[0],n=1/(e[0]*r[1]-e[1]*r[0]);return[(t*r[0]-i*e[0])*n,(t*r[1]-i*e[1])*n]};var n=e;f=r[r.length-1];for(var o=0,l=r.length;o<l;o++){a=r[o];var v=n;n=[];s=v[v.length-1];for(var c=0,h=v.length;c<h;c++){u=v[c];if(t(u)){if(!t(s)){n.push(i())}n.push(u)}else if(t(s)){n.push(i())}s=u}f=a}return n};r.prototype["ringRingClip"]=function(e,r){e=this.xr(e);r=this.xr(r);if(!Ji(e[0],e[e.length-1])){e.push(e[0].slice())}if(!Ji(r[0],r[r.length-1])){r.push(r[0].slice())}var t=oa.qP([e],[r]);if(!t||!t[0]||!t[0][0]){return[]}return this.br(t[0][0])};r.prototype["ringArea"]=function(e){throw new Error("distance Not implemented!")};r.prototype["distanceOfLine"]=function(e){e=this["normalizeLine"](e);var r=0;for(var t=0,i=e.length;t<i-1;t++){r+=this["distance"](e[t],e[t+1])}return r};r.prototype["isClockwise"]=function(e){e=this.xr(e);return ca(e)};r.prototype["typePolygon"]=function(e){if(!b(e)||!b(e[0])){return"never"}if(e[0][0].length===2||e[0][0]instanceof j){return"Polygon"}else if(e[0][0].length>2&&(e[0][0][0].length===2||e[0][0][0]instanceof j)){return"MultiPolygon"}else{return"never"}};return r}();var F=new ha({});var O=new ha({});O["setCrs"]("plane");var da={distance:F.distance.bind(F),ringArea:F.ringArea.bind(F),isClockwise:F.isClockwise.bind(F),typePolygon:F.typePolygon.bind(F),makesureClockwise:F.makesureClockwise.bind(F),makesureAntiClockwise:F.makesureAntiClockwise.bind(F),distanceOfLine:F.distanceOfLine.bind(F),ringRingClip:F.ringRingClip.bind(F),doesSegmentsIntersect:F.doesSegmentsIntersect.bind(F),doesSegmentLineIntersect:F.doesSegmentLineIntersect.bind(F),doesSegmentRingIntersect:F.doesSegmentRingIntersect.bind(F),doesSegmentPolygonIntersect:F.doesSegmentPolygonIntersect.bind(F),doesLineLineIntersect:F.doesLineLineIntersect.bind(F),doesLineRingIntersect:F.doesLineRingIntersect.bind(F),doesRingRingIntersect:F.doesRingRingIntersect.bind(F),pointInRing:F.pointInRing.bind(F),isPointInRing:F.isPointInRing.bind(F),isPointInBbox:F.isPointInBbox.bind(F),isRingInRing:F.isRingInRing.bind(F),isPointInPolygon:F.isPointInPolygon.bind(F),isPointInPolygons:F.isPointInPolygons.bind(F),isPointOnSegment:F.isPointOnSegment.bind(F),isPointOnLine:F.isPointOnLine.bind(F),isPointOnRing:F.isPointOnRing.bind(F),isPointOnPolygon:F.isPointOnPolygon.bind(F),closestOnSegment:F.closestOnSegment.bind(F),closestOnLine:F.closestOnLine.bind(F),distanceToSegment:F.distanceToSegment.bind(F),distanceToLine:F.distanceToLine.bind(F)};var ya={distance:O.distance.bind(O),ringArea:O.ringArea.bind(O),isClockwise:O.isClockwise.bind(O),typePolygon:O.typePolygon.bind(O),makesureClockwise:O.makesureClockwise.bind(O),makesureAntiClockwise:O.makesureAntiClockwise.bind(O),distanceOfLine:O.distanceOfLine.bind(O),ringRingClip:O.ringRingClip.bind(O),doesSegmentsIntersect:O.doesSegmentsIntersect.bind(O),doesSegmentLineIntersect:O.doesSegmentLineIntersect.bind(O),doesSegmentRingIntersect:O.doesSegmentRingIntersect.bind(O),doesSegmentPolygonIntersect:O.doesSegmentPolygonIntersect.bind(O),doesLineLineIntersect:O.doesLineLineIntersect.bind(O),doesLineRingIntersect:O.doesLineRingIntersect.bind(O),doesRingRingIntersect:O.doesRingRingIntersect.bind(O),pointInRing:O.pointInRing.bind(O),isPointInRing:O.isPointInRing.bind(O),isPointInBbox:O.isPointInBbox.bind(O),isRingInRing:O.isRingInRing.bind(O),isPointInPolygon:O.isPointInPolygon.bind(O),isPointInPolygons:O.isPointInPolygons.bind(O),isPointOnSegment:O.isPointOnSegment.bind(O),isPointOnLine:O.isPointOnLine.bind(O),isPointOnRing:O.isPointOnRing.bind(O),isPointOnPolygon:O.isPointOnPolygon.bind(O),closestOnSegment:O.closestOnSegment.bind(O),closestOnLine:O.closestOnLine.bind(O),distanceToSegment:O.distanceToSegment.bind(O),distanceToLine:O.distanceToLine.bind(O)};var j=function(){function a(e,r,t){if(t===void 0){t=false}this.className="AMap.LngLat";if(ta(e)){e=parseFloat(e[0]);r=parseFloat(e[1])}else{r=parseFloat(r);e=parseFloat(e)}if(isNaN(e)||isNaN(r)){if(!window._AMapConfig){throw Error("Invalid Object: LngLat("+e+", "+r+")")}}if(t!==true){r=Math.max(Math.min(r,90),-90);e=(e+180)%360+(e<-180||e===180?180:-180)}this.kT=r;this.KL=e;this.lng=Math.round(e*1e6)/1e6;this.lat=Math.round(r*1e6)/1e6;this.pos=I.getProjection("EPSG:3857").project(e,r)}a.from=function(e){if(ea(e)){return new a(e.KL,e.kT)}return new a(e[0],e[1])};a.prototype["setLng"]=function(e){this.KL=e;this.lng=Math.round(e*1e6)/1e6;return this};a.prototype["setLat"]=function(e){this.kT=e;this.lat=Math.round(e*1e6)/1e6;return this};a.prototype["getLng"]=function(){return this.lng};a.prototype["getLat"]=function(){return this.lat};a.prototype["equals"]=function(e){e=ia(e);if(!(e instanceof a)){return false}var r=Math.max(Math.abs(this.kT-e.kT),Math.abs(this.KL-e.KL));return r<=1e-9};a.prototype["add"]=function(e,r){return new a(this.KL+e.KL,this.kT+e.kT,r)};a.prototype["subtract"]=function(e,r){return new a(this.KL-e.KL,this.kT-e.kT,r)};a.prototype["divideBy"]=function(e,r){return new a(this.KL/e,this.kT/e,r)};a.prototype["multiplyBy"]=function(e,r){return new a(this.KL*e,this.kT*e,r)};a.prototype["offset"]=function(e,r){if(isNaN(e)||isNaN(r)){throw Error("valid offset args, require number")}var t=2*Math.asin(Math.sin(Math.round(e)/(2*6378137))/Math.cos(this.kT*Math.PI/180));var i=this.KL+t*180/Math.PI;var n=2*Math.asin(Math.round(r)/(2*6378137));var f=this.kT+n*180/Math.PI;return new a(i,f)};a.prototype["toString"]=function(){return this.lng+","+this.lat};a.prototype["toArray"]=function(){return[this.lng,this.lat]};a.prototype["toJSON"]=function(){return[this.lng,this.lat]};a.prototype["distanceTo"]=function(e){return da["distance"](this,e)};a.prototype["distance"]=function(e){return da["distance"](this,e)};return a}();var ma=function(){function e(){}e["add"]=function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}};return e}();var _={getViewport:function(e){if(!e){return[0,0]}return[e.clientWidth,e.clientHeight]},getStyle:function(e,r){var t=e.style[r];if((!t||t==="auto")&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);t=i?i[r]:null}if((!t||t==="auto")&&r==="height"){t=e.clientHeight+"px"}if((!t||t==="auto")&&r==="width"){t=e.clientWidth+"px"}return t==="auto"?null:t},getViewportOffset:function(e){var r=0;var t=0;var i=e;var n=document.body;var f=document.documentElement;var a;do{r+=i.offsetTop||0;t+=i.offsetLeft||0;r+=parseInt(_.getStyle(i,"borderTopWidth"),10)||0;t+=parseInt(_.getStyle(i,"borderLeftWidth"),10)||0;a=_.getStyle(i,"position");if(i.offsetParent===n&&a==="absolute"){break}if(a==="fixed"){r+=n.scrollTop||f.scrollTop||0;t+=n.scrollLeft||f.scrollLeft||0;break}i=i.offsetParent}while(i);i=e;do{if(i===n){break}r-=i.scrollTop||0;t-=i.scrollLeft||0;if(!_.m()&&$.g){t+=i.scrollWidth-i.clientWidth}i=i.parentNode}while(i);return[t,r]},m:function(){var e=false;var r=false;return function(){if(!e){r=_.getStyle(document.body,"direction")==="ltr";e=true}return r}}(),create:function(e,r,t,i){var n=document.createElement(e);if(t){n.className=t}if(r){if(i&&i==="before"){var f=r.firstChild;r.insertBefore(n,f)}else{r.appendChild(n)}}return n},toggleClass:function(e,r,t){if(t){this.addClass(e,r)}else{this.removeClass(e,r)}},hasClass:function(e,r){if(!e||!r){return}return e.className.length>0&&new RegExp("(^|\\\\s)"+r+"(\\\\s|$)").test(e.className)},addClass:function(e,r){if(!e||!r){return}if(e.classList&&e.classList.add){e.classList.add(r)}else if(!this.hasClass(e,r)){e.className+=(e.className?" ":"")+r}},setClass:function(e,r){if(!e){return}e.className=r||""},removeClass:function(e,t){function r(e,r){if(r===t){return""}return e}if(!e||!t){return}if(e.classList&&e.classList.remove){e.classList.remove(t)}else{e.className=e.className.replace(/(\\S+)\\s*/g,r).replace(/(^\\s+|\\s+$)/,"")}},watchSize:function(t,i,n){var r=document.createElement("iframe");r.style.cssText="width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;";r.onload=function(){if(r){r.contentWindow.onresize=e}};t.appendChild(r);r.src="javascript:void(0)";var f=0;var a=0;e();n.resize=e;function e(){n.k=t.getBoundingClientRect();n.M=[t.clientLeft,t.clientTop];var e=t.offsetWidth;var r=t.offsetHeight;if(e!==f||r!==a){i(e,r);f=e;a=r}}window.onscroll=e;return function(){var e;if(n.resize){n.resize=null}if(window.onscroll){window.onscroll=null}if(r.contentWindow){r.contentWindow.onresize=null;r.contentWindow.document.write("");r.parentNode.removeChild(r);(e=r.contentWindow)===null||e===void 0?void 0:e.close()}}},watchSize2:function(t,i,n){var f=document.createElement("_");f.className="expand";var a=f.appendChild(document.createElement("_"));a.className="shrink";var s=f.appendChild(document.createElement("_"));s.className="expandChild";var e=a.appendChild(document.createElement("_"));e.className="shrinkChild";var u;var o;var r="height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1";a.style.cssText=f.style.cssText=r;e.style.cssText=s.style.cssText="display:block;height:100%;transition:0s;width:100%";e.style.width=e.style.height="200%";t.appendChild(f);l();return c;function l(){v();n.k=t.getBoundingClientRect();n.M=[t.clientLeft,t.clientTop];var e=t.offsetWidth;var r=t.offsetHeight;if(e!==u||r!==o){u=e;o=r;s.style.width=e*2+"px";s.style.height=r*2+"px";f.scrollLeft=f.scrollWidth;f.scrollTop=f.scrollHeight;a.scrollLeft=a.scrollWidth;a.scrollTop=a.scrollHeight;i(e,r)}a.addEventListener("scroll",l);f.addEventListener("scroll",l)}function v(){a.removeEventListener("scroll",l);f.removeEventListener("scroll",l)}function c(){v();t.removeChild(f)}},mousePos:function(e,r,t){if(e){t.k=e.getBoundingClientRect();t.M=[e.clientLeft,e.clientTop]}var i=t.k;var n=r;if(n.touches&&n.changedTouches){if(n.touches.length>0){n=n.touches[0]}else{n=n.changedTouches[n.changedTouches.length-1]}}return[n.clientX-i.left-t.M[0],n.clientY-i.top-t.M[1]]},remove:function(e){if(e&&e.parentNode){e.parentNode.removeChild(e)}},empty:function(e){while(e.firstChild){e.removeChild(e.firstChild)}},closest:function(e,r){if(e){if(this.hasClass(e,r)){return e}else{var t=e.parentElement;if(t){return _.closest(t,r)}return null}}return null},fillText:function(e,r){if(!e){return}if(e.textContent!==void 0){e.textContent=r}else if(e.innerText!==void 0){e.innerText=r}else{e.innerHTML=r}return e},_L:function(e){var r=document.documentElement.style;for(var t=0;t<e.length;t+=1){if(e[t]in r){return e[t]}}return false},rotate:function(e,r,t){var i=_.kL;t=t||{x:e.clientWidth/2,y:e.clientHeight/2};if(i){var n="";n+=" rotate("+r+"deg)";e.style[i]=n;e.style[_.ML[i]+"-origin"]=t.x+"px "+t.y+"px"}else{var f=Math.cos(r*Math.PI/180);var a=Math.sin(r*Math.PI/180);e.style.filter="progid:DXImageTransform.Microsoft.Matrix()";if(e["filters"].length>0){var s=e["filters"].item(0);s["Dx"]=-t.x*f+t.y*a+t.x;s["Dy"]=-t.x*a-t.y*f+t.y;s["M11"]=s["M22"]=f;s["M12"]=-(s["M21"]=a)}}},setCss:function(e,r){e=e instanceof Array?e:[e];for(var t=0;t<e.length;t+=1){for(var i in r){if(r.hasOwnProperty(i)){e[t].style[i]=r[i]}}}return this},setOpacity:function(e,r){if(!e.style){return}if("opacity"in e.style){e.style.opacity=""+r}else if("filter"in e.style){var t="DXImageTransform.Microsoft.Alpha";var i=Math.round(r*100);e.style.filter="";if(i!==100){e.style.filter=" progid:"+t+"(opacity="+i+")"}}},ML:{},kL:false};_.kL=_._L(["WebkitTransform","OTransform","MozTransform","msTransform","transform"]);_.ML={transform:"transform",WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform"};var ba=function(){function e(){this.Hy=false;this.ex=null;this.Ky=this.nx()}e.prototype.open=function(e,r,t){var i=this;if(this.Hy){return}var n=this.Jy;var f=AMap.getConfig()["server"]+"/verify/";if($.$e){this.Ky.style.marginLeft=-Math.min(330,screen.width)/2+"px";document.body.appendChild(this.Ky)}else{var a=this.Qy("amap-container",document.body)[0];if(a&&a.clientWidth>322&&a.clientHeight>346){this.Ky.style.position="absolute";a.appendChild(this.Ky)}else{var s=.5;var u=.5;var o=0;var l=0;if(a){var v=_.getViewportOffset(a);o=v[0];l=v[1]}this.Ky.style.top="0%";this.Ky.style.left="0%";var c=s-o;var h=u-l;var d=c/5;var y=h/5;var m=setInterval(function(){o+=d;l+=y;if(s-o<.05&&u-l<.05){i.Ky.style.top="50%";i.Ky.style.left="50%";clearInterval(m)}else{i.Ky.style.top=l*100+"%";i.Ky.style.left=o*100+"%"}},25);document.body.appendChild(this.Ky)}}var b=true;var p=function(){if(b){b=false;return}else if(i.Hy){if(i.Ky.parentNode){i.Ky.parentNode.removeChild(i.Ky)}i.Hy=false;i.tx()}};n.onload=p;n.src=f+"jsapi.html?channel=JSAPI-"+e+"&from="+encodeURIComponent(f+"success.html")+"&th="+r+"&restUrl="+encodeURIComponent(t);this.Hy=true};e.prototype.ix=function(e){this.ex=e};e.prototype.tx=function(){if(this.ex){this.ex()}};e.prototype.Qy=function(e,r){if(window.getElementsByClassName){return window.getElementsByClassName(e,r)}var t=(r||document).getElementsByTagName("*");var i=[];for(var n=0;n<t.length;n+=1){var f=t[n];var a=f.className.split(" ");for(var s=0;s<a.length;s+=1){if(a[s]===e){i.push(f);break}}}return i};e.prototype.nx=function(){var e=document.createElement("div");e.className="amap-popup";e.style.zIndex="2147483647";var r=document.createElement("iframe");r.className="amap-popup-content";e.appendChild(r);r.style.width=Math.min(330,screen.width)+"px";this.Jy=r;return e};return e}();var pa={xv:"ActiveXObject"in window&&!document.addEventListener,opts:{callback:"callback",type:"json",charset:"utf-8"},setOptions:function(e){this.opts=l(this.opts,e)},bv:function(){},gv:function(){this.emit("error",{info:"TIME_OUT_A"})},JSONP:function(r,t,e){if(e===void 0){e={}}r=encodeURI(r);var i=S.getGuid("jsonp_",6)+"_";var n=document.createElement("script");n.type="text/javascript";n.charset="utf-8";n.async=true;e=l({},this.opts,e);var f=function(){window[i]=null;n.onerror=null;if(n.parentNode){n.parentNode.removeChild(n)}};n.onerror=function(e){f();if(t){t("error",{url:r,info:"Request Error"})}};window[i]=function(e){f();if(t){t("complete",{info:"ok",url:r,data:e})}};var a="?";if(r.indexOf("?")!==-1){a="&"}var s=r+a+e["callback"]+"="+i;n.src=s;var u=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];u.appendChild(n)},Ajax:function(r,e,t){if(window.XMLHttpRequest===undefined&&window.wv){var i=this._v=new window.wv;i.onerror=function(e){t("error",{info:"Request Error",url:r,data:""})};i.onload=function(){t("complete",{url:r,data:i.responseText})};i.open(e["type"]||"GET",r);setTimeout(function(){i.send(e["content"]||null)},0);return i}else if(window.XMLHttpRequest){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===4){if(n.status===200){var e=void 0;if(n.responseType==="arraybuffer"){e=n.response}else{e=n.responseText}t("complete",{info:"ok",url:r,data:e})}else{n.abort();t("error",{info:n.status,url:r,data:""})}}};n.onerror=function(e){n.abort();t("error",{info:"Request Error",url:r,data:""})};n.open(e["type"]||"GET",r,true);n.responseType=e["responseType"]||"text";if(e["type"]==="POST"){n.setRequestHeader("Content-Type",e["requestContentType"]||"application/x-www-form-urlencoded")}n.send(e["content"]||null);return n}else{t("error",{info:"Not Support Ajax",url:r,data:""})}}};var xa={"restapi.amap.com/v3/place/text":"KEYWORD","restapi.amap.com/v3/place/polygon":"POLYGON","restapi.amap.com/v3/place/around":"NEARBY","restapi.amap.com/v3/place/detail":"ID","restapi.amap.com/v3/geocode/regeo":"REGEO"};var wa=new ba;wa.ix(function(){ka.ox=false;var e=ka.ax;for(var r=0,t=e.length;r<t;r+=1){var i=e[r];if(t-r>10){e[2]({status:"error",info:"TIME_OUT_A"});continue}ka.get(i[0],i[1],i[2])}ka.ax=[]});var ka=function(){function m(){}m.get=function(t,i,n,e){if(e===void 0){e={}}if(m.ox){m.ax.push([t,i,n]);return}var r=t.split("://")[1];var f=xa[r];var a=f!==undefined;var s=AMap.getConfig(),u=s["key"],o=s["version"],l=s["appname"],v=s["jscode"],c=s["gaodeserver"];var h=t+"?platform=JS&s=rsv3&logversion=2.0&key="+u+"&sdkversion="+o+"&appname="+l+"&csid="+S.uuid();if(v){h+="&jscode="+v}else if(c&&r&&r.split("/")[0]==="restapi.amap.com"){var d=r.replace(r.split("/")[0],c);h=d+"?platform=JS&s=rsv3&logversion=2.0&key="+u+"&sdkversion="+o+"&appname="+l+"&csid="+S.uuid()}for(var y in i){if(i.hasOwnProperty(y)){h+="&"+y+"="+i[y]}}pa["JSONP"](h,function(e,r){if(e==="complete"){r=r["data"];if(a&&r["errcode"]===3e4&&r["data"]){m.ox=true;m.ax.push([t,i,n]);wa.open(f,r["data"]["host"],h)}else{n(e,r)}}else{n(e,r)}},e)};m.post=function(e,r,t){var i=AMap.getConfig(),n=i["key"],f=i["version"],a=i["appname"],s=i["jscode"],u=i["gaodeserver"];var o=e.split("://")[1];var l=e+"?platform=JS&s=rsv3&logversion=2.0&key="+n+"&sdkversion="+f+"&appname="+a+"&csid="+S.uuid();if(s){l+="&jscode="+s}else if(u&&o&&o.split("/")[0]==="restapi.amap.com"){var v=o.replace(o.split("/")[0],u);l=v+"?platform=JS&s=rsv3&logversion=2.0&key="+n+"&sdkversion="+f+"&appname="+a+"&csid="+S.uuid()}pa["Ajax"](l,{type:"POST",content:JSON.stringify(r),requestContentType:"text/plain"},function(e,r){if(e==="complete"){r=r["data"];t(e,JSON.parse(r))}else{t(e,r)}})};m.ox=false;m.ax=[];return m}();var ga={pointerCursor:true};var Ma=function(n){f(S,n);function S(e,r,t){var i=n.call(this)||this;i["CLASS_NAME"]="AMap.HotSpot";i.rF=S.aF["protocol"]+"://vdata.amap.com/mapclick";i.yF=20037508.342789244;i.Xa=256;i.du=20037508.342789244*2/256/Math.pow(2,20);t=l({},ga,t);ma.add(i,t);i.$o=r||i.rF;i.dF=t["pointerCursor"]||true;if(e){i.setMap(e)}return i}S.prototype.oF=function(e){var r=e.D$();var t;if(r==="zh_cn"){t=this.rF}else{t=S.aF.protocol+"://mapclick.amap.com/poi";if($.mobile){t+="_mo"}if(r!=="zh_cn"){t+="_"+r}t+="/poi"}if(this.$o!==t){this.$o=t;S.record={};S.data={};this.hF()}};S.prototype.setMap=function(e){ma.add(this,"setMap");var r=this._map;if(r){r.off("click",this.lF,this);r.off("mousemove",this.jL,this);r.off("moveend",this.hF,this);r.off("zoomend",this.hF,this);r.off("viewreset",this.hF,this)}this._map=e;if(e){var t=e["getViewMode_"]();if(t!=="3D"){this.oF(e);e.on("click",this.lF,this);e.on("mousemove",this.jL,this);e.on("moveend",this.hF,this);e.on("zoomend",this.hF,this);e.on("viewreset",this.hF,this);this.hF()}}else{S.record={}}};S.prototype.fF=function(e,r){var t=parseInt(e["ic"],10);if(r<=18&&r>=14){if(t>=335&&t<=374){return false}if(t>=436&&t<=444){return false}if(t===431||t===432||t===434||t===447||t===448){return false}}if(r===18||r===17){if(t===375||t===3751||t===445||t===376){return false}}if(r===18&&t===323){return false}if(r===13&&t===334){return false}if(r<=18&&r>=10&&t===8e3){return false}if(r<=18&&r>=13&&t===381){return false}return true};S.prototype.lF=function(e){var r=this.uF(e["lnglat"]);if(r&&this._map){this._map.emit("hotspotclick",r)}};S.prototype.jL=function(e){var r=this.uF(e["lnglat"]);if(r&&this.cF!==r){if(this.dF){this._map.setCursor("pointer")}if(this.cF){this._map.emit("hotspotout",this.cF)}this._map.emit("hotspotover",r)}if(!r&&this.cF){if(this.dF){this._map["setCursor"](this._map.getDefaultCursor())}this._map.emit("hotspotout",this.cF)}this.cF=r};S.prototype.hF=function(){var t=this;var e=this._map;if(!e){return}if(!S.data){S.data={}}if(!S.record){S.record={}}var i=this.pF();if(Math.ceil(i)!==this.pF()){return}var r=this.vF();if(r){ka["get"](this.$o,{tiles:r,level:i},function(e,r){if(t._map){t.mF(r,i)}},{callback:"cbk"})}};S.prototype.vF=function(){var e=this._map;var r=this.pF();var t=e["getBounds"]();var i=this.du;var n=t.getNorthWest().pos;var f=t.getSouthEast().pos;var a=256;var s=this.yF;var u=n[0]+s;var o=s-f[1];var l=f[0]+s;var v=s-n[1];var c=Math.pow(2,20-r);var h=u/c/i;var d=v/c/i;var y=l/c/i;var m=o/c/i;var b=Math.floor(h/a);var p=Math.floor(d/a);var x=Math.floor(y/a);var w=Math.floor(m/a);var k=Math.pow(2,r);if(b>x){x+=k}var g=[];for(var M=b;M<=x;M+=1){for(var I=p;I<=w;I+=1){var A=[r,M,I].join("_");if(!S.record[A]){g.push(M+","+I);S.record[A]=1}}}if(g.length){return g.join(";")}else{return null}};S.prototype.mF=function(e,r){if(e["list"]){var t=e["list"];for(var i in t){if(t.hasOwnProperty(i)){var n=t[i];for(var f=0;f<n.length;f+=1){var a=n[f];if(!this.fF(a,r)){continue}var s={id:a["id"],name:a["n"].replace(/\\^/g,""),lnglat:new j(a["p"][0],a["p"][1])};var u=[];var o=["b","ib"];for(var l=0,v=o.length;l<v;l++){var c=a[o[l]];if(c){u.push.apply(u,this.xF(new j(c[0],c[3]),new j(c[2],c[1]),r))}}for(var h=0;h<u.length;h+=1){var d=u[h][0];var y=u[h][1];if(!S.data[d]){S.data[d]={}}S.data[d][y]=s}}}}}};S.prototype.bF=function(e){var r=this.pF();var t=Math.pow(2,20-r);var i=this.yF;var n=this.du;var f=this._map.getProjection();var a=f.project(e.lng,e.lat);var s=this.Xa;var u=Math.round(i+a[0])/n/t;var o=Math.round(i-a[1])/n/t;var l=Math.floor(u/s);var v=Math.floor(o/s);var c=u%s;var h=o%s;return{gF:l,wF:v,offsetX:c,offsetY:h}};S.prototype.xF=function(e,r,t){var i=this.bF(e);var n=this.bF(r);var f=256;var a=[];n.offsetX+=(n.gF-i.gF)*f;n.offsetY+=(n.wF-i.wF)*f;for(var s=i.gF;s<=n.gF;s+=1){for(var u=i.wF;u<=n.wF;u+=1){var o=[t,s,u].join("_");var l=[Math.max((s-i.gF)*f,i.offsetX)%f,Math.max((u-i.wF)*f,i.offsetY)%f,Math.min((s-i.gF+1)*f-1,n.offsetX)%f,Math.min((u-i.wF+1)*f-1,n.offsetY)%f].join("_");a.push([o,l])}}return a};S.prototype.uF=function(e){var r=this.bF(e);var t=this._map;if(!t){return}var i=[this.pF(),r.gF,r.wF].join("_");if(S.data[i]){var n=S.data[i];for(var f in n){if(n.hasOwnProperty(f)){var a=f.split("_");var s=parseInt(a[0],10);var u=parseInt(a[1],10);var o=parseInt(a[2],10);var l=parseInt(a[3],10);if(r.offsetX>=s&&r.offsetX<=o&&r.offsetY>=u&&r.offsetY<=l){return n[f]}}}}return null};S.prototype.pF=function(){var e=this._map;var r=18;var t=r;if(e){t=Math.floor(e["getZoom"]());t=t>r?r:t}return t};S.record={};S.data={};S.aF={protocol:"https"};return S}(Sf);var Ia=function(r){f(e,r);function e(){var e=r.call(this)||this;e.wo=document.createElement("div");return e}e.prototype["getContainer"]=function(){return this.wo};e.prototype.renderFrame=function(){};return e}(gf);var Aa=function(t){f(e,t);function e(e){var r=t.call(this,e)||this;r.context=void 0;r.Ao=[];r.map=e;r.GT(e["getLayers"]());r._F=new Ma(e);return r}e.prototype.to=function(){if(this.map){this.map.setNeedUpdate(true)}};e.prototype.renderFrame=function(e){var r=e.layers.sort(function(e,r){return e.getLayerConfig().zIndex-r.getLayerConfig().zIndex});this.lS(null,e);var t=e.viewState.zoom;var i=true;for(var n=0,f=r.length;n<f;n+=1){var a=r[n];var s=a.getState();var u=r[n].getRender();if(u){if(!a.lo()){i=false}var o=e.uo.getData(r[n].co(),e.viewState,void 0);if(o){u.renderFrame(undefined,o,e,s,this,a)}}}if(!this.map.complete&&i){this.map.emit("complete");this.map.complete=true}if(!this.map.getView().h_()){this.map.getView().aD();this.map.emit("viewchange",{view:this.map["getView"](),type:this.map["getView"]().type||"3D"})}};e.prototype.getLayerRender=function(e){switch(e.CLASS_NAME){case"AMap.NebulaLayer":case"AMap.ImageLayer":return new Af(this.map,e);case"AMap.VectorLayer":case"AMap.VectorSvgLayer":return e.getRender();case"AMap.RasterLayer":return new g(this.map,e);case"AMap.TileLayer":return new g(this.map,e);case"AMap.TileLayer.Flexible":return new g(this.map,e);case"AMap.TileLayer.RoadNet":return new g(this.map,e);case"AMap.TileLayer.Satellite":return new g(this.map,e);case"AMap.TileLayer.Traffic":return new g(this.map,e);case"AMap.TileLayer.WMS":return new g(this.map,e);case"AMap.TileLayer.WMTS":return new g(this.map,e);case"AMap.SkyLayer":return new Ia;case"AMap.IndoorMap":return new kf;case"AMap.LabelsLayer":return new ef;case"AMap.CustomLayer":return new df;default:return new g(this.map,e)}};e.prototype.destroy=function(){for(var e=0,r=this.Ao;e<r.length;e++){var t=r[e];t.layer.destroy()}this.Ao=[]};e.prototype.GT=function(e){for(var r=0;r<e.length;r++){var t=e[r];var i=this.getLayerRender(t);if(!i){continue}var n=i.type==="labelsLayer"||i.type==="customLayer";t.Do(i);this.Ao.push({layer:t,render:i,div:i&&n?null:i.getContainer()})}};return e}(If);var Sa=function(){function e(){}e.prototype.clear=function(e,r){if(!e._map){return}if(!e.F$){return}r.removeChild(e.F$)};return e}();var $a=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.O$=function(e,r,t){if(!e.q$){return}if(!e.F$){e.F$=document.createElementNS("http://www.w3.org/2000/svg","g");e.F$.cee=document.createElementNS("http://www.w3.org/2000/svg","path");e.F$.inner=document.createElementNS("http://www.w3.org/2000/svg","path");e.F$.appendChild(e.F$.cee);e.F$.appendChild(e.F$.inner)}if(!e.F$){return}if(e.F$.parentNode!==t){t.appendChild(e.F$)}var i="";var n=e.q$;var f=r.Nm;var a=r.resolution;for(var s=0,u=n;s<u.length;s++){var o=u[s];var l=[];var v=[];for(var c=0,h=o.length;c<h;c+=1){var d=o[c];var y=Math.round((d[0]-f[0])/a);var m=Math.round((f[1]-d[1])/a);if(c===0){var b="M"+y+","+m+" ";v.push(b)}else{var b="L"+y+","+m+" ";v.push(b)}}l.push(v.join("")+"\\n");i+=l.join("")}var p=this.hee(e);e.F$.cee.style.cssText=p.dee;e.F$.inner.style.cssText=p.yee;e.F$.cee.setAttribute("d",i);e.F$.inner.setAttribute("d",i);return i};r.prototype.hee=function(e){var r=e._opts;var t=r["outlineColor"];var i=r["strokeColor"];var n=r["strokeWeight"];var f=r["isOutline"];var a=r["strokeOpacity"];var s=r["strokeStyle"];var u=r["strokeDasharray"];var o=[];if(typeof a==="number"){o.push("stroke-opacity:"+a)}o.push("stroke-linejoin:"+(r["lineJoin"]||"round"));o.push("fill-opacity:0");if(s){var l=s==="solid"?"none":u;o.push("stroke-dasharray:"+l.toString())}var v="";var c="";if(e.visible&&f){o.push("stroke-width:"+(n+r["borderWeight"]*2));o.push("stroke:"+t||"rgba(0,0,0,0)");v=o.join(";");o.pop();o.pop()}else{o.push("display:"+"none");v=o.join(";");o.pop()}o.push("display:"+(e.visible?"block":"none")+";");o.push("stroke-width:"+n);o.push("stroke:"+i||"rgba(0,0,0,0)");c=o.join(";");return{dee:v,yee:c}};return r}(Sa);var Ca=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.O$=function(e,r,t){if(!e.q$){return}if(!e.F$){e.F$=document.createElementNS("http://www.w3.org/2000/svg","g");e.F$.inner=document.createElementNS("http://www.w3.org/2000/svg","path");e.F$.appendChild(e.F$.inner)}if(e.F$.parentNode!==t){t.appendChild(e.F$)}var i=e.q$;var n="";for(var f=0,a=i;f<a.length;f++){var s=a[f];var u=[];var o=r.Nm;var l=r.resolution;for(var v=0,c=s.length;v<c;v+=1){var h=s[v];var d=[];for(var y=0,m=h.length;y<m;y+=1){var b=h[y];var p=Math.ceil((b[0]-o[0])/l);var x=Math.ceil((o[1]-b[1])/l);if(y===0){var w="M"+p+","+x+" ";d.push(w)}else{var w="L"+p+","+x+" ";d.push(w)}}u.push(d.join("")+" z"+"\\n")}n+=u.join("")}var k=e.F$.inner;k.style.cssText=this.hee(e);k.setAttribute("d",n)};r.prototype.hee=function(e){var r=e._opts;var t=r["strokeColor"],i=r["strokeWeight"],n=r["strokeOpacity"],f=r["fillColor"],a=r["fillOpacity"],s=r["strokeStyle"],u=r["strokeDasharray"];var o=[];o.push("fill-rule:evenodd");if(t){o.push("stroke:"+t);if(typeof n==="number"){o.push("stroke-opacity:"+n)}o.push("stroke-linejoin:"+(r["lineJoin"]||"miter"))}else{o.push("stroke-opacity:"+0)}if(f){o.push("fill:"+f);if(typeof a==="number"){o.push("fill-opacity:"+a)}}else{o.push("fill-opacity:"+0)}if(i){o.push("stroke-width:"+i)}if(s){var l=s==="solid"?"none":u;o.push("stroke-dasharray:"+l.toString())}o.push("display:"+(e["visible"]?"block":"none")+";");return o.join(";")};return r}(Sa);var Fa=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.O$=function(e,r,t,i){if(!e._map){return}if(!e.F$){e.F$=document.createElementNS("http://www.w3.org/2000/svg","g");e.F$.Q0=document.createElementNS("http://www.w3.org/2000/svg","circle");e.F$.appendChild(e.F$.Q0)}if(e.F$.parentNode!==t){t.appendChild(e.F$)}var n=r.Nm;var f=r.resolution;var a=AMap["Util"]["parseLngLatData"](e.getOptions().center);var s=e["getRadius"]();if(!a||!ra(s)){return}var u=i.map["getResolution"](a);var o=e._map.getProjection();var l=o.project(a.lng,a.lat);var v=Math.round((l[0]-n[0])/f);var c=Math.round((n[1]-l[1])/f);var h=Math.ceil(s/u);e.F$.Q0.style.cssText=this.hee(e);e.F$.Q0.setAttribute("cx",""+v);e.F$.Q0.setAttribute("cy",""+c);e.F$.Q0.setAttribute("r",""+h)};r.prototype.hee=function(e){var r=e._opts;var t=r["strokeColor"],i=r["strokeWeight"],n=r["strokeOpacity"],f=r["fillColor"],a=r["fillOpacity"],s=r["strokeStyle"],u=r["strokeDasharray"];var o=[];if(t){o.push("stroke:"+t);if(typeof n==="number"){o.push("stroke-opacity:"+n)}}else{o.push("stroke-opacity:"+0)}if(f){o.push("fill:"+f);if(typeof a==="number"){o.push("fill-opacity:"+a)}}else{o.push("fill-opacity:"+0)}if(i){o.push("stroke-width:"+i)}if(s){var l=s==="solid"?"none":u;o.push("stroke-dasharray:"+l.toString())}o.push("display:"+(e.visible?"block":"none")+";");var v=o.join(";");return v};return r}(Sa);var Oa=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.O$=function(e,r,t,i){if(!e._map){return}if(!e.F$){e.F$=document.createElementNS("http://www.w3.org/2000/svg","g");e.F$.inner=document.createElementNS("http://www.w3.org/2000/svg","circle");e.F$.appendChild(e.F$.inner)}if(e.F$.parentNode!==t){t.appendChild(e.F$)}var n=r.Nm;var f=r.resolution;var a=e.getOptions();var s=AMap["Util"]["parseLngLatData"](e.getOptions().center);var u=this.Ib(e);if(!s||!u){return}var o=a.radius+a.strokeWeight;var l=(a.strokeWeight/2+a.radius)/o*u;var v=e._map["getProjection"]();var c=v.project(s.lng,s.lat);var h=Math.round((c[0]-n[0])/f);var d=Math.round((n[1]-c[1])/f);var y=e.F$.inner;y.style.cssText=this.hee(e);y.setAttribute("cx",""+h);y.setAttribute("cy",""+d);y.setAttribute("r",""+l)};r.prototype.hee=function(e){var r=e.getOptions();var t=r["strokeColor"],i=r["strokeWeight"],n=r["strokeOpacity"],f=r["fillColor"],a=r["fillOpacity"],s=r["strokeStyle"],u=r["strokeDasharray"];var o=[];if(t){o.push("stroke:"+t);if(typeof n==="number"){o.push("stroke-opacity:"+n)}}if(f){o.push("fill:"+f);if(typeof a==="number"){o.push("fill-opacity:"+a)}}if(i){var l=this.Ib(e);var v=e.getOptions();var c=v.radius+v.strokeWeight;var h=v.strokeWeight/c*l;o.push("stroke-width:"+h)}if(s){var d=s==="solid"?"none":u;o.push("stroke-dasharray:"+d.toString())}o.push("display:"+(e.visible?"block":"none")+";");var y=o.join(";");return y};r.prototype.Ib=function(e){var r=e.getOptions();var t=r.radius+(r.strokeWeight||0);return Math.min(t,64)};return r}(Sa);var ja=function(e){f(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}r.prototype.O$=function(e,r,t,i){if(!e._map){return}if(!e.F$){e.F$=document.createElementNS("http://www.w3.org/2000/svg","g");e.F$.ellipse=document.createElementNS("http://www.w3.org/2000/svg","ellipse");e.F$.appendChild(e.F$.ellipse)}if(e.F$.parentNode!==t){t.appendChild(e.F$)}var n=r.Nm;var f=r.resolution;var a=AMap["Util"]["parseLngLatData"](e.getOptions().center);var s=e["getRadius"]();if(!a||!s){return}var u=i.map["getResolution"](a);var o=e.F$.ellipse;var l=e._map["getProjection"]();var v=l.project(a.lng,a.lat);var c=Math.round((v[0]-n[0])/f);var h=Math.round((n[1]-v[1])/f);var d=Math.ceil(s[0]/u);var y=Math.ceil(s[1]/u);o.style.cssText=this.hee(e);o.setAttribute("cx",""+c);o.setAttribute("cy",""+h);o.setAttribute("rx",""+d);o.setAttribute("ry",""+y)};r.prototype.hee=function(e){var r=e.getOptions();var t=r["strokeColor"],i=r["strokeWeight"],n=r["strokeOpacity"],f=r["fillColor"],a=r["fillOpacity"],s=r["strokeStyle"],u=r["strokeDasharray"];var o=[];if(t){o.push("stroke:"+t);if(typeof n==="number"){o.push("stroke-opacity:"+n)}}if(f){o.push("fill:"+f);if(typeof a==="number"){o.push("fill-opacity:"+a)}}if(i){o.push("stroke-width:"+i)}if(s){var l=s==="solid"?"none":u;o.push("stroke-dasharray:"+l.toString())}o.push("display:"+(e.visible?"block":"none")+";");var v=o.join(";");return v};return r}(Sa);var _a=function(){function e(e,r){var i=this;this._dragObjects={sy:{x:0,y:0},Iz:-1,hy:[0,0]};this.B$=[0,0];this._dragging=false;this.mee=new $a;this.bee=new Ca;this.pee=new Fa;this.xee=new Oa;this.wee=new ja;this.kee=[];this.lt=false;this.ey=function(){i._map.off("dragstart",i.gee);i._map.off("movestart",i.gee);i._map.off("moveend",i.Mee);i._map.off("zoomstart",i.Iee);i._map.off("zoomend",i.gb)};this.gee=function(e){if(i._dragging){return}var r=e.target;i._dragging=true;var t=r.getBounds().toJSON();i._dragObjects.hy=r["lngLatToCoords"]([t[0],t[3]])};this.Mee=function(e){i._dragging=false;i._map.setNeedUpdate(true)};this.Iee=function(e){i.lt=true;i._dragObjects.Iz=e.target.getZoom()};this.gb=function(e){i.lt=false;i._dragObjects.Iz=e.target.getZoom()};var t=e.kv;r._parent=t.querySelector(".amap-layers");var n=document.createElement("div");t.appendChild(n);r._container=n;this.GT(e,r);this._map=e;this.ny();this._dragObjects.Iz=e["getZoom"]()}e.prototype.renderFrame=function(e,r,t,i,n,f){this.Aee(t);var a=this.See(t);if(this._dragging&&!this.lt){this.$ee(t)}else if(r.sr){this.kee=r.sr;var s=document.createDocumentFragment();for(var u=0,o=r.sr;u<o.length;u++){var l=o[u];switch(l.CLASS_NAME){case"Overlay.Polyline":case"Overlay.BezierCurve":this.mee.O$(l,a,s);break;case"Overlay.Polygon":case"Overlay.Rectangle":this.bee.O$(l,a,s);break;case"Overlay.Circle":this.pee.O$(l,a,s,t);break;case"Overlay.CircleMarker":this.xee.O$(l,a,s,t);break;case"Overlay.Ellipse":this.wee.O$(l,a,s,t);break}}this.AM.innerHTML="";this.Cee();this.AM.appendChild(s)}};e.prototype["getContainer"]=function(){return this.wo};e.prototype.destroy=function(){this.ey()};e.prototype.GT=function(e,r){this.wo=document.createElement("div");this.wo.className="amap-layer amap-layer-overlay amap-"+r.co();this.wo.style.zIndex=r.getLayerConfig().zIndex+"";this.wo.style.opacity=r.getLayerConfig().opacity+"";this.wo.style.visibility=r.getLayerConfig().visible?"visible":"hidden";this.AM=document.createElementNS("http://www.w3.org/2000/svg","svg");this.AM.setAttribute("xmlns","http://www.w3.org/2000/svg");this.wo.appendChild(this.AM);e.do.appendChild(this.wo)};e.prototype.Aee=function(e){var r=e.viewState.size;this.AM.setAttribute("width",""+r[0]);this.AM.setAttribute("height",""+r[1])};e.prototype.See=function(e){var r=e.viewState.boundsCoord;var t=[r[0],r[3]];return{Nm:t,resolution:e.viewState.resolution}};e.prototype.ny=function(){this._map.on("dragstart",this.gee);this._map.on("movestart",this.gee);this._map.on("moveend",this.Mee);this._map.on("zoomstart",this.Iee);this._map.on("zoomend",this.gb)};e.prototype.$ee=function(e){var r=e.viewState.boundsCoord;var t=[r[0],r[3]];var i=1;var n=M["transform"];var f=n[e.viewState.projectionId].yo(t[0],t[1],this._dragObjects.Iz);var a=n[e.viewState.projectionId].yo(this._dragObjects.hy[0],this._dragObjects.hy[1],this._dragObjects.Iz);this.wo.style.left=(f[0]-a[0])*i*-1+"px";this.wo.style.top=(f[1]-a[1])*i*-1+"px"};e.prototype.Cee=function(){this.B$=[0,0];this.wo.style.left="0px";this.wo.style.top="0px"};return e}();M.DomRender=Aa;M["LayerRenderManager"]["addLayerRender"]("AMap.ImageLayer",undefined,Af);M["LayerRenderManager"]["addLayerRender"]("AMap.CanvasLayer",undefined,Af);M["LayerRenderManager"]["addLayerRender"]("AMap.VectorLayer",undefined,_a);M["LayerRenderManager"]["addLayerRender"]("AMap.VectorSvgLayer",undefined,_a);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer",undefined,g);M["LayerRenderManager"]["addLayerRender"]("AMap.RasterLayer",undefined,g);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.Flexible",undefined,g);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.RoadNet",undefined,g);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.Satellite",undefined,g);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.Traffic",undefined,g);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.WMS",undefined,g);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.WMTS",undefined,g);M["LayerRenderManager"]["addLayerRender"]("AMap.TileLayer.Mark",undefined,g);M["LayerRenderManager"]["addLayerRender"]("AMap.SkyLayer",undefined,Ia);M["LayerRenderManager"]["addLayerRender"]("AMap.IndoorMap",undefined,kf);M["LayerRenderManager"]["addLayerRender"]("AMap.LabelsLayer",undefined,ef);M["LayerRenderManager"]["addLayerRender"]("AMap.CustomLayer",undefined,df)})(); '
);
